var accessToken="";(function(b){b.fn.widget=function(a,c){return this.each(function(){var d=jQuery(this).attr("id"),f=String(jQuery(this).attr("class")).split(" ")[0],i=b(this);if(jQuery(this).is(":visible")&&f.indexOf("WID")!=-1){var e=f.split("_");if(e.length==4&&(e=parseInt(e[1]),!isNaN(e))){var g=b.fn.widget[d];b.isFunction(g)?g(i,a,e,f,c):(a.complete!=null&&a.complete(f),log("Not implement widget: "+d))}}})}})(jQuery);function get_api_url(b){return g_api_url+b}
function generate_nav_bar(b,a){var c="";c+='<div class="navDiv">';b>0?(c+='<a class="nav-load-x" data-page="0">|&lt;</a>',c+='<a class="nav-load-x" data-page="'+(b-1)+'">&lt;&lt;</a>'):c+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';for(var d=!1,f=0;f<a;f++)f==b?(c+='<span class="select">'+(f+1)+"</span>",d=!1):Math.abs(f-b)>2&&f!=a-1&&f!=0&&a>10?d==!1&&(c+="<span>...</span>",d=!0):c+='<a class="nav-load-x" data-page="'+f+'">'+(f+1)+"</a>";b<a-1?(c+='<a class="nav-load-x" data-page="'+
(b+1)+'">&gt;&gt;</a>',c+='<a class="nav-load-x" data-page="'+(a-1)+'">&gt;|</a>'):c+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';c+="</div>";return c}
(function(b){b.fn.widget.header=function(a,c,d,f){a.resize(function(){var a=parseInt(b(this).find("#header_pic").attr("data-widget-height"));b(this).attr("class");var c=parseInt(b(this).find("#header_pic").attr("data-image-width")),f,d=a;b(this).width()<c&&g_rwd==1?(f=b(this).width(),d=f*(a/c),b(this).height()<d&&(d=b(this).height(),f=d*(c/a)),b(this).find("#header_pic").css("background-size",f+"px "+d+"px"),b(this).css("height",d)):b(this).height()<d&&g_rwd==1?(d=b(this).height(),f=d*(c/a),b(this).width()<
f&&(f=b(this).width(),d=f*(a/c)),b(this).find("#header_pic").css("background-size",f+"px "+d+"px"),b(this).css("height",d)):(b(this).find("#header_pic").css("background-size","auto"),b(this).css("height",a))});c.complete!=null&&c.complete(f)};b.fn.widget.carousel=function(a,c,d,f){var i=c.root_path,e=a.find(".pics").attr("data-widget-width"),g=a.find(".pics").attr("data-widget-height"),e=parseInt(a.find(".pics").attr("data-auto-adj-with-screen")),o=parseInt(a.find(".pics").attr("data-auto-browse")),
h=g/2,d="uid="+f,v=function(a,c,f,d,h){var g=c="",e="";d==1||d==3?(c="."+a+" #prev1",g="."+a+" #next1"):d==2&&(e="."+a+" #nav");b("."+a+" .pics").cycle({fx:f,speed:1E3,delay:1E3,before:function(c,f){o!=0&&f!=void 0&&(b("."+a+" #"+f.id).css("left","0px"),b("."+a+" #"+f.id).css("top","0px"))},after:function(c,f){if(o!=0&&f!=void 0){var d=f.cycleW,g=f.cycleH,e=b("."+a).width(),m=b("."+a).height();g>m&&(g=m-g,b("."+a+" #"+f.id).animate({top:g},h));d>e&&(g=e-d,b("."+a+" #"+f.id).animate({left:g},h))}},
prev:c,next:g,pager:e,timeout:h,skipInitializationCallbacks:!0})},t=1;e==1&&(e=screen.width-17,is_rwd_page()&&(g=h),t=parseFloat(g/e));b.ajax({url:i+"widget/carousel/news_query_json_field.php",data:d,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading carousel json data")},success:function(d){for(var e=a.width(),m=Math.min(e*t,g),z=0,C=d[0].effect,s=d[0].navtype,B=d[0].playinterval,w=!!parseInt(d[0].autofit),k=1;k<d.length;k++){var u=i+"resources/"+f+"/"+d[k].image,n=d[k].title,
M=d[k].link_to,I=!!parseInt(d[k].showtitle),E=!!parseInt(d[k].enablelink),j=d[k].target,x=parseInt(d[k].img_width),G=parseInt(d[k].img_height),p='<div id="slide_'+z+'" class="inner"';p+=' style="width:'+e+"px;height:"+m+'px"';p+=' data-image-width="'+x+'" data-image-height="'+G+'">';E&&(p+='<a href="'+M+'" target="'+j+'">');p+='<img src="'+u+'"';I&&(p+=' title="'+n+'"');p+=' alt="'+n+'"';p+=' border="0">';p+='<div class="image-mask">';p+="</div>";I&&(p+='<div class="b-link">',p+='<div class="b-title">'+
n+"</div>",p+="</div>");E&&(p+="</a>");p+="</div>";b("."+f+" .pics").append(p);z++}v(f,w,C,s,B);a.resize(function(){var a=b(this),c=b(this).width(),j=Math.min(Math.max(c*t,h),g),d=-1;b(this).find(".inner").each(function(){var a=b(this).attr("data-image-width"),f=b(this).attr("data-image-height"),h=a,x=f;w?(h=c,x=h*(f/a)):(x=j,h=x*(a/f));b(this).css("width",w?h:c);b(this).css("height",x);a=c>h?(c-h)/2:0;b(this).find("img").css("left",a);b(this).find("img").css("width",h);b(this).find("img").css("height",
x);o==0&&b(this).find(".b-link").css("bottom",x-j);d=Math.max(d,x)});d!=-1&&a.css("height",Math.min(j,d));b("."+f+" .pics").cycle("resize")});s==3?(a.find(".nav-arrow-type").focus(function(){b("."+f+" .pics").cycle("pause")}),a.find(".nav-arrow-type").blur(function(){b("."+f+" .pics").cycle("resume")})):(a.find("#nav a").focus(function(){b("."+f+" .pics").cycle("pause");var a=parseInt(b(this).attr("title"))-1;b("."+f+" .pics").cycle(a)}),a.find("#nav a").blur(function(){b("."+f+" .pics").cycle("resume")}),
a.find("#nav a").keyup(function(c){var c=c.which,f=parseInt(b(this).attr("title"))-1;c==13&&f>=0&&(c=a.find("#slide_"+f+" a").attr("href"),typeof c!="undefined"&&c!=""&&window.open(c))}));c.complete!=null&&c.complete(f)}});a.unbind("mouseover");a.mouseover(function(){b("."+f+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.7},200)});a.find(".nav-arrow-type").unbind("focus");a.find(".nav-arrow-type").focus(function(){b("."+f+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.7},
200)});a.find(".nav-arrow-type").unbind("blur");a.find(".nav-arrow-type").blur(function(){b("."+f+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.unbind("mouseleave");a.mouseleave(function(){b("."+f+" .pics").cycle("resume");a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.find(".nav-arrow-type").animate({opacity:0.3},200)};b.fn.widget.main_menu=function(a,c,d,f){b("#site_embed_pages").height();var i=parseInt(a.find("#main_menu_x").attr("data-widget-depth")),
d=parseInt(a.find("#main_menu_x").attr("data-widget-submenu-expand-mode")),e=function(){g_rwd!=0&&(is_rwd_page()?(a.find(".main-menu-content").hide(),a.find(".nav-trigger").show()):(a.find(".main-menu-content").show(),b(".nav-trigger").hide()))},g=function(b){b.next("ul").length>0&&(a.find(".submenu").hide(),b.next().is(":visible")?b.html(b.html()).next().hide():b.html(b.html()).next().show(),adjustSectionSize())};i>1&&(d==0?a.find(".main_nav a").click(function(){g(b(this))}):(a.find(".main_nav a").mouseenter(function(){g(b(this))}),
a.mouseleave(function(){a.find(".submenu").hide()})));e();a.find(".nav-trigger").unbind("click");a.find(".nav-trigger").click(function(){show_mobile_nav_bar(f)});a.find(".main_nav a").unbind("keydown");a.find(".main_nav a").keydown(function(a){if(a.keyCode==9)return i>1&&g(b(this)),!0});a.resize(function(){e()});if(g_default_active_class_id>0){var o="C-"+g_default_active_class_id;a.find(".main_nav a").each(function(){var c=b(this);if(c.attr("id")==o)return a.find(".active").removeClass("active"),
c.toggleClass("active"),!0;c.next("ul").find("a").each(function(){b(this).attr("id")==o&&(a.find(".submenu").hide(),c.next().is(":visible")?c.html(c.html()).next().hide():c.html(c.html()).next().show(),a.find(".active").removeClass("active"),b(this).toggleClass("active"))})})}c.complete!=null&&c.complete(f)};b.fn.widget.main_menu2=function(a,c,d,f){var i=a.find("#main_menu_content2").attr("data-widget-mouseover-audio"),e=parseInt(a.find("#main_menu_content2").attr("data-widget-average-menu")),g=parseInt(a.find("ul.navigation>li a").css("width")),
o=parseInt(a.find("#main_menu_content2").attr("data-widget-auto-flip-submenu")),h="",v=0,t=function(){var c=parseInt(a.find("ul.navigation > li > a").css("padding-left"))+parseInt(a.find("ul.navigation > li > a").css("padding-right"));navigator.userAgent.indexOf("Firefox")!==-1&&(c=0);if(e==1){var d=parseInt(a.find("ul.navigation").css("padding-left"))*2,c=(a.width()-d)/a.find("ul.navigation>li").length-c;a.find("ul.navigation ul a").css("width",Math.max(c,200));a.find("ul.navigation>li>a").css("width",
c);navigator.userAgent.indexOf("Firefox")!==-1&&a.find("ul.navigation>li>a").last().css("width",Math.floor(c))}else e!=2&&(c=g-c,a.find("ul.navigation ul a").css("width",Math.max(c,200)),a.find("ul.navigation>li>a").css("width",c),navigator.userAgent.indexOf("Firefox")!==-1&&a.find("ul.navigation>li>a").last().css("width",Math.floor(c)));is_rwd_page()?(a.css("height","auto"),a.find(".main-menu-content").hide(),a.find(".nav-trigger").show(),c=b("."+f+" #mobile_main_menu_content2"),c.hasClass("menu-silder")&&
c.show()):(a.find(".main-menu-content").show(),a.find(".nav-trigger").hide(),a.find(".mobile-main-menu-content").hide())},r=function(){a.find("ul.navigation>li ul").hide()},l=function(a,b){var c=b.children("ul"),d=a.pageX,g=b.attr("data-level"),e=0,k=-1,e=-1;h=c.attr("id");typeof h!="undefined"&&(e=c.attr("data-ul-level"),k=c.width(),e*=k);c.css("display","table");if(g>2){var g=!1,r=c.parents("li[data-level=2]");o==1&&(r.hasClass("flip-submenu-x")?g=!0:k>0&&d+e>document.body.clientWidth&&(g=!0,r.addClass("flip-submenu-x")));
g?c.css("left","-100%"):c.css("left","100%");c.css("top","0")}i!=""&&createsoundbite(f+"/"+i).playclip()};a.find("ul.navigation > li:has(ul) > a").append("<div class='arrow-bottom'></div>");a.find("ul.navigation > li ul li:has(ul) > a").append("<div class='arrow-right'></div>");a.find("ul.navigation").unbind("mouseleave");a.find("ul.navigation").mouseleave(function(){r(b(this));a.css("z-index",10)});a.find("ul.navigation li").unbind("mouseover");a.find("ul.navigation li").mouseover(function(c){l(c,
b(this));a.css("z-index",99);a.find("ul").css("z-index",99)});a.find("ul.navigation li").unbind("mouseleave");a.find("ul.navigation li").mouseleave(function(){r(b(this));a.css("z-index",10);a.find("ul").css("z-index",10)});a.find("ul.navigation ul a").unbind("click");a.find("ul.navigation ul a").click(function(){b(this).find("ul.navigation li ul").hide()});a.find("ul.navigation li a").unbind("click");a.find("ul.navigation li a").click(function(){a.find(".active").removeClass("active");b(this).closest(".navigation>li").children("a").toggleClass("active")});
a.find("#close_mobile_main_menu_content2").unbind("click");a.find("#close_mobile_main_menu_content2").click(function(){show_mobile_nav_bar(f)});a.find(".nav-trigger").unbind("click");a.find(".nav-trigger").click(function(){show_mobile_nav_bar(f)});a.find("ul.navigation li").unbind("keyup");a.find("ul.navigation li").keyup(function(c){if(c.keyCode==9){var f=b(this).parent("ul").attr("data-ul-level");f==1?r(b(this)):f<v&&a.find("ul[data-ul-level="+v+"]").hide();l(c,b(this));a.css("z-index",99);a.find("ul").css("z-index",
10);log("key up on menu. currentULevel="+f+", prevULevel="+v);v=b(this).parent("ul").attr("data-ul-level");return!1}return!0});a.find("ul.navigation li[data-level=2]").last().find("li").last().unbind("focusout");a.find("ul.navigation li[data-level=2]").last().find("li").last().focusout(function(){r(b(this))});a.resize(function(){t()});a.find(".mobile-main-menu-content > li:has(ul) > a").append("<div class='mobile-arrow-bottom'></div>");a.find(".mobile-main-menu-content .mobile-arrow-bottom").unbind("click");
a.find(".mobile-main-menu-content .mobile-arrow-bottom").click(function(){$el=b(this).parents("li").find("ul");$el.css("display")!=="none"?$el.hide():$el.show();return!1});g_default_active_class_id!=""&&a.find("#C-"+g_default_active_class_id).toggleClass("active");t();c.complete!=null&&c.complete(f)};b.fn.widget.quick_link=function(a,c,d,f){var i=c.root_path,e=parseInt(a.find("#adshow").css("border-width")),g=parseInt(a.find("#quick_link_main").attr("data-widget-size-type")),o=parseInt(a.find("#quick_link_main").attr("data-widget-nav-type"));
parseInt(a.find("#quick_link_main").attr("data-widget-enable-carousel"));var h=parseInt(a.find("#quick_link_main").attr("data-enable-rwd-auto-fit-width")),v=parseInt(a.find("#quick_link_main").attr("data-widget-show-count")),t=parseInt(a.find("#quick_link_main").attr("data-widget-play-interval")),r=a.find("#quick_link_main").attr("data-image-show-width"),r=r=="100%"?r:parseInt(r),l=a.find("#quick_link_main").attr("data-image-show-height"),l=l=="100%"?l:parseInt(l),m=parseInt(a.find("#quick_link_main").attr("data-margin-size")),
z=decodeURIComponent(a.find("#quick_link_main").attr("data-string-table")),C=null,s=a.find("#quick_link_main").css("max-width"),B=0,w=!1,k=function(){if(g==0&&is_rwd_page()&&h>10){var b=a.find(".adshow-x").css("border-left-style")=="none"?0:parseInt(a.find(".adshow-x").css("border-left-width")),c=h-10;r=(a.width()-(c+1)*m-c*2*b)/c;a.find(".adshow-x").find("img").css("width",r);a.find(".adshow-x").find("img").css("height","auto")}},u=function(a,b){var c="";c+='<div class="navDivGF">';a>0?(c+='<a class="nav-load-x" data-page="0" tabindex="0">|&lt;</a>',
c+='<a class="nav-load-x" data-page="'+(a-1)+'" tabindex="0">&lt;&lt;</a>'):c+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';for(var f=!1,d=0;d<b;d++)d==a?(c+='<span class="select">'+(d+1)+"</span>",f=!1):Math.abs(d-a)>2&&d!=b-1&&d!=0&&b>10?f==!1&&(c+="<span>...</span>",f=!0):c+='<a class="nav-load-x" data-page="'+d+'" tabindex="0">'+(d+1)+"</a>";a<b-1?(c+='<a class="nav-load-x" data-page="'+(a+1)+'" tabindex="0">&gt;&gt;</a>',c+='<a class="nav-load-x" data-page="'+(b-
1)+'" tabindex="0">&gt;|</a>'):c+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';c+="</div>";return c},n=function(c){var d=r,k=l;h==1&&is_rwd_page()&&(d=b(window).width()-e*2,B=1);var j={};j.uid=f;j.maxRows=v;j.pageNum=c;j.w=d;j.h=k;j.fit_width=B;b.ajax({url:i+"widget/quick_link/content_query_json_field.php",data:j,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(c){var d=c[0].pageNum,j=c[0].totalPages;a.find(".adshow-x").hide();for(var h=
1;h<c.length;h++){var e=c[h].resources,A=c[h].over_resources,k="",r="",E=c[h].id,I=c[h].link_to,R=c[h].target,O=c[h].title,l=c[h].desc,r=c[h].style,q=c[h].over_style,m=c[h].display_alt_title,y=O;R=="_blank"&&(y=O+"("+z+")");e!=""&&(k=i+"resources/"+f+"/"+e,a.find("#content_"+h+" img").attr("data-src",k));a.find("#content_"+h+" img").attr("src",k);a.find("#content_"+h+" img").attr("alt",m==1?O:"");m==1&&a.find("#content_"+h+" img").attr("title",y);g==0?(a.find("#content_"+h+" img").attr("style",r),
a.find("#content_"+h+" img").attr("data-style",r)):a.find("#content_"+h+" img").attr("style","");A!=""&&(r=i+"resources/"+f+"/"+A,a.find("#content_"+h+" img").attr("data-over-src",r));q!=""&&a.find("#content_"+h+" img").attr("data-over-style",q);a.find("#content_"+h+" a").attr("href",I);a.find("#content_"+h+" a").attr("target",R);a.find("#content_"+h+" a").attr("title",y);a.find("#content_"+h+" h2").html(O);a.find("#content_"+h+" .ellipsis").text(l);a.find("#content_"+h+" .Txt").attr("id","q_"+E);
a.find("#content_"+h).parent(".adshow-x").fadeIn()}o==2&&(a.find("#nav").empty(),a.find("#nav").append(u(d,j)),a.find(".nav-load-x").click(function(){clearInterval(C);n(b(this).attr("data-page"))}));j>1?a.find("#nav").show():a.find("#nav").hide();t>0&&j>1&&(d+1>=j?d=0:d+=1,C=setTimeout(function(){n(d)},t));a.find(".adshow-x").mouseenter(function(){b(this).find("p").text()!=""&&b(this).find(".Txt").css("bottom",0);var a=b(this).find("img").attr("data-over-src");a!=""&&b(this).find("img").attr("src",
a);a=b(this).find("img").attr("data-over-style");a!=""&&b(this).find("img").attr("style",a)});a.find(".adshow-x").mouseleave(function(){if(b(this).find("p").length>0){var a=b(this).find(".Txt").height()-b(this).find(".Txt h2").height();b(this).find("p").text()==""&&(a=40);b(this).find(".Txt").css("bottom",-a)}var a=b(this).find("img").attr("data-over-src"),c=b(this).find("img").attr("data-src");a!=""&&c!=""&&b(this).find("img").attr("src",c);a=b(this).find("img").attr("data-over-style");c=b(this).find("img").attr("data-style");
a!=""&&c!=""&&b(this).find("img").attr("style",c)})}})};a.resize(function(){var c=window.devicePixelRatio,d=b(this).width(),e=0,j=0;log("quick_link "+f+": quick_link_max_width="+s+", devicePixelRatio="+c);s.indexOf("%")!=-1?d*=parseInt(s)/100:d=s.indexOf("px")!=-1?parseInt(s):b(this).width();k();var x=0,G=0;a.find(".adshow-x").each(function(a){b(this).removeClass("first-col-x");var c=g==0?r:b(this).width(),H=b(this).css("border-left-style")=="none"?0:parseInt(b(this).css("border-left-width"));w=!1;
c+=2*H+m;c>=d?is_rwd_page()?(log("quick_link "+f+": this is full case, adshow_width="+c+", quick_link_width="+d),b(this).css("width","auto"),w=!0):(c=d-2*H-m,c*=1,b(this).css("width",c),log("quick_link "+f+": new adshow_width="+c)):(b(this).css("width","auto"),is_rwd_page()&&(w=!0));e+c<=d?(e+=c,a==0&&b(this).addClass("first-col-x"),x++):(x=0,e=c,b(this).addClass("first-col-x"),G++);G==0&&b(this).addClass("first-row-x");j=Math.max(e,j);is_rwd_page()&&h==1?b(this).find(".Txt").css("width",b(window).width()-
5):b(this).find(".Txt").css("width",r);b(this).find(".Txt").each(function(){if(b(this).find("p").length>0){var a=b(this).height()-b(this).find("h2").height();b(this).find("p").text()==""&&(a=40);b(this).css("bottom",-a)}})});w?(a.find("#quick_link_main").css("width","100%"),a.find("#quick_link_main").css("max-width","100%")):j>0&&(a.find("#quick_link_main").css("width",j),horzWidthOffset=a.find("#quick_link_main").get(0).scrollWidth-a.find("#quick_link_main").get(0).clientWidth,horzWidthOffset>0&&
(j+=horzWidthOffset,a.find("#quick_link_main").css("width",j)));g==0&&(w?h==1?a.find(".adshow-x").css("margin-left",0):(x=h==12?2:h==13?3:h==14?4:1,c=(d-r*x)/(x+1),a.find(".adshow-x").css("margin-left",c)):(a.find(".adshow-x").css("margin-left",m),a.find(".first-row-x").css("margin-top",0),a.find(".first-col-x").css("margin-left",0)));a.find(".navDiv").css("margin-left",-a.find(".navDiv").width()/2)});n(0);c.complete!=null&&c.complete(f)};b.fn.widget.youtubexx=function(a,c,d,f){var i=a.find(".main").attr("data-show-title"),
d=a.find(".main").attr("data-show-playlist"),e=a.find(".main").attr("data-show-playlist-height"),g=function(b){var c=b.getAttribute("data-src"),b=b.getAttribute("title");a.find("iframe").attr("src",c);i==1&&(a.find(".youtube_title_block span").attr("title",b),a.find(".youtube_title_block span").text(b))},o=a.find("li").length;o>0&&(o=Math.floor(Math.random()*o),o=a.find("li").get(o),g(o));d==0?a.find(".playlist").hide():d==1?(a.find(".playlist").hide(),a.find(".main").mouseenter(function(){var c=
a.find(".main .playlist");c.show();c.css("top",b(this).height())}),a.find(".main").mouseleave(function(){a.find(".main .playlist").hide()}),a.find(".main .playlist li").click(function(){g(b(this).get(0));a.find(".main .playlist").hide()})):(a.find(".playlist").show(),a.find(".main .playlist").css("height",e),a.find(".main .playlist li").click(function(){g(b(this).get(0))}));(function(){var b=a.find(".header").height()+a.find(".yucontent").height()+a.find(".footer").height();setWidgetHeight(a,b)})();
c.complete!=null&&c.complete(f)};b.fn.widget.youtube=function(a,c,d,f){var i=c.root_path,d=c.action,e=a.find(".main").attr("data-show-title"),g=a.find(".main").attr("data-autoplay"),o=a.find(".main").attr("data-controls"),h=a.find(".main").attr("data-mute"),v=a.find(".main").attr("data-autoplay-next-video"),t=a.find(".main").attr("data-random-play"),r=a.find(".main").attr("data-show-playlist"),l=a.find(".main").attr("data-show-playlist-height"),m=null,z=!1,C="",s=-1,B="",w=function(){var b=0,c=a.find("li").length;
if(c<=1)return 0;if(t)for(;;){if(b=Math.floor(Math.random()*c),b!=s)break}else b=s+1,b>c&&(b=0);return b},k=function(a){var c={};c.youtubeId=a;b.ajax({url:i+"widget/youtube/update_youtube_clicks.php",data:c,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})},u=function(){a.find(".youtube_thumb_block").hide()},n=function(b){var c=b.getAttribute("data-src"),d=b.getAttribute("title");s=b.getAttribute("data-id");C=b.getAttribute("data-end-url");if(m!=null&&c!=""&&z)if(log("loadVideoByUrl..."+
c),m.loadVideoByUrl(c),h==1&&m.mute(),g==0){var c=a.find(".youtube_content_block").width(),f=a.find(".youtube_content_block").height();a.find(".youtube_thumb_block").width(c);a.find(".youtube_thumb_block").height(f);c=b.getAttribute("data-vid");b=b.getAttribute("title");a.find(".youtube_thumb_block img").attr("src","https://img.youtube.com/vi/"+c+"/hqdefault.jpg");a.find(".youtube_thumb_block img").attr("alt",b);a.width()>a.height()?(a.find(".youtube_thumb_block img").css("width","auto"),a.find(".youtube_thumb_block img").css("height",
"140%")):(a.find(".youtube_thumb_block img").css("width","100%"),a.find(".youtube_thumb_block img").css("height","auto"));a.find(".youtube_thumb_block").show();m.stopVideo();a.find("#b_play").show()}else u();e==1&&(a.find(".youtube_title_block span").attr("title",d),a.find(".youtube_title_block span").text(d));B=d},M=function(){z=!0;if(a.find("li").length>0){var b=w(),b=a.find("li").get(b);log("onPlayerReady...");n(b)}},I=function(b){b.data==YT.PlayerState.PLAYING?log("YT.PlayerState.PLAYING"):b.data==
YT.PlayerState.ENDED?(log("YT.PlayerState.ENDED"),v==1?z!=!1&&(b=w(),b=a.find("li").get(b),n(b)):C!=""&&popup_content("url","940px",C,"yes"),k(s)):b.data==YT.PlayerState.PAUSED?log("YT.PlayerState.PAUSED"):b.data==YT.PlayerState.BUFFERING?log("YT.PlayerState.BUFFERING"):b.data==YT.PlayerState.CUED&&(log("YT.PlayerState.CUED"),a.find(".youtube_content_block").prop("title",B))},E=function(){};if((typeof YT=="undefined"?!1:!0)==!1)return c=document.createElement("script"),c.src="https://www.youtube.com/iframe_api",
f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(c,f),this;r==0?a.find(".playlist").hide():r==1?(a.find(".playlist").hide(),a.find(".main").mouseenter(function(){var c=a.find(".main .playlist");c.show();c.css("top",b(this).height())}),a.find(".main").mouseleave(function(){a.find(".main .playlist").hide()}),a.find(".main .playlist li").click(function(){n(b(this).get(0));a.find(".main .playlist").hide()})):(a.find(".playlist").show(),a.find(".main .playlist").css("height",l),a.find(".main .playlist li").click(function(){n(b(this).get(0))}));
a.find(".youtube_thumb_block").click(function(){if(m==null)log("Player is not initialized!");else try{log("youtube_thumb_block: vplayer.playVideo"),u(),m.playVideo()}catch(a){log("youtube_thumb_block: exception")}});a.find("#b_play").keyup(function(a){if(a.which==13)if(m==null)log("Player is not initialized!");else try{log("youtube_thumb_block: vplayer.playVideo"),u(),m.playVideo()}catch(b){log("youtube_thumb_block: exception")}});a.find(".youtube_thumb_block").mouseenter(function(){a.find("#b_play").show()});
a.find(".youtube_thumb_block").mouseleave(function(){a.find("#b_play").hide()});if(d=="onYouTubeIframeAPIReady"){if(typeof YT=="undefined"){log("youtube is not ready!");c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(c,f);return}log("onYouTubeIframeAPIReady: unique_id="+f);m=new YT.Player(f+"_v_player",{height:b("."+f+" .slide_youtube").height(),width:b("."+f+" .slide_youtube").width(),title:"",tabindex:"-1",
playerVars:{autoplay:0,controls:o,modestbranding:1},events:{onReady:M,onStateChange:I,onError:E}});g==0&&a.find(".youtube_content_block").attr("tabindex",-1)}(function(){var b=a.find(".header").height()+a.find(".yucontent").height()+a.find(".footer").height();setWidgetHeight(a,b);if(r==2||r==3)b=parseInt(a.find(".yucontent .main").css("padding-left"))+parseInt(a.find(".yucontent .main").css("padding-right")),b=a.width()-a.find(".playlist").width()-b,a.find(".slide_youtube").css("width",b)})();c.complete!=
null&&c.complete(f)};b.fn.widget.popup=function(a,c,d,f){var d=c.root_path,i=parseInt(a.find("#popup_widget").attr("data-popup-timeout")),e=a.find("#popup_widget").attr("data-transition"),g=a.find("#popup_widget").attr("data-transition-close"),o=a.find("#popup_widget").attr("data-popup-width-type"),h=parseInt(a.find("#popup_widget").attr("data-popup-width")),a=(new Date).getTime(),v=g_storage.get(f+"_popup_expire_time"),t=!1;i<=0||v==""?t=!0:a>v&&(g_storage.set(f+"_popup_expire_time",""),v="",t=!0);
if(t)a={},a.uid=f,b.ajax({url:d+"widget/popup/content_query_json_field.php",data:a,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(a){a=decodeURIComponent(a[0].content);a!=""&&(b(a).appendTo(b(".popup .content")),o=="full_width"?b(".popup").css("width",b(window).width()-100):(h>b(window).width()&&(h=b(window).width()-100),b(".popup").css("width",h)),b(".popup").bPopup({speed:1200,transition:e,transitionClose:g,follow:[!1,!1],position:["auto",20],onOpen:function(){if(v==
""&&i>0){var a=new Date;a.setTime(a.getTime()+i*6E4);g_storage.set(f+"_popup_expire_time",a.getTime())}},onClose:function(){b(".popup .content").empty()}}),c.complete!=null&&c.complete(f))}})};b.fn.widget.group=function(a,c,d,f){var i=parseInt(a.find(".abgne_tab").attr("data-widget-type")),e=parseInt(a.find(".abgne_tab").attr("data-widget-average-tab")),e=parseInt(a.find(".abgne_tab").attr("data-widget-average-tab")),g=parseInt(a.find(".abgne_tab").attr("data-widget-open-tab")),o=parseInt(a.find(".abgne_tab").attr("data-widget-length")),
h=parseInt(a.find(".abgne_tab").attr("data-widget-vertical-arrangement-width")),v=a.find(".abgne_tab").attr("data-widget-group-height"),h=parseInt(a.find(".abgne_tab").attr("data-widget-vertical-arrangement-width")),t=a.find(".abgne_tab").attr("data-widget-two-column-width-type"),r=parseInt(a.find(".abgne_tab").attr("data-widget-two-column-left-width")),l=parseInt(a.find(".abgne_tab").attr("data-widget-two-column-right-width")),m=a.find(".abgne_tab").attr("data-widget-three-column-width-type"),z=
parseInt(a.find(".abgne_tab").attr("data-widget-three-column-left-width")),C=parseInt(a.find(".abgne_tab").attr("data-widget-three-column-center-width")),s=parseInt(a.find(".abgne_tab").attr("data-widget-three-column-right-width")),B=function(h,g){var e="."+f+" "+h.find("a").attr("data-href");h.addClass("active").siblings(".active").removeClass("active");b(e).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();var k=b(e).find(".widget-x").attr("id"),o=b.fn.widget[k],j=String(b(e).find(".widget-x").attr("class")).split(" ")[0];
if(b.isFunction(o)){c.complete=function(){g&&b("."+j).attr("tabindex",-1).focus()};c.update_tabindex=function(){a.find(".tab_container .tab-ctl-x").attr("tabindex",0)};if(k=="youtube")c.action="onYouTubeIframeAPIReady";o(b("."+j),c,d,j)}else log("Group: Not implement widget: "+k);b(e).find("iframe").length>0&&(b(e).find("iframe").attr("src",function(a,b){return b}),g&&b(e).find("iframe").focus())};if(i==2){a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();var w=
a.height(),k=a.find(".tabs").height();v!="auto"&&a.find(".tab_container").css("height",w-k-2);g==1&&a.find("ul.tabs li").mouseover(function(){B(b(this),!1)}).find("a").focus(function(){});a.find("ul.tabs li").click(function(){B(b(this),!1)}).find("a").focus(function(){});a.find("ul.tabs li").keyup(function(a){a.keyCode==13&&B(b(this),!0)}).find("a").focus(function(){})}a.resize(function(){if(i==2&&e==1){var c=(o+b("."+f+" .abgne_tab").width()-parseInt(a.find(".abgne_tab").css("padding-left"))-parseInt(a.find(".abgne_tab").css("padding-right"))-
o*2-1)/o;a.find("ul.tabs li").css("width",c)}a.find("#g-left_sider").removeClass("vertical_arrangement");a.find("#g-center_sider").removeClass("vertical_arrangement");a.find("#g-right_sider").removeClass("vertical_arrangement");a.width()<h&&(i==1?(a.find("#g-left_sider").addClass("vertical_arrangement"),a.find("#g-right_sider").addClass("vertical_arrangement"),t=="custom"&&(a.find("#g-left_sider").css("width",r+"%"),a.find("#g-right_sider").css("width",l+"%"))):i==3&&(a.find("#g-left_sider").addClass("vertical_arrangement"),
a.find("#g-center_sider").addClass("vertical_arrangement"),a.find("#g-right_sider").addClass("vertical_arrangement"),m=="custom"&&(a.find("#g-left_sider").css("width",z+"%"),a.find("#g-center_sider").css("width",C+"%"),a.find("#g-right_sider").css("width",s+"%"))),a.find(".abgne_tab").css("padding","0px"))});c.complete!=null&&c.complete(f)};b.fn.widget.site_news_tab=function(a,c,d,f){var i=c.root_path,e=parseInt(a.find("#sitenews_tab_main").attr("data-class-count")),g=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-max-rows")),
o=a.find("#sitenews_tab_main").attr("data-widget-newslink-openmode"),h=parseInt(a.find("#sitenews_tab_main").attr("data-widget-average-tab")),d=parseInt(a.find("#sitenews_tab_main").attr("data-widget-open-tab")),v=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-width")),t=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-height")),r=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-show")),l=parseInt(a.find("#sitenews_tab_main").attr("data-widget-height")),
m=!1,z=function(){var b=a.find(".abgne_tab").height();setWidgetHeight(a,b)},C=function(a){b(window.parent).width();b(window.parent).height();B(a,!0,function(a){parseInt(a[0].totalRows);parseInt(a[0].maxRows);var b=a[0].classTitle,c="";c+="<div class='bd' style='font-size:120%'>";c+="<div class='class_title'><h3>"+b+" \u00bb</h3></div>";c+="<ul>";for(b=1;b<a.length;b++){var d=a[b].newsId,h=a[b].title,g=a[b].content,e=a[b].linktype;c+="<li";b==0&&(c+=" class='first'");c+=">";c+="<div class='txt'>";
c+=e=="content"?"<a onclick='load_Site_News_Tab_Content("+d+', "'+f+"\")' title='"+h+"'>":g==""?"<a class='title'>":"<a href='"+g+"' class='title' target='"+o+"'>";c+=h;c+="</a></div></li>"}c+="</ul></div>";popup_content("html","940px",c,"yes")})},s=function(a){var c={};c.uid=f;c.nid=a;b.ajax({url:i+"widget/site_news_tab/news_query_content.php",data:c,type:"GET",dataType:"xml",timeout:2E4,error:function(){},success:function(a){var c="";c+="<div class='bd'>";b("entry",a).each(function(){var a=b(this).find("content").text();
c+=a});c+="</div>";popup_content("html","940px",c,"yes")}})},B=function(a,c,d){var h={};h.uid=f;h.cid=a;h.maxRows=g;if(c)h.queryall="1";b.ajax({url:i+"widget/site_news_tab/news_query_json.php",data:h,type:"GET",dataType:"json",timeout:2E4,error:function(){},success:function(a){d&&d(a)}})},w=function(d,h){B(h,!1,function(g){var e="",k=0,o=parseInt(g[0].totalRows),p=parseInt(g[0].maxRows);a.find(".tabs").width();a.find(".tab_content").height();e+="<table style='width:100%;table-layout:fixed;'>";e+=
"<tr>";e+=r==1?"<td style='vertical-align:top;width:"+(v+10)+"px;padding:0 10px 0 0;' headers='table-icon'>":"<td style='vertical-align:top;width:0px' headers='table-icon'>";for(k=1;k<g.length;k++){var i=g[k].newsId,H=g[k].title,A=g[k].image,n=g[k].width,B=g[k].height,w=g[k].content,u=g[k].linktarget,R=g[k].linktype,O=H;if(k==1){var T=v,q=t,Q=T,y=q,y=q,Q=y*(n/B),J="";Q<T?(Q=T,y=Q*(B/n),J="margin-top:"+(q-y)/2+"px;"):J="margin-left:"+(T-Q)/2+"px;";n="width:"+Q+"px;";n+="height:"+y+"px;";n+=J;e+="<label class='img-border clearfix'>";
R=="content"?e+="<a class='open-news-x tab-ctl-x' data-id='"+i+"' title='"+H+"'>":R=="url"&&(e+=w==""?"<a title='"+H+"'>":"<a href='"+w+"' title='"+H+"' target='"+u+"'>");e+="<div class='thumb' style='overflow:hidden;width:"+T+"px;height:"+q+"px'>";e+="<img alt='"+H+"' title='"+H+"' src='"+A+"' style='"+n+"'>";e+="</div>";e+="</a>";e+="</label>";e+="</td>";e+="<td style='vertical-align:top;' headers='table-content'>";e+="<div class='news-content'>"}e+="<div class='news'>";R=="content"?e+="<a href='javascript:void(0);' class='open-news-x tab-ctl-x' data-id='"+
i+"' title='"+H+"'>"+O+"</a>":R=="url"&&(e+=w==""?"<a class='tab-ctl-x' title='"+H+"'>"+O+"</a>":"<a class='tab-ctl-x' href='"+w+"' title='"+H+"' target='"+u+"'>"+O+"</a>");e+="</div>"}e+="</div>";e+="</td>";e+="</tr>";o>p&&(e+="<tr><td></td><td>",e+="<span class='btnmore' style='bottom:0px;display:block;padding-left:3px;position:relative;right:7px;text-align:right;'>",e+="<a href='javascript:void(0);' class='open-more-news-x tab-ctl-x' data-id='"+h+"' style='text-decoration:none;cursor:pointer;'>\u00bb \u66f4\u591a</a>",
e+="</span>",e+="</td></tr>");e+="</table>";a.find(d).empty();a.find(d).append(e);a.find(".tab_content").css("padding",5);g=a.find("ul.tabs").height()+15;g=l-g-a.find(".footer").height();g=Math.max(a.find(d).find("table").height(),g);a.find(".tab_content").css("height",g);a.find(".open-news-x").click(function(){var a=parseInt(b(this).attr("data-id"));s(a)});a.find(".open-more-news-x").click(function(){var a=parseInt(b(this).attr("data-id"));C(a)});z();c.complete!=null&&m==!1&&(c.complete(f),m=!0);
c.update_tabindex!=null&&c.update_tabindex(f)})},k=function(b){var c=b.find("a").attr("href"),d=b.find("a").attr("cid"),c=c.substring(c.indexOf("#"),c.length);b.addClass("active").siblings(".active").removeClass("active");a.find(c).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();w(c,d)};if(e==0)a.find("div.abgne_tab").remove();else{var u=a.find("#tab_header0").attr("href"),n=a.find("#tab_header0").attr("cid");w(u,n);a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();
d==0?a.find("ul.tabs li").click(function(){k(b(this));return!1}).find("a").focus(function(){}):d==1&&(a.find("ul.tabs li").mouseover(function(){k(b(this));return!1}).find("a").focus(function(){}),a.find("ul.tabs li").click(function(){return!1}));a.find("div.abgne_tab").css("width","100%");a.resize(function(){var b=(a.find(".tabs").width()-e)/e;h==1&&a.find(".site_news_tab_x").css("width",b)})}};b.fn.widget.activities3=function(a,c,d,f){var i=c.root_path;a.find("#main").width();var e=a.find("#main").attr("data-widget-slidecount-perpage"),
g=parseInt(a.find("#main").attr("data-widget-left-space")),o=parseInt(a.find("#main").attr("data-widget-right-space")),h=a.find("#main").attr("data-widget-container-width"),v=parseInt(a.find("#main").attr("data-widget-container-height")),t=parseInt(a.find("#main").attr("data-widget-slideshow-title")),r=parseInt(a.find("#main").attr("data-widget-album-speed"))*1E3,l=0,m=0,z=0,C=0,s="left",B=0,w=0,k=0,u=0,n=function(a){var b="";b+='<div class="slide">';for(var c=1;c<a.length;c++){var d=a[c].album_title,
f=a[c].thumb_image,h=a[c].style,e=a[c].url;d+="(\u53e6\u958b\u555f\u65b0\u8996\u7a97)";b+='<div class="slide_image" style="width:'+B+"px;height:"+w+'px;">';b+='<a href="'+e+'" class="tab-ctl-x" target="_blank">';b+='<img src="'+f+'"';b+=' title="'+d+'"';b+=' alt="'+d+'"';b+=' style="'+h+'">';t==1&&(b+='<div class="album_title_block" title="'+d+'"',b+=' style="color: rgb(255, 255, 255); opacity: 0.65; background: rgb(0, 0, 0);">',b+="<div>"+d+"</div>",b+="</div>");b+="</a>";b+="</div>"}b+="</div>";
return b},M=function(){var b=z,c=C;b==0?a.find("#leftControl").hide():a.find("#leftControl").show();b==c-1?a.find("#rightControl").hide():a.find("#rightControl").show()},I=function(){var d=a.find("#search .input").val()==void 0?"":a.find("#search .input").val(),h={paction:"query_album"};h.uid=f;h.pageNum=z;h.maxRows=e;h.keyword=escape(d);h.ws_width=B;h.ws_height=w;b.ajax({url:i+"widget/activities3/album_query_json.php",data:h,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},
success:function(b){var d=b[0].pageNum,h=b[0].totalPages,e=s,b=n(b);e=="right"?(a.find("#slideInner").css("marginLeft",-k),a.find("#slideInner").prepend(b)):(e!="left"&&e!="fadeout"&&a.find("#slideInner").empty(),a.find("#slideInner").append(b));a.find(".slide").css({"float":"left",width:k});z=d;C=h;M();if(a.find(".slide").length>1)if(e=="right"){a.find("#slideInner").fadeIn();a.find("#slideInner").animate({marginLeft:0},500,function(){a.find(".slide").last().remove();a.find("#slideInner").css("marginLeft",
0)});return}else if(e=="left"){a.find("#slideInner").fadeIn();a.find("#slideInner").animate({marginLeft:-k},500,function(){a.find(".slide").first().remove();a.find("#slideInner").css("marginLeft",0)});return}else if(e=="fadeout"){a.find("#slideInner").fadeOut(500,function(){a.find(".slide").first().remove();a.find("#slideInner").css("marginLeft",0);a.find("#slideInner").fadeIn()});return}a.find("#div_topbanner").height();a.find("#content").height();parseInt(a.find("#slideshow").css("top"));c.complete!=
null&&c.complete(f)}})},E=function(){var a=z,b=C;b<=1||(a+=1,a>b-1?(a=0,s="fadeout"):s="left",z=a,I())},j=function(a){var b=z,c=C;a.attr("id")=="rightControl"?(b+1>=c?b=c-1:b+=1,s="left"):(b-1<=0?b=0:b-=1,s="right");z=b;C=c;M();I()};a.find("#search .button").click(function(){clearInterval(u);s="none";z=0;I()});a.find("#search .input").keyup(function(b){var c=a.find("#search .input").val()==void 0?"":a.find("#search .input").val();if(b.which==13||c=="")clearInterval(u),s="none",z=0,I()});a.find("#slidesContainer").css("overflow",
"hidden");a.find("#slideshow").prepend('<span class="control tab-ctl-x" id="leftControl" title="Swipe left" alt="Swipe left"><div class="icon"></div></span>').append('<span class="control tab-ctl-x" id="rightControl" title="Swipe right" alt="Swipe right"><div class="icon"></div></span>');a.find(".control").hide();a.find(".control").keypress(function(a){a.which==13&&j(b(this))});a.find(".control").bind("click",function(){j(b(this))});a.find(".control").mouseover(function(){b(this).css("background-color",
"#AAABAC")});a.find(".control").mouseleave(function(){b(this).css("background-color","#6E7070")});a.resize(function(){var b=a.find("#main").width();l=h=="parent_width"?b-g-o:h;m=v;B=Math.floor(l/e);w=m;a.find("#content").css("width",l);k=B*e+2*e;a.find("#slideInner").css("width",k*2);a.find("#slideInner").css("overflow","hidden");I();clearInterval(u);r<=0||(u=setInterval(E,r))})};b.fn.widget.site_news=function(a,c,d,f){var i=c.root_path;a.find("#main").width();var e=parseInt(a.find("#main").attr("data-show-col-time")),
g=parseInt(a.find("#main").attr("data-show-col-attr")),o=parseInt(a.find("#main").attr("data-show-col-unit")),h=parseInt(a.find("#main").attr("data-show-col-user")),v=parseInt(a.find("#main").attr("data-show-col-click")),t=parseInt(a.find("#main").attr("data-show-col-serial")),r=a.find("#main").attr("data-show-time-format"),l=a.find("#main").attr("data-show-col-order"),m=a.find("#main").attr("data-show-col-time-width"),z=a.find("#main").attr("data-show-col-attr-width"),C=a.find("#main").attr("data-show-col-unit-width"),
s=a.find("#main").attr("data-show-col-user-width"),B=a.find("#main").attr("data-show-col-click-width"),w=a.find("#main").attr("data-show-col-serial-width"),k=a.attr("default-attr"),u=a.find("#main").attr("data-widget-news-open-mode"),n=a.attr("default-tag");k!=-1&&k!=void 0&&(a.find("#search #select_attr_"+f).val(k),a.find("#ntb").attr("flock","attr_"+k));var m=m==""||m=="undefined"?"15%":m,z=z==""||z=="undefined"?"15%":z,C=C==""||C=="undefined"?"10%":C,s=s==""||s=="undefined"?"10%":s,B=B==""||B==
"undefined"?"10%":B,w=w==""||w=="undefined"?"15%":w,M=!1,I=1;l==""&&(l="Serial,Time,Attr,Unit,News,User,Click");var E=0;e==1&&(E+=15);g==1&&(E+=15);o==1&&(E+=10);h==1&&(E+=10);v==1&&(E+=10);for(var E=100-E,j=[],l=l.split(","),k=0;k<l.length;k++){var x=l[k];t==1&&x=="Serial"?j.push(x):e==1&&x=="Time"?j.push(x):g==1&&x=="Attr"?j.push(x):o==1&&x=="Unit"?j.push(x):h==1&&x=="User"?j.push(x):v==1&&x=="Click"?j.push(x):x=="News"&&j.push(x)}var G=function(d){for(var h=d[0].flock,e=d[0].field,g=d[0].fval,
k=d[0].order,y=d[0].maxRows,o=parseInt(d[0].pageNum),F=parseInt(d[0].totalPages),D="",P=0,L=1;L<d.length;L++){var U=d[L].newsId,aa=d[L].time,n=d[L].attr,r=d[L].attr_name==""?"\u7121":d[L].attr_name,Y=d[L].title,t=d[L].title_color,l=d[L].unit,v=d[L].unit_name==""?"\u7121":d[L].unit_name,W=d[L].issuer,p=d[L].name==""?"\u7121":d[L].name,x=d[L].clicks,ca=d[L].top,fa=d[L].content_type,G=d[L].content,I=parseInt(d[L].permission);D+=P%2==0?'<tr nid="'+U+'" class="tcontent even">':'<tr nid="'+U+'" class="tcontent odd">';
for(var N=0;N<j.length;N++){var K=j[N];K=="Serial"&&(D+='<td style="text-align:center;width:'+w+'" order="DESC" field="serial" axis="\u7de8\u865f" >',D+=U,D+="</td>");K=="Time"&&(D+='<td style="text-align:center;width:'+m+'" order="DESC" field="time" axis="\u6642\u9593" >',D+=aa,D+="</td>");K=="Attr"&&(D+='<td style="text-align:center;width:'+z+'" class="ctrl" order="DESC" field="attr" fval="'+n+'" axis="\u985e\u5225">\u3010'+r+"\u3011</td>");K=="Unit"&&(D+='<td style="text-align:center;width:'+C+
'" class="ctrl" order="DESC" field="unit" fval="'+l+'" title="'+v+'" axis="\u55ae\u4f4d">'+v+"</td>");K=="News"&&(D+='<td order="DESC" field="title" style="width:'+E+'%" axis="\u5167\u5bb9">',$is_locked_news=I>=1?!0:!1,$is_top_news=ca=="1"?!0:!1,fa=="url"?(D+='<a id="content_href" class="',$is_locked_news&&(D+=" news-locked-x"),$is_top_news&&(D+=" news-top-x"),D+=" loadnews-url-x",D+=' tab-ctl-x"',D+=' href="'+G+'" nid="'+U+'" title="'+Y+'" target="_blank">'):(D+='<a id="content_href" class="',$is_locked_news&&
(D+=" news-locked-x"),$is_top_news&&(D+=" news-top-x"),u==0&&(D+=" loadnews-x"),D+=' tab-ctl-x"',u==0?D+=' href="javascript:void(0);"':u==1?D+=' href="?nid='+U+'"':u==3&&(D+=' href="'+i+"public/news_view/show.php?nid="+U+'" target="_blank"'),D+=' nid="'+U+'" title="'+Y+'">'),t!=""&&(D+='<span style="color:#'+t+'">'),D+=Y,t!=""&&(D+="</span>"),D+="</a>",$is_locked_news&&(D+='<div id="imgLock"></div>'),$is_top_news&&(D+='<div id="imgHot"></div>'),D+="</td>");K=="User"&&(D+='<td style="text-align:center;width:'+
s+'" class="ctrl" order="DESC" field="issuer" fval="'+W+'" axis="\u767c\u4f48">'+p+"</a></td>");K=="Click"&&(D+='<td style="text-align:center;width:'+B+'" order="DESC" field="clicks" axis="\u9ede\u95b1">'+x+"</td>")}D+="</tr>";P++}a.find("#ntb").attr("field",e);a.find("#ntb").attr("flock",h);a.find("#ntb").attr("fval",g);a.find("#ntb").attr("order",k);a.find("#ntb").attr("maxRows",y);a.find("#ntb").attr("pageNum",o);a.find("#ntb").attr("totalPages",F);a.find("#ntb tbody").html(D);a.find(".loadnews-url-x").unbind("click");
a.find(".loadnews-url-x").click(function(){var a=b(this).attr("nid");V(a)});a.find(".loadnews-x").unbind("click");a.find(".loadnews-x").click(function(){var a=b(this).attr("nid");S(a)});a.find("#ntb tbody tr td").unbind("click");a.find("#ntb tbody tr td").click(function(){var c=b(this).attr("field"),d=b(this).attr("fval");b(this).attr("order");if(!(c=="time"||c=="clicks"))if(c=="title")return!0;else a.find("#ntb").attr("field","time"),a.find("#ntb").attr("fval",d),a.find("#ntb").attr("order","DESC"),
a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("flock",c+"_"+d),A();return!1});H();c.update_tabindex!=null&&c.update_tabindex(f);c.complete!=null&&M==!1&&(c.complete(f),M=!0)},p=function(a,c){a.replaceWith(function(){return b(c,{html:b(this).html()})})},K=function(){var c=parseInt(a.find("#ntb").attr("totalPages")),d=parseInt(a.find("#ntb").attr("pageNum"));d+=1;c<=1?(a.find("#btnFirst").addClass("disablebtn"),a.find("#btnPrev").addClass("disablebtn"),a.find("#btnNext").addClass("disablebtn"),
a.find("#btnLast").addClass("disablebtn"),p(a.find("#btnFirst a"),"<span/>"),p(a.find("#btnPrev a"),"<span/>"),p(a.find("#btnNext a"),"<span/>"),p(a.find("#btnLast a"),"<span/>")):(d>1?(a.find("#btnFirst").removeClass("disablebtn"),a.find("#btnPrev").removeClass("disablebtn"),p(a.find("#btnFirst span"),"<a/>"),p(a.find("#btnPrev span"),"<a/>"),a.find("#btnFirst a").attr("href","javascript:void(0);"),a.find("#btnPrev a").attr("href","javascript:void(0);")):(a.find("#btnFirst").addClass("disablebtn"),
a.find("#btnPrev").addClass("disablebtn"),p(a.find("#btnFirst a"),"<span/>"),p(a.find("#btnPrev a"),"<span/>")),d==c?(a.find("#btnNext").addClass("disablebtn"),a.find("#btnLast").addClass("disablebtn"),p(a.find("#btnNext a"),"<span/>"),p(a.find("#btnLast a"),"<span/>")):(a.find("#btnNext").removeClass("disablebtn"),a.find("#btnLast").removeClass("disablebtn"),p(a.find("#btnNext span"),"<a/>"),p(a.find("#btnLast span"),"<a/>"),a.find("#btnNext a").attr("href","javascript:void(0);"),a.find("#btnLast a").attr("href",
"javascript:void(0);")),a.find(".btn a").each(function(){b(this).hasClass("tab-ctl-x")||(b(this).addClass("tab-ctl-x"),b(this).attr("tabindex",0))}),X(),d=parseInt(a.find("#ntb").attr("pageNum"))+1,c=parseInt(a.find("#ntb").attr("totalPages")),a.find("#pageInfo").text(d+" / "+(c==0?1:c)))},H=function(){var b=a.find(".topbanner-x").height()+a.find("#div_table_content").height()+a.find(".footer-x").height()+10;a.find("#search").css("position")!="absolute"&&(b+=a.find("#search").height(),b+=20);var c=
a.find("#div_table_content").width();a.find("#div_news_table_1_topbanner").css("width",c);c=a.find("#div_table_content").find("#ntb thead tr").eq(0).height();a.find("#div_news_table_1_topbanner").css("height",c);c=a.find("#div_table_content").height();a.find("#div_news_table_1").css("height",c);setWidgetHeight(a,b)},A=function(){var c=parseInt(a.find("#ntb").attr("pageNum")),d=a.find("#ntb").attr("flock"),h=a.find("#ntb").attr("field"),e=a.find("#ntb").attr("fval"),g=a.find("#ntb").attr("order"),
y=a.find("#ntb").attr("maxRows"),k=a.find("#ntb").attr("keyword"),F={};F.field=h;F.order=g;F.pageNum=c;F.maxRows=y;F.keyword=escape(k);if(e!="")F.fval=e;if(d!="")F.flock=d;F.uid=f;F.tf=r;F.auth_type="user";F.use_cache=I;I=0;F.tag=n;a.find(".loading").css("left",(a.width()-a.find(".loading").width())/2);a.find(".loading").css("top",50);a.find(".loading").show();b.ajax({url:i+"widget/site_news/news_query_json.php",data:F,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Fail to load site news!")},
success:function(b){G(b);K();a.find(".loading").hide()}})},S=function(c){var h=a.find("#ntb").attr("maxRows");if(popup_content!=void 0)c=i+"widget/site_news/news_pop_content.php?newsId="+c+"&maxRows_rsResult="+h+"&fh=0&bid="+d+"&uid="+f,popup_content("url","1000px",c,"no");else{var e=0,e=e==0?b(window).height():e,c="news_pop_content.php?newsId="+c+"&maxRows_rsResult="+h+"&fh="+e+"&bid="+d+"&uid="+f;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location=
c:(h=b(window).width()-100,e=b(window).height()-100,b(".popup-news .content").empty(),b(".popup-news").css("width",h),b(".popup-news").css("height",e),b(".popup-news").bPopup({content:"iframe",contentContainer:".content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=b(this).find("iframe");a.css("width",b(this).width()+"px");a.css("height",b(this).height()+"px");a.css("background","url()")}},function(){}))}},V=function(a){b.ajax({url:i+"widget/site_news/update_news_clicks.php",
data:"newsId="+a,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})},N=function(b){if(b=="btnFirst")a.find("#ntb").attr("pageNum",0),A();else if(b=="btnPrev")b=parseInt(a.find("#ntb").attr("pageNum"))-1,b<=0&&(b=0),a.find("#ntb").attr("pageNum",b),A();else if(b=="btnNext"){var c=parseInt(a.find("#ntb").attr("totalPages")),b=parseInt(a.find("#ntb").attr("pageNum"))+1;b>c-1&&(b=c-1);a.find("#ntb").attr("pageNum",b);A()}else b=="btnLast"&&(b=parseInt(a.find("#ntb").attr("totalPages"))-
1,a.find("#ntb").attr("pageNum",b),A())},X=function(){a.find("#btnFirst").unbind("click");a.find("#btnFirst").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnPrev").unbind("click");a.find("#btnPrev").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnNext").unbind("click");a.find("#btnNext").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnLast").unbind("click");
a.find("#btnLast").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find(".nav-unit-tag-x").unbind("click");a.find(".nav-unit-tag-x").click(function(){if(b(this).hasClass("disablebtn"))return!1;a.find(".nav-unit-tag-x").removeClass("active");b(this).addClass("active");a.find("#ntb").attr("pageNum",0);var c=b(this).attr("data-uid"),d=a.find("#search .select-attr-x"),d=d.val()!=void 0?d.val():-1,f="";c!="-1"&&(f+="unit_"+c);d!="-1"&&(f!=""&&(f+="-"),f+="attr_"+d);
a.find("#ntb").attr("flock",f);A()})};a.find("#ntb").attr("pageNum",0);A();a.find("#ntb thead tr th").unbind("click");a.find("#ntb thead tr th").click(function(){var a=b(this).attr("hid"),c=b(this).attr("order");b("#ntb").attr("field",a);b("#ntb").attr("fval","");b("#ntb").attr("order",c);b(this).attr("order",c=="DESC"?"ASC":"DESC");A();return!1});X();a.find("#search .button").unbind("click");a.find("#search .button").click(function(){var b=a.find("#search .input").val();a.find("#ntb").attr("pageNum",
0);a.find("#ntb").attr("keyword",b);A()});a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(c){var d=b(this).val();if(c.which==13||d=="")a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("keyword",d),A()});a.find("#search .select-attr-x, #search .select-unit-x").unbind("change");a.find("#search .select-attr-x, #search .select-unit-x").change(function(){var b=a.find("#search .select-unit-x"),c=a.find("#search .select-attr-x"),b=b.val()!=void 0?b.val():-1,c=c.val()!=
void 0?c.val():-1,d="";b!="-1"&&(d+="unit_"+b);c!="-1"&&(d!=""&&(d+="-"),d+="attr_"+c);a.find("#ntb").attr("flock",d);A()});a.unbind("resize");a.resize(function(){H()})};b.fn.widget.site_news2=function(a,c,d,f){function i(a,b){if(b<=1)return"";var c="";c+='<div id="nav_bar">';for(var d=!1,f=0;f<b;f++)f==a?(c+='<span class="btn select"><a class="tab-ctl-x" href="javascript:void(0);">'+(f+1)+"</a></span>",d=!1):f-a>1&&f!=b-1&&f!=0&&b>5?d==!1&&(c+='<span class="btn skip next"><a class="tab-ctl-x" href="javascript:void(0);">...</a></span>',
d=!0):f-a<-1&&f!=b-1&&f!=0&&b>5?d==!1&&(c+='<span class="btn skip prev"><a class="tab-ctl-x" href="javascript:void(0);">...</a></span>',d=!0):c+='<span class="btn" data-page="'+f+'"><a class="tab-ctl-x" href="javascript:void(0);">'+(f+1)+"</a></span>";c+="</div>";return c}var e=c.root_path;a.find("#widget_main").width();var g=parseInt(a.find("#widget_main").attr("data-show-col")),o=parseInt(a.find("#widget_main").attr("data-show-col-time")),h=parseInt(a.find("#widget_main").attr("data-show-col-attr")),
v=parseInt(a.find("#widget_main").attr("data-show-col-unit")),t=parseInt(a.find("#widget_main").attr("data-show-col-user")),r=parseInt(a.find("#widget_main").attr("data-show-col-click"));parseInt(a.find("#widget_main").attr("data-show-col-serial"));var l=a.find("#widget_main").attr("data-show-time-format"),m=decodeURIComponent(a.find("#widget_main").attr("data-col-time-title")),z=decodeURIComponent(a.find("#widget_main").attr("data-col-attr-title")),C=decodeURIComponent(a.find("#widget_main").attr("data-col-unit-title")),
s=decodeURIComponent(a.find("#widget_main").attr("data-col-user-title")),B=decodeURIComponent(a.find("#widget_main").attr("data-col-click-title")),w=a.find("#widget_main").attr("data-widget-layout"),k=a.find("#widget_main").attr("data-widget-news-open-mode"),u=a.find("#widget_main").attr("data-widget-column-count"),n=a.attr("default-attr"),M=a.attr("default-tag"),I=!1;n!=-1&&n!=void 0&&(a.find("#search #select_attr_"+f).val(n),a.find("#ntb").attr("flock","attr_"+n));var E=function(d,A){var n=A[0].flock,
j=A[0].field,l=A[0].fval,w=A[0].order,u=A[0].maxRows,O=parseInt(A[0].pageNum),E=parseInt(A[0].totalPages),q="",M=0;q+="<ul class='"+d+"'>";for(var y=1;y<A.length;y++){var J=A[y].newsId,F=A[y].time,D=A[y].attr_name==""?"\u7121":A[y].attr_name,P=A[y].title,L=A[y].unit_name==""?"\u7121":A[y].unit_name,U=A[y].name==""?"\u7121":A[y].name,aa=A[y].clicks,ba=A[y].content_type,Z=A[y].content;parseInt(A[y].permission);var Y=A[y].news_image,da=A[y].news_image_width,ea=A[y].news_image_height;q+='<li class="item">';
q+='<div class="imgBox">';g_web_accessibility==0&&(ba=="url"?q+='<a id="content_href" class="loadnews-url-x" href="'+Z+'" nid="'+J+'" title="'+P+'" target="_blank">':k==0?q+='<a id="content_href" class="loadnews-x" href="javascript:void(0);" nid="'+J+'" title="'+P+'">':k==1?q+='<a id="content_href" class="tab-ctl-x" href="?nid='+J+'" nid="'+J+'" title="'+P+'">':k==3&&(q+='<a id="content_href" class="tab-ctl-x" href="'+e+"public/news_view/show.php?nid="+J+'" target="_blank" nid="'+J+'" title="'+P+
'">'));q+='<img src="'+Y+'"';q+=' data-width="'+da+'"';q+=' data-height="'+ea+'"';q+=' alt="'+P+'">';g_web_accessibility==0&&(q+="</a>");q+="</div>";q+='<div class="textBox">';q+='<div class="atitle">';ba=="url"?q+='<a id="content_href" class="loadnews-url-x tab-ctl-x" href="'+Z+'" nid="'+J+'" title="'+P+'" target="_blank">':k==0?q+='<a id="content_href" class="loadnews-x tab-ctl-x" href="javascript:void(0);" nid="'+J+'" title="'+P+'">':k==1?q+='<a id="content_href" class="tab-ctl-x" href="?nid='+
J+'" nid="'+J+'" title="'+P+'">':k==3&&(q+='<a id="content_href" class="tab-ctl-x" href="'+e+"public/news_view/show.php?nid="+J+'" target="_blank" nid="'+J+'" title="'+P+'">');q+=P;q+="</a>";q+="</div>";q+='<div class="adec">';g_web_accessibility==0?ba=="url"?q+='<a id="content_href" class="loadnews-url-x" href="'+Z+'" nid="'+J+'" title="'+P+'" target="_blank">':k==0?q+='<a id="content_href" class="loadnews-x" href="javascript:void(0);" nid="'+J+'" title="'+P+'">':k==1?q+='<a id="content_href" class="tab-ctl-x" href="?nid='+
J+'" nid="'+J+'" title="'+P+'">':k==3&&(q+='<a id="content_href" class="tab-ctl-x" href="'+e+"public/news_view/show.php?nid="+J+'" target="_blank" nid="'+J+'" title="'+P+'">'):q+="<span>";q+=Z;q+=g_web_accessibility==0?"</a>":"</span>";q+="</div>";q+='<div id="news_info" class="ainfo">';g==1&&(o&&(q+=m,q+=":",q+=F,q+=" | "),h&&(q+=z,q+=":",q+=D,q+=" | "),v&&(q+=C,q+=":",q+=L,q+=" | "),t&&(q+=s,q+=":",q+=U,q+=" | "),r&&(q+=B,q+=":",q+=aa,q+=" | "));q+="</div>";q+="</div>";q+="</li>";M++}q+="</ul>";
a.find("#ntb").attr("field",j);a.find("#ntb").attr("flock",n);a.find("#ntb").attr("fval",l);a.find("#ntb").attr("order",w);a.find("#ntb").attr("maxRows",u);a.find("#ntb").attr("pageNum",O);a.find("#ntb").attr("totalPages",E);a.find("#ntb").html(q);a.find(".loadnews-url-x").unbind("click");a.find(".loadnews-url-x").click(function(){var a=b(this).attr("nid");K(a)});a.find(".loadnews-x").unbind("click");a.find(".loadnews-x").click(function(){var a=b(this).attr("nid");p(a)});a.find("#div_nav").html(i(O,
E));a.find("#div_nav .btn").unbind("click");a.find("#div_nav .btn").click(function(){var c=b(this).attr("data-page");a.find("#ntb").attr("pageNum",c);G()});a.find("#div_nav .next").unbind("click");a.find("#div_nav .next").click(function(){var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"))+1;c>b-1&&(c=b-1);a.find("#ntb").attr("pageNum",c);G()});a.find("#div_nav .prev").unbind("click");a.find("#div_nav .prev").click(function(){var b=parseInt(a.find("#ntb").attr("pageNum"))-
1;b<=0&&(b=0);a.find("#ntb").attr("pageNum",b);G()});x();c.complete!=null&&I==!1&&(c.complete(f),I=!0);c.update_tabindex!=null&&c.update_tabindex(f)},j=function(){a.find(".imgBox xximg").each(function(){var c=b(this),d=c.attr("data-width"),f=c.attr("data-height"),h=a.find(".imgBox").width(),e=a.find(".imgBox").height(),g=e+1;d==0||f==0?(b(this).css("height",g),b(this).css("width","auto"),setTimeout(function(){var a=c.prop("width"),b=c.prop("height"),b=(e-b)/2;c.css("left",(h-a)/2);c.css("top",b)},
700)):(d*=g/f,f=g,b(this).css("height",f),b(this).css("width","auto"),f=(e-f)/2,c.css("left",(h-d)/2),c.css("top",f))})},x=function(){if(w=="Grid"){if(b(window).width()>767&&a.find(".Grid").length>0){var c=a.find(".Grid").width()/u-25;a.find(".item").css("width",c+"px")}a.find(".item").each(function(){var a=b(this).height(),c=b(this).find(".imgBox").height(),a=a-c-28;a<=0?b(this).find(".textBox").css("height","auto"):b(this).find(".textBox").css("height",a)})}var c=a.find(".topbanner-x").height()+
a.find("#div_news_table_1").height()+a.find(".footer-x").height()+a.find("#div_nav").height(),d=a.width();d-=parseInt(a.find(".news_main").css("padding-left"));d-=parseInt(a.find(".news_main").css("padding-right"));a.find(".news_main").css("width",d);j();a.hasClass("widget-open-in-menu")?setMainHeight(c):setWidgetHeight(a,c);adjustSectionSize()},G=function(){var c=parseInt(a.find("#ntb").attr("pageNum")),d=a.find("#ntb").attr("flock"),h=a.find("#ntb").attr("field"),g=a.find("#ntb").attr("fval"),k=
a.find("#ntb").attr("order"),o=a.find("#ntb").attr("maxRows"),n=a.find("#ntb").attr("keyword"),j={};j.field=h;j.order=k;j.pageNum=c;j.maxRows=o;j.keyword=escape(n);if(g!="")j.fval=g;if(d!="")j.flock=d;j.uid=f;j.tf=l;j.auth_type="user";j.show_brief_content=1;j.show_content_image=1;var i="";a.find(".select-tag").each(function(){if(b(this).val()==""||b(this).val()=="all")return!0;i!=""&&(i+=",");i+=b(this).val()});j.tag=typeof M!="undefined"&&M!=""?M:i;a.find(".loading").css("left",(a.width()-a.find(".loading").width())/
2);a.find(".loading").css("top",50);a.find(".loading").show();b.ajax({url:e+"widget/site_news/news_query_json.php",data:j,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Fail to load site news!")},success:function(b){E(w,b);var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"))+1;b<=1?(a.find("#btnFirst").addClass("disable"),a.find("#btnPrev").addClass("disable"),a.find("#btnNext").addClass("disable"),a.find("#btnLast").addClass("disable")):(c>
1?(a.find("#btnFirst").removeClass("disable"),a.find("#btnPrev").removeClass("disable")):(a.find("#btnFirst").addClass("disable"),a.find("#btnPrev").addClass("disable")),c==b?(a.find("#btnNext").addClass("disable"),a.find("#btnLast").addClass("disable")):(a.find("#btnNext").removeClass("disable"),a.find("#btnLast").removeClass("disable")));a.find(".loading").hide()}})},p=function(c){var h=a.find("#ntb").attr("maxRows");if(popup_content!=void 0)c=e+"widget/site_news/news_pop_content.php?newsId="+c+
"&maxRows_rsResult="+h+"&fh=0&bid="+d+"&uid="+f,popup_content("url","1000px",c,"no");else{var g=0,g=g==0?b(window).height():g,c="news_pop_content.php?newsId="+c+"&maxRows_rsResult="+h+"&fh="+g+"&bid="+d+"&uid="+f;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location=c:(h=b(window).width()-100,g=b(window).height()-100,b(".popup-news .content").empty(),b(".popup-news").css("width",h),b(".popup-news").css("height",g),b(".popup-news").bPopup({content:"iframe",
contentContainer:".content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=b(this).find("iframe");a.css("width",b(this).width()+"px");a.css("height",b(this).height()+"px");a.css("background","url()")}},function(){}))}},K=function(a){b.ajax({url:e+"widget/site_news/update_news_clicks.php",data:"newsId="+a,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})};a.find("#ntb").attr("pageNum",0);G();a.find("#ntb thead tr th").unbind("click");
a.find("#ntb thead tr th").click(function(){var a=b(this).attr("hid"),c=b(this).attr("order");b("#ntb").attr("field",a);b("#ntb").attr("fval","");b("#ntb").attr("order",c);b(this).attr("order",c=="DESC"?"ASC":"DESC");G();return!1});a.find("#btnFirst").unbind("click");a.find("#btnFirst").click(function(){if(b(this).hasClass("disablebtn"))return!1;a.find("#ntb").attr("pageNum",0);G()});a.find("#btnPrev").unbind("click");a.find("#btnPrev").click(function(){if(b(this).hasClass("disablebtn"))return!1;
var c=parseInt(a.find("#ntb").attr("pageNum"))-1;c<=0&&(c=0);a.find("#ntb").attr("pageNum",c);G()});a.find("#btnNext").unbind("click");a.find("#btnNext").click(function(){if(b(this).hasClass("disablebtn"))return!1;var c=parseInt(a.find("#ntb").attr("totalPages")),d=parseInt(a.find("#ntb").attr("pageNum"))+1;d>c-1&&(d=c-1);a.find("#ntb").attr("pageNum",d);G()});a.find("#btnLast").unbind("click");a.find("#btnLast").click(function(){if(b(this).hasClass("disablebtn"))return!1;var c=parseInt(a.find("#ntb").attr("totalPages"))-
1;a.find("#ntb").attr("pageNum",c);G()});a.find("#search .button").unbind("click");a.find("#search .button").click(function(){var b=a.find("#search .input").attr("value");a.find("#ntb").attr("pageNum",0);a.find("#ntb").attr("keyword",b);G()});a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(c){var d=b(this).val();if(c.which==13||d=="")a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("keyword",d),G()});a.find("#search #select_attr, #search #select_unit").unbind("change");
a.find("#search #select_attr, #search #select_unit").change(function(){var c=a.find("#search #select_unit").val()!=void 0?a.find("#search #select_unit").val():-1,d=a.find("#search #select_attr").val()!=void 0?a.find("#search #select_attr").val():-1,f="";c!="-1"&&(f+="unit_"+c);d!="-1"&&(f!=""&&(f+="-"),f+="attr_"+d);b("#ntb").attr("flock",f);G()});a.find(".nav-next-arrow-type").unbind("click");a.find(".nav-next-arrow-type").click(function(){var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"));
c!=b-1&&(c+=1,c>b-1&&(c=b-1),a.find("#ntb").attr("pageNum",c),G())});a.find(".nav-prev-arrow-type").unbind("click");a.find(".nav-prev-arrow-type").click(function(){var b=parseInt(a.find("#ntb").attr("pageNum"));b!=0&&(b-=1,b<=0&&(b=0),a.find("#ntb").attr("pageNum",b),G())});a.find(".select-tag").unbind("change");a.find(".select-tag").change(function(){a.find("#ntb").attr("pageNum",0);G()});a.unbind("mouseover");a.mouseover(function(){a.find(".nav-arrow-type").animate({opacity:0.7},200)});a.unbind("mouseleave");
a.mouseleave(function(){a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.find(".nav-arrow-type").animate({opacity:0.3},200);a.unbind("resize");a.resize(function(){x()})};b.fn.widget.air_quality=function(a,c,d,f){d=c.root_path;a.find("#main").width();parseInt(a.find("#main").attr("data-show-col-time"));var i={};i.uid=f;b.ajax({url:d+"widget/air_quality/content_query_json.php",data:i,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(b){var d="";b.result=="success"?
(d+='<span class="site"><span class="title">'+b.data.site+"</span></span>",d+='<div class="info" style="background-color:#'+b.data.color+'">',d+='<span class="aqi">'+b.data.aqi+"</span>",d+='<span class="status">'+b.data.status+"</span>",d+='<span class="update_time">'+b.data.update_time+"</span>",d+="</div>"):d+='<span class="error">'+b.err_message+"</span>";a.find(".qcontent .main").html(d);c.complete!=null&&c.complete(f)}})};b.fn.widget.db_show=function(a,c,d,f,i){var e=c.root_path,d=c.action,
g=f+"_client_id",o=g_storage.get(g),h=a.find("#db_show_main").attr("data-access-token"),v=parseInt(a.find("#db_show_main").attr("data-widget-hr")),t=a.find("#db_show_main").attr("data-widget-cat-field");a.find("#db_show_main").attr("data-widget-cat-value");a.find("#db_show_main").attr("data-widget-search-field");var r=a.find("#db_show_main").attr("data-widget-header-field"),l=a.find("#db_show_main").attr("data-widget-icon-field"),m=a.find("#db_show_main").attr("data-widget-file-field"),z=a.find("#db_show_main").attr("data-widget-title-field"),
C=a.find("#db_show_main").attr("data-widget-clicks-field"),s=a.find("#db_show_main").attr("data-widget-shown-fields"),B=a.find("#db_show_main").attr("data-widget-open-fields"),w=a.find("#db_show_main").attr("data-widget-open-customize-url"),k=a.find("#db_show_main").attr("data-widget-open-customize-label"),u=a.find("#db_show_main").attr("data-widget-open-target"),n=parseInt(a.find("#db_show_main").attr("data-widget-column-count")),M=parseInt(a.find("#db_show_main").attr("data-widget-row-count")),
I=n*M,E=parseInt(a.find("#db_show_main").attr("data-widget-field-layout")),j=a.find("#db_show_main").attr("data-login-permission-scope"),j=j==""?"token":j,x=!1,G=t+","+r+","+l+","+m+","+z+","+s,p=0,K=null,H="",A="";o==""&&(o=f+"."+(new Date).getTime(),g_storage.set(g,o));var K=a.find("#dialog_advance_search").dialog({autoOpen:!1,width:Math.max(600,b(window).width()/2),height:600,modal:!0,position:["middle","middle"],draggable:!1,resizable:!1,buttons:{"\u78ba\u5b9a":function(){N(0);K.dialog("close")}}}),
S=function(){a.find("#person_name").html("");a.find("#option_logout").hide();a.find(".login-x").show();a.find(".login-x #section_login").css("top",Math.min(100,(a.find(".login-x").height()-a.find(".login-x #section_login").height())/2))},V=function(){var a="";b("#"+f+"_boxSearchField").find(".search_keyword_field").each(function(){var c=b(this).find(".keyword-fuzzy-search").prop("checked");b(this).find(".keyword-field").val()!=""&&(a!=""&&(a+=","),a+=b(this).attr("data-field"),a+="<",a+=c?"?"+b(this).find(".keyword-field").val()+
"?":b(this).find(".keyword-field").val())});b("#"+f+"_boxSearchField").find(".search_subitem_field").each(function(){var c=b(this).find(".keyword-field:checked");c.length>0&&(a!=""&&(a+=","),a+=b(this).attr("data-field"),a+="<",c.each(function(d){var f=b(this).attr("data-item-type"),h=!!parseInt(b(this).attr("data-editable"));f=="multi-select"&&(a+="?");a+=b(this).attr("data-title");if(f=="multi-select"||h)a+="?";d!=c.length-1&&(a+=">")}))});a=encodeURIComponent(a);if(a=="")for(var c=(z+","+s).split(","),
d=0;d<c.length;d++)c[d]!=""&&(a!=""&&(a+=","),a+="hr_field."+c[d]);return a},N=function(d){if(!x){H=V();if(t!=""){var e="",e=a.find("ul.tabs").length>0?decodeURIComponent(a.find("ul.tabs li.active").find("a").attr("data-title")):decodeURIComponent(a.find(".data_container").attr("data-title"));H!=""&&(H+=",");H+="hr_item_list."+t+"<"+e}b(".select-search-field-x").each(function(){var a=b(this).attr("data-search-fields"),c=b(this).val();c!="all"&&(H!=""&&(H+=","),H+="hr_item_list."+a+"<"+c+"")});A=a.find("#search .input").val();
var e=get_api_url("hr.items.get"),g={};g.hid=v;g.shown_column=G;g.order="";g.pageNum=d;g.maxRows=I;g.keyword_field=H;g.keyword=A;g.rule="and";g.auth=j=="no"?"token":j;g.token=h;g.uid=f;a.find(".data_container").html("<span class='loading-x'>Loading...</span>");x=!0;b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(a){x=!1;a.status==401&&S()},success:function(b){var d="",e=parseInt(b[0].pageNum);parseInt(b[0].totalRows);var g=parseInt(b[0].totalPages);parseInt(b[0].enable_d_confirm);
d+="";for(var j=1;j<b.length;j++){var o=b[j].id,y=b[j].fields;parseInt(b[j].confirm_permission);parseInt(b[j].d_confirm);var i="";m=="print_item"?(i=g_root_path+"public/hr/print_item.php?auth_type=token&token="+h+"&hid="+v+"&hiid="+o+"&window=1",B!=""&&(i+="&scol="+B)):i=m=="customize_url"?w.indexOf("?")==-1?w+"?hiid="+o+"&uid="+f:w+"&hiid="+o+"&uid="+f:O(y,m);d+="<div class='item-show'>";d+=E==1?"<div class='top-section'>":"<div class='left-section'>";var n;a:{for(n=0;n<y.length;n++){var F=y[n].infos_count,
t=y[n].infos;if(z==y[n].name){if(F>0){n=t[0].show;break a}break}}n=""}F=O(y,r);F!=""&&(d+="<img class='item-header",i!=""&&(d+=" item-open-x"),d+="'",d+=" id='item_show_image_gst'",d+=" src='"+F+"'",d+=" data-id='"+o+"'",d+=" data-url='"+i+"'",d+="/>");F=O(y,l);d+="<a class='";i!=""&&(d+=" item-open-x tab-ctl-x");d+="'";d+=" data-id='"+o+"'";d+=" data-url='"+i+"'";d+=" href='javascript:void(0);'";i!=""&&(d+=" title='"+n,i.indexOf("print_item.php")==-1&&(d+="(\u958b\u555f\u65b0\u8996\u7a97)"));d+=
"'";d+=">";F!=""&&(d+="<img class='item-icon",d+="'",d+=" id='item_show_image_gsh'",d+=" src='"+F+"'",d+=" alt='"+n+"'",d+="/>");d+="</a>";d+="</div>";d+=E==1?"<div class='bottom-section'>":"<div class='right-section'>";d+="<div class='item-title'>";d+=n;d+="</div>";for(F=0;F<y.length;F++){var t=y[F].type,W=y[F].title,q=y[F].infos_count,J=y[F].infos,ca=y[F].value;if(s.indexOf(y[F].name)!=-1){d+="<div class='item-field'>";d+="<span class='item-field-label'>";d+=W;d+="\uff1a";d+="</span>";for(W=0;W<
q;W++){var p=J[W].show,C=J[W].path;d+=q>1?"<span class='item-field-values'>":"<span class='item-field-value'>";C!=""?(d+="<a href='"+C+"' target='_blank' tabindex='0' class='tab-ctl-x'",d+=" title='"+p+"(\u958b\u555f\u65b0\u8996\u7a97)'",d+=">",d+=p,d+="</a>"):t=="multi-string"?p!=""&&(p=ca.replaceAll("\n","<br>"),d+="<div>"+p+"</div>"):d+=typeof p!="string"?"":p.length>100?p.substring(0,100)+"...":p;d+="</span>"}d+="</div>"}}d+="</div>";i!=""&&(y=k+" "+n,i.indexOf("print_item.php")==-1?y+="(\u958b\u555f\u65b0\u8996\u7a97)":
u=="_popup"&&(y+="(\u958b\u555f\u61f8\u6d6e\u8996\u7a97)"),d+="<div class='open-section'>",d+="<a class='item-open-x tab-ctl-x' id='item_open'",d+=" href='javascript:void(0);'",d+=" data-id='"+o+"'",d+=" data-url='"+i+"'",d+=" title='"+y+"'",d+=">",d+=k,d+="</a>",d+="</div>");d+="</div>"}if(g>1){b="";b+='<div style="width:100%;float:left">';b+='<div class="navDiv">';e>0?(b+='<a class="nav-load-x" data-page="0" tabindex="0">|&lt;</a>',b+='<a class="nav-load-x" data-page="'+(e-1)+'" tabindex="0">&lt;&lt;</a>'):
b+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';j=!1;for(o=0;o<g;o++)o==e?(b+='<span class="select">'+(o+1)+"</span>",j=!1):Math.abs(o-e)>2&&o!=g-1&&o!=0&&g>10?j==!1&&(b+="<span>...</span>",j=!0):b+='<a class="nav-load-x" data-page="'+o+'" tabindex="0">'+(o+1)+"</a>";e<g-1?(b+='<a class="nav-load-x" data-page="'+(e+1)+'" tabindex="0">&gt;&gt;</a>',b+='<a class="nav-load-x" data-page="'+(g-1)+'" tabindex="0">&gt;|</a>'):b+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';
b+="</div>";b+="</div>";d+=b}a.find(".data_container").html(d);T();c.update_tabindex!=null&&c.update_tabindex(f);Q();c.complete!=null&&c.complete(f);x=!1}})}},X=function(a,c,d){var e=get_api_url("hr.item.value.get"),g={};g.hid=v;g.hiid=a;g.field_name=c;g.auth=j=="no"?"token":j;g.token=h;g.uid=f;b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(a){d&&d(a.value)}})},R=function(a){X(a,C,function(c){if(isNaN(c)||c=="")c=0;var d=get_api_url("hr.item.value.set"),
e={};e.hid=v;e.hiid=a;e.field_name=C;e.field_value=parseInt(c)+1;e.auth=j=="no"?"token":j;e.token=h;e.uid=f;b.ajax({url:d,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(){}})})},O=function(a,b){for(var c=0;c<a.length;c++){var d=a[c].infos_count,f=a[c].infos;if(b==a[c].name){if(d>0)return f[0].path!=""&&f[0].path!=void 0?f[0].path:"";break}}return""},T=function(){a.find(".item-open-x").click(function(){var a=b(this).attr("data-id"),c=b(this).attr("data-url");R(a);
a=c;if(a.indexOf("print_item.php")!=-1)u=="_inframe"||u=="_inframe2"?(c=window.location.href,c=c.substring(0,c.indexOf("?")),a=c+"?in="+encodeURIComponent(a),u=="_inframe"?window.location=a:window.open(a)):(c=Math.max(b(window).width()-100,1E3)+"px",popup_content("url",c,a,"yes"));else if(u=="_self")window.location=a;else if(u=="_popup")popup_content("url",b(window).width()+"px",a,"yes");else if(u=="_inframe"||u=="_inframe2"){if(c=window.location.href,c=c.substring(0,c.indexOf("?")),c!="")a=c+"?in="+
encodeURIComponent(a),u=="_inframe"?window.location=a:window.open(a)}else window.open(a)});a.find(".nav-load-x").click(function(){N(b(this).attr("data-page"))});a.find(".nav-load-x").keyup(function(a){a.which==13&&N(b(this).attr("data-page"))})},g=function(a,c){var d=get_api_url("hr.permission.get"),f={};f.auth=j=="no"?"token":j;f.hid=v;f.token=a;b.ajax({url:d,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){S()},success:function(){q(a,c)}})},q=function(d,h){var e=get_api_url("userinfo.get"),
g={};g.auth=j=="no"?"token":j;g.token=d;b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){S()},success:function(b){a.find("#person_name").html(b.name);a.find("#option_logout").show();a.find(".login-x").hide();N(0);h&&h(b);c.complete!=null&&c.complete(f)}})},Q=function(){var c=0,c=a.find(".dbcontent").width();parseInt(a.find(".main").css("padding-left"));parseInt(a.find(".main").css("padding-right"));var d=n;c>328&&c<=628?d=2:c<=328&&(d=1);a.find(".main").css("width","100%");
a.find(".item-show").css("width",c/d-28);var f=300;a.find(".item-show").each(function(){var a=0,a=E==1?b(this).find(".top-section").height()+b(this).find(".bottom-section").height()+10+50:Math.max(b(this).find(".right-section").height(),200)+50;a>f&&(f=a)});a.find(".item-show").css("height",f);c=a.find(".header").height()+a.find(".dbcontent").height()+a.find(".footer").height();a.find(".dbshowcontent").is(":visible")&&(c+=a.find(".dbshowcontent").height());p!=c&&(p=c,a.hasClass("widget-open-in-menu")?
setMainHeight(p):setWidgetHeight(a,p),adjustSectionSize())};if(d=="onLoginHandler")return h=typeof i=="undefined"?"":i,log("setToken: "+h+" and start to query person info"),g(h,function(){h!=""&&(log(storageTokenName+" = "+h),g_storage.set(storageTokenName,h));window.location.reload()}),this;a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();a.find("ul.tabs li").click(function(){var c=b(this),d=c.find("a").attr("href");c.find("a").attr("cid");d=d.substring(d.indexOf("#"),
d.length);c.addClass("active").siblings(".active").removeClass("active");a.find(d).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();N(0);return!1}).find("a").focus(function(){});a.find("#search #sa").unbind("click");a.find("#search #sa").click(function(){N(0)});a.find("#search #ads").unbind("click");a.find("#search #ads").click(function(){K.dialog("open")});a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(b){g_web_accessibility!=1&&(A=a.find("#search .input").val(),
(b.which==13||A=="")&&N(0))});a.find(".select-search-field-x").unbind("change");a.find(".select-search-field-x").change(function(){g_web_accessibility!=1&&N(0)});a.find("#btn_login_w").click(function(){var a=e+"config/login.php",b=encodeURI("hid="+v),a=a+"?response_type="+(j=="token"?"token":"session")+"&client_id="+o+"&permission_scope=hr&scope=userinfo.get,hr.item.create,hr.items.get,hr.item.set,hr.item.get,hr.reviewer.get,hr.item.display.create,hr.items.related.value.get,hr.permission.get,hr.item.input.data.get,hr.item.update,hr.item.temp.get,hr.item.temp.create,hr.item.temp.update&data="+
b+"&continue="+encodeURIComponent(e+"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+f);window.open(a,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300")});a.find("#btn_logout").click(function(){if(j=="token")g_storage.set(storageTokenName,""),window.location.reload();else{var a=get_api_url("user.logout"),c={};c.auth=j;b.post(a,c,function(){window.location.reload()})}});a.resize(function(){Q()});j=="no"?(a.find(".dbshowcontent").hide(),N(0)):(a.find(".dbshowcontent").show(),
g(h,null))};b.fn.widget.db_step=function(a,c,d,f,i){var e=c.root_path,d=c.action,g=f+"_client_id",o=f+"_token",h=parseInt(a.find("#db_step_main").attr("data-widget-hr")),v=a.find("#db_step_main").attr("data-widget-layout"),t=!!parseInt(a.find("#db_step_main").attr("data-open-input")),r=parseInt(a.find("#db_step_main").attr("data-hide-data-list")),l=a.find("#db_step_main").attr("data-confirm-template"),m=a.find("#db_step_main").attr("data-show-confirm-content"),z=a.find("#db_step_main").attr("data-finish-template"),
C=a.find("#db_step_main").attr("data-show-finish-content"),s=parseInt(a.find("#db_step_main").attr("data-related-hr")),B=a.find("#db_step_main").attr("data-shown-column"),w=parseInt(a.find("#db_step_main").attr("data-step-count")),k=!!parseInt(a.find("#db_step_main").attr("data-widget-enable-all-steps")),u=g_storage.get(g),n=g_storage.get(o),M=0,I=0,E=!1,j=a.find("#db_step_main").attr("data-login-permission-scope"),j=j==""?"token":j,x=-1,G=-1,p=-1,K=null,H=!0,A=-1;if(h<=0)a.find(".readme").html("<li>\u5c1a\u672a\u8a2d\u5b9a\u8cc7\u6599\u5eab</li>");
else{u==""&&(u=f+"."+(new Date).getTime(),g_storage.set(g,u));var S=function(){t||(a.find("#person_name").html(""),a.find("#option_logout").hide(),a.find(".login-x").show(),a.find(".login-x #section_login").css("top",Math.min(100,(a.find(".login-x").height()-a.find(".login-x #section_login").height())/2)))},V=function(){var c=0,d=0;a.find(".current").find(".signup-column").each(function(){var a=b(this).height();if(a==0)return!1;a+=parseInt(b(this).css("padding-top"));a+=parseInt(b(this).css("padding-bottom"));
c+=a});c+=a.find(".current .section-desc-x").height()+150;a.find(".content").css("height",c);d=a.find(".header").height()+a.find(".dbstepcontent").height()+a.find(".footer").height();I!=d&&(I=d,a.hasClass("widget-open-in-menu")?(I+=20,setMainHeight(I)):setWidgetHeight(a,I),adjustSectionSize())},N=function(){var c=a.find(".user_input"),d=function(a){if(typeof a=="undefined"||a=="")return null;a=decodeURIComponent(a);try{a=JSON.parse(a)}catch(b){return null}return a},f=function(a,d){if(typeof d=="undefined")return!0;
var f=a=="or"?1:d.length,h=0,e=!1,g=function(a,b,c){if(c=="="&&a==b)return!0;else if(c==">"&&a>b)return!0;else if(c==">="&&a>=b)return!0;else if(c=="<"&&a<b)return!0;else if(c=="<="&&a<=b)return!0;else if(c=="!="&&a!=b)return!0;return!1};if(d.length<=0)return!0;for(var k=0;k<d.length;k++){var o=d[k].field_name,j=d[k].field_value,i=d[k].condition;o=="hr_account_permission"?g(A,j,i)&&h++:c.each(function(){var a=b(this).attr("data-id"),c=b(this).attr("data-type"),d="";if(a!=o)return!0;c=="single-select"?
b(this).find("input[type=radio]").each(function(){var c=b(this).attr("data-id"),f=b(this).attr("data-title"),h=b(this).attr("data-editable");b(this).prop("checked")&&(d=f,h==1&&(d+=",",d+=b("#"+a).find("#input_subitem_"+c).val()))}):c=="combobox"?b(this).find("option").each(function(){var a=b(this).attr("data-title");b(this).prop("selected")&&(d=a)}):d=b(this).val();g(d,j,i)&&h++;return!1});if(h>=f){e=!0;break}}return e};c.each(function(){var a=b(this).attr("data-id"),h=b(this).attr("data-type"),
e=b(this).hasClass("manual-user-input-x");if(h=="computation"&&e==!1){var h=b(this).attr("data-formula"),e=b(this).attr("data-basefield"),g=b(this).attr("data-basefield-computation"),k=b(this).attr("data-field"),o=b(this).attr("data-field-computation"),j=b(this).attr("data-number-of-digits");k!=void 0&&k!=""&&(k=k.split(","),b(this).val(doComputationField(h,e,g,k,o,c,j)))}if(b("#"+a).hasClass("user_unique_col"))return!0;h=b(this).attr("data-display-rule");e=d(h);if(e!=null)h=e.match,e=e.rules,h=f(h,
e),e=b("#"+a),g=b("#input_"+a),typeof e=="undefined"||typeof g=="undefined"||(h&&e.hasClass("signup-column-hidden")?(e.show(),e.removeClass("signup-column-hidden")):!h&&!e.hasClass("signup-column-hidden")&&(e.hide(),e.addClass("signup-column-hidden"),g.val("")));h=b(this).attr("data-must-rule");e=d(h);if(e!=null)h=e.display_match,e=e.display_rules,h=f(h,e),e=b("#"+a),a=b("#input_"+a),typeof e!="undefined"&&(h?(e.find(".input-must-text").show(),a.attr("data-must","true")):h||(e.find(".input-must-text").hide(),
a.attr("data-must","false")))})},X=function(){var c=a.find("a[href$='#finish']").parent("li");if(!c.hasClass("disabled")&&!E){if(check_file_is_uploading())return alert("\u6a94\u6848\u6b63\u5728\u4e0a\u50b3\u4e2d\uff0c\u8acb\u7b49\u5f85\u4e0a\u50b3\u5b8c\u6210!"),!1;if(!check_file_is_complete())return alert("\u6a94\u6848\u4e0a\u50b3\u672a\u5b8c\u6210\uff0c\u8acb\u91cd\u65b0\u4e0a\u50b3\u6a94\u6848!"),!1;var d=g_storage.get(o),f=get_user_input_array_result(a.find(".body"));E=!0;var e=get_api_url("hr.item.create"),
g={};g.auth=j;g.token=t?"db_step_access_token":d;g.hid=h;g.data=JSON.stringify(f);g.upload_column=gen_upload_value();if(x>0)e=get_api_url("hr.item.update"),g.hiid=x;g.temp=G;c.addClass("disabled");b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(a){a.status==701?alert("\u6c92\u6709\u586b\u5beb\u552f\u4e00\u6b04\u4f4d\u5167\u5bb9\uff01"):a.status==702?alert("\u8cc7\u6599\u5df2\u7d93\u5b58\u5728\uff01"):a.status==704?alert("\u6b64\u5e33\u865f\u6c92\u6709\u5efa\u7acb\u8cc7\u6599\u7684\u6b0a\u9650\uff01"):
a.status==706?alert("\u55ae\u4e00\u5e33\u865f\u50c5\u53ef\u8f38\u5165\u55ae\u7b46\u8cc7\u6599\uff0c\u6b64\u5e33\u865f\u5df2\u8f38\u5165\u904e\u8cc7\u6599\uff01"):alert("\u5efa\u7acb\u8cc7\u6599\u5931\u6557\uff01("+a.status+")");E=!1;c.removeClass("disabled")},success:function(a){E=!1;c.removeClass("disabled");a=a.id;C==1?J(a):(alert(x>0?"\u4fee\u6539\u8cc7\u6599\u5b8c\u6210!":"\u5efa\u7acb\u8cc7\u6599\u5b8c\u6210!"),window.location.reload())}})}},R=function(){var c=a.find("a[href$='#savetemp']").parent("li");
if(!c.hasClass("disabled")&&!E){if(check_file_is_uploading())return alert("\u6a94\u6848\u6b63\u5728\u4e0a\u50b3\u4e2d\uff0c\u8acb\u7b49\u5f85\u4e0a\u50b3\u5b8c\u6210!"),!1;if(!check_file_is_complete())return alert("\u6a94\u6848\u4e0a\u50b3\u672a\u5b8c\u6210\uff0c\u8acb\u91cd\u65b0\u4e0a\u50b3\u6a94\u6848!"),!1;var d=g_storage.get(o),f=get_user_input_array_result(a.find(".body"));E=!0;var e=get_api_url("hr.item.temp.create"),g={};g.auth=j;g.token=t?"db_step_access_token":d;g.hid=h;g.data=JSON.stringify(f);
g.upload_column=gen_upload_value();if(G>0)e=get_api_url("hr.item.temp.update"),g.hitid=G;c.addClass("disabled");b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(a){a.status==701?alert("\u6c92\u6709\u586b\u5beb\u552f\u4e00\u6b04\u4f4d\u5167\u5bb9\uff01"):a.status==702?alert("\u8cc7\u6599\u5df2\u7d93\u5b58\u5728\uff01"):a.status==704?alert("\u6b64\u5e33\u865f\u6c92\u6709\u5efa\u7acb\u8cc7\u6599\u7684\u6b0a\u9650\uff01"):a.status==706?alert("\u55ae\u4e00\u5e33\u865f\u50c5\u53ef\u8f38\u5165\u55ae\u7b46\u8cc7\u6599\uff0c\u6b64\u5e33\u865f\u5df2\u8f38\u5165\u904e\u8cc7\u6599\uff01"):
alert("\u66ab\u5b58\u8cc7\u6599\u5931\u6557\uff01("+a.status+")");E=!1;btn_finish.removeClass("disabled")},success:function(){E=!1;alert(G>0?"\u4fee\u6539\u66ab\u5b58\u8cc7\u6599\u5b8c\u6210!":"\u66ab\u5b58\u8cc7\u6599\u5b8c\u6210!");window.location.reload()}})}},O=function(a,c){var d=get_api_url("hr.item.temp.get"),f={};f.auth=j;f.token=a;f.hid=h;b.ajax({url:d,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){c&&c(-1)},success:function(a){c&&c(a.id)}})},g=function(a,c){var d=get_api_url("hr.permission.get"),
f={};f.auth=j;f.hid=h;f.token=a;b.ajax({url:d,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){S()},success:function(b){A=b.level;T(a,c)}})},T=function(d,h){var e=get_api_url("userinfo.get"),g={};g.auth=j;g.token=d;b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){t?(a.find(".readme").hide(),a.find(".signup-column").removeClass("signup-column-hidden"),a.find(".signup-column").removeClass("signup-column-disabled"),a.find("a[href='#savetemp']").parents("li").hide(),
M=setInterval(function(){N();V()},500),Q("",function(){init_reviewer("");init_uploader(a.find(".body"))})):S()},success:function(b){a.find("#person_name").html(b.name);a.find("#option_logout").show();a.find(".login-x").hide();a.find(".signup-column").removeClass("signup-column-hidden");a.find(".signup-column").removeClass("signup-column-disabled");a.find(".signup-column").attr("data-token",n);M=setInterval(function(){N();V()},500);O(n,function(b){G=b;Q(n,function(){init_reviewer(d);init_uploader(a.find(".body"))})});
h&&h(b);c.complete!=null&&c.complete(f)}})},q=function(a,c){var d=b("#input_"+a),f="<input ",h=d.prop("attributes");typeof h!="undefined"&&(b.each(h,function(){this.name.indexOf("data-")==0?f+=this.name+"='"+this.value+"' ":this.name.indexOf("class")==0?f+="class='user_input' ":this.name.indexOf("id")==0?f+="id='input_"+a+"' ":this.name.indexOf("name")==0&&(f+="id='input_"+a+"' ")}),f+=" value='",f+=encodeURIComponent(c),f+="' type='hidden'>",d.replaceWith(f))},Q=function(c,d){var f=get_api_url("hr.item.input.data.get"),
e={};e.auth=j;e.token=c;e.hid=h;e.hiid=x;e.copy_hiid=p;e.related_hid=s;e.query_latest_one=t?0:p==-1?1:0;e.temp=G;b.ajax({url:f,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){d&&d(json_data)},success:function(c){var f=c[0].data,e=c[0].resource_path,h=c[0].one_data_per_account,g=c[0].data_list_count,k=c[0].editable,o=c[0].latest_update_time,j=c[0].archive;x=c[0].hr_item_id;log("load_data: hr_item_id="+x);x==-1&&!t?(a.find("#option_log_list").hide(),a.find("a[href='#savetemp']").parents("li").show(),
a.find("a[href='#savetemp']").parents("li").addClass("disabled")):(a.find("#option_log_list").show(),a.find("a[href='#savetemp']").parents("li").hide());g>=1&&!h==0&&r!=1&&j==0&&(a.find("#option_data_list").show(),r==2?(a.find("#option_data_list_sec1").hide(),a.find("#option_data_list_sec2").show()):r==3&&(a.find("#option_data_list_sec1").show(),a.find("#option_data_list_sec2").hide()));for(h=0;h<f.length;h++){var i=f[h].type,g=f[h].name,n=decode_uri_string(f[h].value),p=f[h].subitem,j=f[h].disabled;
if(i=="single-select")for(i=0;i<p.length;i++){var n=p[i].name,l=p[i].value,m=p[i].editable;m==1&&(m=l.split(","),l=m[0],subitem_input_value=m.length>1?decodeURIComponent(m[1]):"",a.find("#"+g+" #input_subitem_"+n).val(subitem_input_value),a.find("#"+g+" #input_subitem_"+n).prop("readonly",j));a.find("#"+g+" #input_"+n).prop("checked",l=="true"?!0:!1);a.find("#"+g+" #input_"+n).prop("disabled",j)}else if(i=="multi-select")for(i=0;i<p.length;i++)n=p[i].name,l=p[i].value,m=p[i].editable,m==1&&(m=l.split(","),
l=m[0],subitem_input_value=m.length>1?decodeURIComponent(m[1]):"",a.find("#"+g+" #input_subitem_"+n).val(subitem_input_value),a.find("#"+g+" #input_subitem_"+n).prop("readonly",j)),a.find("#input_"+g+"[data-id='"+n+"']").prop("checked",l=="true"?!0:!1),a.find("#input_"+g+"[data-id='"+n+"']").prop("disabled",j);else if(i=="combobox"){for(i=0;i<p.length;i++)if(n=p[i].name,l=p[i].value,m=decodeURIComponent(p[i].title),l=="true"){a.find("#input_"+g).val(m);break}a.find("#input_"+g).prop("disabled",j)}else if(i==
"date_between"||i=="datetime_between")a.find("#input_"+g+"_start").prop("disabled",j),a.find("#input_"+g+"_end").prop("disabled",j),n!=""&&(m=n.split(","),a.find("#input_"+g+"_start").val(m[0]),a.find("#input_"+g+"_end").val(m[1]));else if(i=="associated-menu"){for(i=0;i<p.length;i++)n=p[i].name,l=p[i].value,m=p[i].parent,l=="true"&&(l=m=="root_menu"?g:m,a.find("#subitem_input_"+l+" option[data-id='"+n+"']").prop("selected",!0),change_associated_option(g,l));a.find("#"+g+" .user_subitem_input").prop("disabled",
j)}else if(i=="upload"){m="list";if(f[h].upload_setting!="undefined"&&(i=decodeURIComponent(f[h].upload_setting),i=b.parseJSON("["+i+"]"),typeof i[0]!="undefined"&&typeof i[0].listview!=="undefined"))m=i[0].listview;a.find("#input_"+g).prop("data-disable-upload",j);a.find("#list_"+g).empty();if(n!=""){n=parse_json_string(n);for(i=0;n!=null&&i<n.length;i++){var p=(new Date).getTime()*(Math.floor(Math.random()*1E3)+1),v=n[i].file,B=e+"/"+g+"/"+v,l="";l+='<li class="qq-upload-success '+m+'" id="'+p+
'">';l+='<a href="';l+=B;l+='" target="_blank">';if(m=="thumb"){var s=/[.]/.exec(v)?String(/[^.]+$/.exec(v)).toLowerCase():void 0;l+='<div class="fileDiv qq-upload-file"';l+=' id="'+s+'"';l+=' data-uid="'+p+'"';l+=' data-filename="'+v+'"';l+=' title="'+v+'"';l+=">";l+='<span class="fileNameDiv">';l+=v;l+="</span>";if(s=="jpg"||s=="jpeg"||s=="png"||s=="gif")l+='<img class="qq-upload-thumb "',l+=' alt="'+v+'"',l+=' src="'+B+'">';l+="</div>"}else l+='<span class="qq-upload-file" data-uid="'+p+'" data-filename="'+
v+'">',l+=v,l+="</span>";l+="</a>";j||(l+='<a class="qq-upload-remove" href="#" onclick="removeattach('+p+');">\u79fb\u9664</a>');l+="</li>";a.find("#list_"+g).append(l)}}}else if(i=="url"){m=[];if(n!="")try{m=JSON.parse(n)}catch(w){m=[]}a.find("#list_"+g).empty();for(i=0;i<m.length;i++)p=m[i].uid,v=m[i].name,B=m[i].url,l="",l+='<li class="url-field" id="'+p+'">',l+='<a href="',l+=B,l+='" target="_blank">',l+=v,l+="</a>",j||(l+='<a class="qq-url-edit" href="javascript:void(0);" onclick="do_edit_url(\''+
g+"', '"+p+"')\";>\u7de8\u8f2f</a>",l+='<a class="qq-url-remove" href="javascript:void(0);" onclick="do_remove_url(\''+g+"', '"+p+"')\";>\u79fb\u9664</a>"),l+="</li>",a.find("#list_"+g).append(l);a.find("#input_"+g).val(n);j==!0&&a.find("#input_add_url_"+g).addClass("disabled")}else if(i=="table"){i=f[h].table_attr;n=parseInt(i.col);l=parseInt(i.row);m=i.type;if(i.row_type=="dynamic"){v="input_"+g;for(B=2;B<l+1;B++){s="<tr>";for(i=0;i<n;i++){var z="table_pos_"+g+"_"+B+"x"+i;s+="<td>";s+="<input id='"+
z+"' class='fieldInput";m=="number"&&(s+=" numInput");s+="' value=''";s+="</td>"}s+="</tr>";a.find("#"+v+" tr:last").after(s)}a.find("#"+v).prop("data-table_row",l)}if(p!=null)for(i=0;i<p.length;i++)n=p[i].name,m=decodeURIComponent(p[i].title),a.find("#"+n).val(m);a.find("#"+g+" .fieldInput").prop("readonly",j);a.find("#"+g+" .fieldInput").prop("disabled",j)}else i=="general-database"?(i=f[h].show_value,i!=""&&a.find("#input_select_db_data_"+g).text(i),a.find("#input_"+g).val(n),j==!0&&(a.find("#input_select_db_data_"+
g).addClass("disabled"),a.find("#input_delete_db_data_"+g).hide()),n==""&&a.find("#input_delete_db_data_"+g).hide()):i=="reviewer"?(i=f[h].show_value,i!=""&&a.find("#input_select_reviewer_"+g).text(i),a.find("#input_"+g).val(n),j==!0&&a.find("#input_select_reviewer_"+g).addClass("disabled")):i=="multi-string"||i=="text-editor"?(j?(q(g,n),a.find("#input_"+g).before(n)):a.find("#input_"+g).val(n),a.find("#input_"+g).prop("disabled",j),a.find("#input_"+g).prop("readonly",j)):i=="textblock"?(a.find("#input_"+
g).prop("checked",n=="true"?!0:!1),a.find("#input_"+g).prop("disabled",j)):i=="computation"?(j=f[h].computation_attr,typeof j!="undefined"&&parseInt(j.manual_user_input)==1&&b("#chk_enable_manual_input_"+g).prop("checked",!0),b("#"+g).find("#input_"+g).val(n)):a.find("#input_"+g).val(n)}a.find("#latest_update_time").text(o);H=k==1?!0:!1;a.find("#db_step_main").steps("setStep",0);a.find(".user_input").focusout(function(){a.find("#message_box").hide()});a.find(".user_input").keyup(function(){var c=
b(this).attr("maxlength");b(this).attr("data-type");var d=b(this);if(typeof c!="undefined"){var f=d.position().left+50,d=d.position().top-50;log("show message_box left="+f+", top="+d);var g=b(this).val().length;a.find("#message_box").html("\u8f38\u5165\u5b57\u6578 : "+g+" / "+c);a.find("#message_box").css("left",f);a.find("#message_box").css("top",d);a.find("#message_box").show()}H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});a.find(".user_input").change(function(){var c=
b(this).attr("data-id");update_default_value(null,c,x<=0?!0:!1);H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});a.find(".user_input input").change(function(){var c=b(this).attr("data-id");update_default_value(null,c,x<=0?!0:!1);H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});addEnableComputationManualInputEventListener();d&&d(c)}})},y=function(){var c=g_storage.get(o),d=get_api_url("hr.item.display.create"),f=get_user_input_xml_result(a.find(".body")),
g={};g.auth=j;g.token=t?"db_step_access_token":c;g.hid=h;g.data=f;g.template=l;b.ajax({url:d,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(a){alert("\u53d6\u5f97\u8cc7\u6599\u5931\u6557\uff01("+a.status+")")},success:function(b){a.find(".confirm-x #section_confirm #fcontent").html(b.data);a.find(".confirm-x").show()}})},J=function(c){var d=g_storage.get(o),f=get_api_url("hr.item.display.create"),g={};g.auth=j;g.token=t?"db_step_access_token":d;g.hid=h;g.hiid=c;g.template=z;b.ajax({url:f,
data:g,type:"POST",dataType:"json",timeout:2E4,error:function(a){alert("\u53d6\u5f97\u8cc7\u6599\u5931\u6557\uff01("+a.status+")")},success:function(b){a.find(".finish-x #section_finish #fcontent").html(b.data);a.find(".finish-x").show()}})};if(d=="onLoginHandler"){if(!b.isReady)return alert("widget is not ready!"),this;n=typeof i=="undefined"?"":i;log("setToken: "+n+" and start to query person info");g(n,function(){n!=""&&(log(o+" = "+n),g_storage.set(o,n));window.location.reload()});return this}a.find("#db_step_main").steps({headerTag:"h3",
bodyTag:"section",transitionEffect:"fade",autoFocus:!0,enableAllSteps:k,enablePagination:!0,enableSaveTempButton:!0,stepsOrientation:v,labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"\u5b8c\u6210",next:"\u4e0b\u4e00\u6b65",previous:"\u4e0a\u4e00\u6b65",loading:"Loading ...",savetemp:"\u66ab\u5b58"},onStepChanging:function(b,c,d){return c>d?!0:check_user_input(a.find("section.current"))},onStepChanged:function(b,c){I=0;setTimeout(V,1E3);w==c+1&&(H?a.find("a[href='#finish']").parents("li").show():
a.find("a[href='#finish']").parents("li").hide());return!0},onFinishing:function(){return check_user_input(a.find("section.current"))},onFinished:function(){return m==1?(y(),!1):X()},saveTemp:function(){return R()}});a.find("#btn_login_w").click(function(){var a=e+"config/login.php",b=encodeURI("hid="+h),a=a+"?response_type="+(j=="token"?"token":"session")+"&client_id="+u+"&permission_scope=hr&scope=userinfo.get,hr.item.create,hr.items.get,hr.item.set,hr.item.get,hr.reviewer.get,hr.item.display.create,hr.items.related.value.get,hr.permission.get,hr.item.input.data.get,hr.item.update,hr.item.temp.get,hr.item.temp.create,hr.item.temp.update&data="+
b+"&continue="+encodeURIComponent(e+"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+f);window.open(a,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300")});a.find("#btn_logout").click(function(){clearInterval(M);if(j=="token")g_storage.set(o,""),window.location.reload();else{var a=get_api_url("user.logout"),c={};c.auth=j;b.post(a,c,function(){window.location.reload()})}});a.find("#btn_ok_confirm").click(function(){a.find(".confirm-x").hide();X()});a.find("#btn_cancel_confirm").click(function(){a.find(".confirm-x").hide()});
a.find("#btn_close_finish").click(function(){a.find(".finish-x").hide();window.location.reload()});a.find("#data_list").click(function(){K.data("action","").dialog("open")});a.find("#copy_data_list").click(function(){K.data("action","create_copy").dialog("open")});K=a.find("#dialog_data_list").dialog({autoOpen:!1,width:Math.min(b(window).width()-50,800),modal:!0,position:["middle",5],open:function(){var c=b(this).data("action"),d=g_storage.get(o),g=get_api_url("hr.items.get"),e={};e.hid=h;e.pageNum=
0;e.maxRows=10;e.uid=f;e.shown_column=B;e.auth=j;e.token=d;e.field="hr_item_date";e.order="DESC";b.ajax({url:g,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){K.dialog("close")},success:function(f){if(f.length<=0)K.dialog("close");else{var g=f[0].field_array,e="";e+=c=="create_copy"?'<p style="font-size:14px">\u4ee5\u4e0b\u662f\u60a8\u586b\u5beb\u904e\u5171'+(f.length-1)+"\u7b46\u8cc7\u6599\uff0c\u8acb\u9078\u53d6\u8981\u8f09\u5165\u7684\u526f\u672c\u8cc7\u6599:</p>":'<p style="font-size:14px">\u4ee5\u4e0b\u662f\u60a8\u586b\u5beb\u904e\u5171'+
(f.length-1)+"\u7b46\u8cc7\u6599\uff0c\u8acb\u9078\u53d6\u4fee\u6539\u8cc7\u6599\u6216\u95dc\u9589\u8996\u7a97\u586b\u5beb\u65b0\u8cc7\u6599:</p>";e+='<table border="1" cellpadding="5" cellspacing="1" style="width:100%;border-collapse: collapse;">';e+='<tr style="background-color:#ccc">';e+='<td><div style="width:35px">\u9078\u53d6</div></td>';e+="<td>\u7de8\u865f</td>";for(var h=0;h<g.length;h++)e+="<td>"+g[h].title+"</td>";e+="<td>\u5efa\u7acb\u6642\u9593</td>";e+="</tr>";for(h=1;h<f.length;h++)if(g=
f[h].fields,typeof g!="undefined"){e+="<tr";x==f[h].id&&c!="create_copy"&&(e+=' style="background-color:#b0dde7"');e+=">";e+="<td>";e+=x==f[h].id&&c!="create_copy"?"\u5df2\u9078":c=="create_copy"?'<a class="open-copy-data-list" href="javascript:void(0)" data-id="'+f[h].id+'" style="cursor:pointer;color:#0000FF">\u9078\u53d6</a>':'<a class="open-data-list" href="javascript:void(0)" data-id="'+f[h].id+'" style="cursor:pointer;color:#0000FF">\u9078\u53d6</a>';e+="</td>";e+="<td>";e+=f[h].id;e+="</td>";
for(var i=0;i<g.length;i++){e+="<td>";for(var j=0;j<g[i].infos.length;j++)e+=decodeURIComponent(g[i].infos[j].show);e+="</td>"}e+="<td>";e+=f[h].date;e+="</td>";e+="</tr>"}e+="</table>";b("#dialog_data_list").empty();b("#dialog_data_list").html(e);b(".open-data-list").click(function(){p=-1;x=b(this).attr("data-id");Q(d,function(){init_reviewer(d);init_uploader(a.find(".body"));K.dialog("close")})});b(".open-copy-data-list").click(function(){p=b(this).attr("data-id");x=-1;Q(d,function(){init_reviewer(d);
init_uploader(a.find(".body"));K.dialog("close")})})}}})},buttons:{"\u95dc\u9589":function(){K.dialog("close")}},close:function(){}});a.resize(function(){var a=g_storage.get(o);j=="token"&&a==""&&S();V()});a.find("a[href='#savetemp']").parents("li").hide();a.find("#option_log_list").hide();a.find("#option_data_list").hide();attach_num_with_decimalinput_checker("numInput");init_datetime(a.find(".body"));init_text_editor(a.find(".body"),"");init_uploader(a.find(".body"));init_url_setting();g(n,null)}};
b.fn.widget.countdown=function(a,c,d,f){var i=a.find("#countdown_main").attr("data-title"),e=parseInt(a.find("#countdown_main").attr("data-end-year")),g=parseInt(a.find("#countdown_main").attr("data-end-month")),o=parseInt(a.find("#countdown_main").attr("data-end-day")),h=parseInt(a.find("#countdown_main").attr("data-end-hour")),v=parseInt(a.find("#countdown_main").attr("data-end-minute")),t=parseInt(a.find("#countdown_main").attr("data-show-day")),r=parseInt(a.find("#countdown_main").attr("data-show-hour")),
l=parseInt(a.find("#countdown_main").attr("data-show-min")),m=parseInt(a.find("#countdown_main").attr("data-show-sec")),z=0;a.resize(function(){});z=setInterval(function(){var a="&#26178;",c="&#20998;",d="&#31186;",w=new Date(e,g-1,o,h,v,0),k=function(a,b){var c=String(a);if(c)for(;c.length<b;)c="0"+c;return c};today=new Date;myMsec=w.getTime()-today.getTime();time0=Math.floor(myMsec/864E5);myMsec-=time0*864E5;time1=Math.floor(myMsec/36E5);myMsec-=time1*36E5;time2=Math.floor(myMsec/6E4);myMsec-=time2*
6E4;time3=Math.floor(myMsec/1E3);myMsec-=time3*1E3;time4=Math.floor(myMsec/10);var u=time0;"5"==2?a=c=d=time1=time2=time3=time4="":"5"==3?c=d=time2=time3=time4="":"5"==4?d=time3=time4="":"5"==5&&(time4="");time1=k(time1,2);time2=k(time2,2);time3=k(time3,2);time4=k(time4,2);myMsec=today.getTime()-w.getTime();time00=Math.floor(myMsec/864E5);myMsec-=time00*864E5;time01=Math.floor(myMsec/36E5);myMsec-=time01*36E5;time02=Math.floor(myMsec/6E4);myMsec-=time02*6E4;time03=Math.floor(myMsec/1E3);myMsec-=time03*
1E3;time04=Math.floor(myMsec/10);"5"==2?time01=time02=time03=time04="":"5"==3?time02=time03=time04="":"5"==4?time03=time04="":"5"==5&&(time04="");time01=k(time01,2);time02=k(time02,2);time03=k(time03,2);time04=k(time04,2);w=b("."+f+" #counter");w.empty();time0>=0?(k="",k+='<p class="count_display">',k+='<span class="title">'+i+"</span>",t==1&&(k+='<span class="time">'+u+"</span>",k+="&#22825;"),r==1&&(k+='<span class="time">'+time1+"</span>",k+=a),l==1&&(k+='<span class="time">'+time2+"</span>",k+=
c),m==1&&(k+='<span class="time">'+time3+"</span>",k+=d),k+="</p>",w.append(k)):(k(time1,2),w.append('<p class="count_display">'),w.append('<span class="title">'+i+"</span>"),w.append('<span class="time">'+e+"/"+k(g,2)+"/"+k(o,2)+" "+k(h,2)+":"+k(v,2)+"</span>"),w.append("<p>\u5012\u6578\u6642\u9593\u5df2\u7d50\u675f</p>"),w.append("</p>"),clearInterval(z))},10);c.complete!=null&&c.complete(f)};b.fn.widget.text_marqueexx=function(a,c,d,f){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed"));
a.resize(function(){});var e=function(){function c(){s=!s;var a=d.position().top/e,a=(C?a-1+g.length:a+1)%g.length;d.animate({top:a*e},l,function(){a==g.length-1?d.css("top",g.length/2*e-e):a==0&&d.css("top",g.length/2*e);s=!s});m=setTimeout(c,z)}var d=a.find("div#abgne_marquee ul"),f=a.find("div#abgne_marquee");if(!(d.find("li").length<=1)){var g=d.append(d.html()).children(),e=a.find("div#abgne_marquee").height()*-1,l=i,m,z=3E3+l,C=0,s=!1;d.css("top",g.length/2*e);d.css("width",f.width()-60);g.hover(function(){clearTimeout(m)},
function(){m=setTimeout(c,z)});a.find("div#abgne_marquee .marquee_btn").unbind("click");a.find("div#abgne_marquee .marquee_btn").click(function(){s||(clearTimeout(m),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});a.find("div#abgne_marquee .marquee_btn").unbind("keydown");a.find("div#abgne_marquee .marquee_btn").keydown(function(a){a.keyCode==13&&!s&&(clearTimeout(m),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});m=setTimeout(c,z)}},g={};g.uid=f;b.ajax({url:d+"widget/text_marquee/news_query_json.php",
data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d=0;a.find("ul#marquee_ul").empty();for(var g=0;g<b.length;g++){var i=b[g].link,r=b[g].content,l="";b[g].enablelink=="1"?(l="<li><span>",l+='<a href="'+i+'" title="'+r+'" target="_blank" class="b-link tab-ctl-x">'+r+"</a>",l+="</span></li>"):l='<li><span title="'+r+'" class="b-link">'+r+"</span></li>";a.find("ul#marquee_ul").append(l);d++}d<=1&&(a.find("#marquee_next_btn").hide(),
a.find("#marquee_prev_btn").hide());e();c.complete!=null&&c.complete(f)}})};b.fn.widget.text_marquee=function(a,c,d,f){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed"));a.resize(function(){});var e=function(){function c(){s=!s;var a=d.position().top/e,a=(C?a-1:a+1)%g.length,b=a*e;C==1&&a<=0&&(d.children().last().prependTo(d),d.css("top",e),b=0);d.animate({top:b},l,function(){a==g.length-1&&(d.children().last().prependTo(d),d.css("top",0));s=!s});m=setTimeout(c,z)}var d=a.find("div#abgne_marquee ul"),
f=a.find("div#abgne_marquee");d.find("li");var g=d.children(),e=a.find("div#abgne_marquee").height()*-1,l=i,m,z=3E3+l,C=0,s=!1;d.css("top",0);d.css("width",f.width()-60);g.hover(function(){clearTimeout(m)},function(){m=setTimeout(c,z)});window.addEventListener("keydown",function(a){a.key==="Tab"&&clearTimeout(m)});a.find("div#abgne_marquee .marquee_btn").unbind("click");a.find("div#abgne_marquee .marquee_btn").click(function(){s||(clearTimeout(m),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});
a.find("div#abgne_marquee .marquee_btn").unbind("keydown");a.find("div#abgne_marquee .marquee_btn").keydown(function(a){a.keyCode==13&&!s&&(clearTimeout(m),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});m=setTimeout(c,z)},g={};g.uid=f;b.ajax({url:d+"widget/text_marquee/news_query_json.php",data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d=0;a.find("ul#marquee_ul").empty();for(var g=0;g<b.length;g++){var i=b[g].link,r=b[g].content,
l="";b[g].enablelink=="1"?(l="<li><span>",l+='<a href="'+i+'" title="'+r+'" target="_blank" class="b-link tab-ctl-x">'+r+"</a>",l+="</span></li>"):l='<li><span title="'+r+'" class="b-link">'+r+"</span></li>";a.find("ul#marquee_ul").append(l);d++}d<=1&&(a.find("#marquee_next_btn").hide(),a.find("#marquee_prev_btn").hide());e();c.complete!=null&&c.complete(f)}})};b.fn.widget.text_marquee2=function(a,c,d,f){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed")),e=a.find("#abgne_marquee").attr("data-direction");
a.resize(function(){});var g={};g.uid=f;b.ajax({url:d+"widget/text_marquee2/news_query_json.php",data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d="",g=0;d+='<marquee style="width:100%;height:100%;"';d+=' onMouseOver="this.stop()" onMouseOut="this.start()"';d+=' direction="'+e+'"';d+=' scrollamount="'+i+'"';d+=' height="100%">';d+='<div id="marquee_content">';for(var t=g=0;t<b.length;t++){var r=b[t].content;d+="<div>";d+=r;
d+="</div>";g++}d+="</div>";d+="</marquee>";a.find("#abgne_marquee_content").empty();a.find("#abgne_marquee_content").html(d);c.complete!=null&&c.complete(f)}})};b.fn.widget.resource_show=function(a,c,d,f){var i=c.root_path,e=c.action,g=a.find("#resource_show_main").attr("data-album-id"),o=a.find("#resource_show_main").attr("data-shown-column"),h=a.find("#resource_show_main").attr("data-style"),v=a.find("#resource_show_main").attr("data-string-table"),t=null,r=g,l=!!parseInt(a.find("#resource_show_main").attr("data-view")),
m=i;if(h!="")try{t=JSON.parse(decodeURIComponent(h))}catch(z){t=null}if(v!="")try{json_string_table=JSON.parse(decodeURIComponent(v))}catch(C){json_string_table=null}var s=function(b){b=b.attr("hid");a.find("#resource_show_main").attr("data-field",b);b=a.find("#resource_show_main").attr("data-order");a.find("#resource_show_main").attr("data-order",b=="DESC"?"ASC":"DESC");b=a.find("#resource_show_main").attr("data-page-num");u(g,b)},B=function(b){g=b.attr("aid");a.find("#search .input").val("");u(g,
0)},w=function(a){var b=a.attr("file"),a=a.attr("resource_id"),c="";if(a!=void 0&&a>0)c=m+"/openfid.php?id="+a;else if(b!=void 0&&b!="")c=m+"/open.php?file="+b;else return;window.open(c)},k=function(a){a=a.attr("data-page-num");u(g,a)},u=function(g,e){var h=a.find("#resource_show_main").attr("data-query-count"),v=a.find("#resource_show_main").attr("data-field"),j=a.find("#resource_show_main").attr("data-order"),z=a.find("#search .input").val(),u={};u.aid=g;u.field=v;u.order=j;u.pageNum=e;u.maxRows=
h;u.keyword=escape(z);u.queryall=1;u.auth_type="user";u.bid=d;b.ajax({url:i+"widget/resource_integration/resource_query_field.php",data:u,type:"GET",dataType:"json",timeout:2E4,error:function(){},success:function(e){var h=parseInt(e[0].rcode);m=e[0].resource_root_url;if(h==401)a.find("#resource_show_main").attr("data-login-album-id",g),e=i+"config/login.php",h=encodeURI("type=folder,bid="+d+",aid="+g+",resource="+g),e=e+"?response_type=session&permission_scope=resource&data="+h+"&continue="+encodeURIComponent(i+
"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+f),window.open(e,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300");else if(h==200&&(build_resource_view(a.find("#mainRegion"),l,g,r,o,e,json_string_table,B,w,s,k),t!=null))e=t.table_head_color,e!=""&&b("#atb thead tr").css("background-color",e),e=t.table_odd_color,e!=""&&b("#atb tr.odd").css("background-color",e),e=t.table_even_color,e!=""&&b("#atb tr.even").css("background-color",e),e=t.table_font_size,e!=
""&&b("#atb tr.tcontent").css("font-size",e);c.update_tabindex!=null&&c.update_tabindex(f);e=a.find("#search").height()+a.find("#resource_show_main").height()+20;setMainHeight(e)}})};if(e=="onLoginHandler"){if(!b.isReady)return alert("widget is not ready!"),this;g=parseInt(a.find("#resource_show_main").attr("data-login-album-id"));u(g,0);return this}a.find("#resource_show_main").mouseover(function(){b(this).find(".optionDiv").show()});a.find("#resource_show_main").mouseleave(function(){b(this).find(".optionDiv").hide()});
a.find("#search .button").click(function(){u(g,0)});a.find("#search .input").keyup(function(b){var c=a.find("#search .input").val();(b.which==13||b.which!=9&&c=="")&&u(g,0)});b.contextMenu({selector:"#resource_show_main .optionDiv",trigger:"left",callback:function(a){a=="thumbView"?(l=0,u(g,0)):a=="listView"&&(l=1,u(g,0))},items:{thumbView:{name:"\u7e2e\u5716\u6a21\u5f0f",icon:"thumb",disabled:function(){return l==1?!1:!0}},listView:{name:"\u5217\u8868\u6a21\u5f0f",icon:"list",disabled:function(){return l==
0?!1:!0}}}});u(g,0)};b.fn.widget.floating_icon=function(a){var b=a.find("li"),d=b.length,f=0;b.hide();a.find("#icon_"+f).show();a.resize(function(){});(function(){setInterval(function(){f>d-1&&(f=0);b.hide();a.find("#icon_"+f).show();f++},3E3)})()}})(jQuery);var g_default_active_class_id="",g_window_width=0,g_rtime,g_timeout=!1,g_delta=200,g_count=0,g_storage=new myStorage,g_prev_hash_value="",g_hash_value="",g_pre_div_news_table_main_width=0,g_token="";
function loadembedpage(b,a,c,d){b="#"+b;a="#"+a;if($(".pagecontent").length){display_site_embed_pages();var b=$(b).find(a),b=b.find("div"),a=b.width(),d=Math.max($("#site_embed_pages").height(),600),f=c.indexOf("?");c+=f==-1?"?fw="+a:"&fw="+a;c+="&fh="+d;c=c.replace("page_map_main.php","page_map_main_v2.php");$.ajax({url:c,type:"post",dataType:"html",data:"",timeout:2E4,error:function(){alert("Fail to load content!")},success:function(a){$(".pagecontent").html(a)}})}else d==1&&$(b).children().css("display",
"none"),b=$(b).find(a),b.css("display","block"),b=b.find("iframe"),a=b.width(),d=b.height(),f=c.indexOf("?"),c+=f==-1?"?fw="+a:"&fw="+a,c+="&fh="+d,b.attr("src",c)}var Browser={Version:function(){var b=999;navigator.appVersion.indexOf("MSIE")!=-1&&(b=parseFloat(navigator.appVersion.split("MSIE")[1]));return b}};function setMainWidth(){$("#site_embed_pages").css("width","100%")}
function setMainHeight(b){var a=parseInt($(".sites-subpages-map").height());isNaN(a)||(b+=a);a=parseInt($(".contentArea").css("padding-top"));isNaN(a)||(b+=a);$("#site_embed_pages").css("height",b);log("site_embed_pages_height="+b);$("#center-content").children("#main").css("height",b)}
function setWidgetHeight(b,a){if($("."+b).is(":visible")&&($("."+b).css("height",a),$("."+b).closest(".sites-subpages-map").length>0)){var c=a+$(".sites-subpages-map").height()+10;$("#site_embed_pages").css("height",c);$("#site_embed_pages #iFrm").length>0&&$("#site_embed_pages #iFrm").css("height",c)}}
function setWidgetHeight(b,a){if(typeof b.is!="undefined"&&b.is(":visible")&&(b.css("height",a),b.closest(".sites-subpages-map").length>0)){var c=a+$(".sites-subpages-map").height()+10;$("#site_embed_pages").css("height",c);$("#site_embed_pages #iFrm").length>0&&$("#site_embed_pages #iFrm").css("height",c)}}
function adjustSectionSize(b){log("adjustSectionSize...");var a=$("#center-content"),c=a.children("#main");g_window_width=$(window).width();var d=$(".widget-top-x").length,f=d-1,i=function(){var a=0;$(".widget-top-x").each(function(){a+=$(this).height()});return a},e=i();e>$(window).height()/2&&(e=$(window).height()/4/d,$(".widget-top-x").css("max-height",e),$(".widget-top-x").find(".widget-x").css("max-height",e),e=i());(function(){var a=0;$(".widget-top-x").each(function(){$(this).css("top",a);
a+=$(this).height()})})();(function(){$(".widget-top-x").each(function(a){$(this).css("z-index",120);f>a&&$(this).css("box-shadow","none")})})();d>0&&$("#container").css("top",e);is_rwd_page()?(adjust_rwd_container_layout(),$(".s1").css("width","100%"),$(".s1").css("height","auto"),$(".s1").css("overflow-y","hidden"),b&&(d=c.height(),$("#site_embed_pages").attr("data-ini-height",d),b())):setTimeout(function(){var d=[],f=[];$(".s1").each(function(){for(var a=$(this).parent().attr("id"),b=!1,c=0;c<
d.length;c++)if(d[c]==a){b=!0;break}$(this).width()>0&&(b==!1&&(d.push(a),f[a]=0),f[a]++)});for(var e=0;e<d.length;e++){var i=d[e];if(!(f[i]<=1)){var t=0;$("#"+i+" .s1").each(function(){var a=0,b=$(this).attr("id");$(this).children().each(function(){var c=$(this).attr("class");if(c!=void 0&&$(this).css("display")=="block"&&$(this).attr("id")!="popup"){var d=parseInt($(this).css("padding-top")),f=parseInt($(this).css("padding-bottom")),d=$(this).height()+d+f;a+=d;log(b+" > class_name="+c+"'s height="+
d)}});t=Math.max(t,a)});log(i+"'s height="+t);$("#"+i+" .s1").css("height",t)}}$(".s3").each(function(){var a=$(this).parent();if(a){var b=a.height();$(this).prevAll("div").each(function(){b-=$(this).height()});$(this).css("height",b)}});e=parseFloat($("#container").css("width"));i=parseFloat($("#container").parent().css("width"));if(100*e/i+"%"=="100%"){var r=a.width();a.children(".s1").each(function(){$(this).attr("id")!="main"&&(r-=$(this).width())});e=parseInt(c.css("border-left"));e>0&&(r-=e);
c.animate({width:r},50,function(){})}b&&(e=c.height(),$("#site_embed_pages").attr("data-ini-height",e),b())},200)}
function xxadjustWidgetSize(){$(".widget-x").each(function(){if($(this).attr("id")=="xheader"){$(this).attr("class");var b=parseInt($(this).find("#header_pic").attr("data-widget-height")),a=parseInt($(this).find("#header_pic").attr("data-image-width")),c=a,d=b;$(this).width()<a?(c=$(this).width(),d=c*(b/a),$(this).find("#header_pic").css("background-size",c),$(this).css("height",d)):($(this).find("#header_pic").css("background-size","auto"),$(this).css("height",b))}})}
function log(b){console.log&&g_debug=="1"&&console.log(new Date+": "+b)}function decode_uri_string(b){if(b=="")return log("decode_uri_string input string is empty."),"";var a="";try{a=decodeURIComponent(b)}catch(c){log("decode_uri_string fail ["+b+"]"),a=b}return a}function parse_json_string(b){if(b=="")return log("parse_json_string input string is empty."),"";var a=null;try{a=$.parseJSON(b)}catch(c){return log("parse_json_string fail ["+b+"]"),null}return a}
function load_Site_News_Tab_Content(b,a){var c="";c+="uid="+a;c+="&nid="+b;$.ajax({url:"../../widget/site_news_tab/news_query_content.php",data:c,type:"GET",dataType:"xml",timeout:2E4,error:function(){},success:function(a){$(window).width();$(window).height();var b="";b+="<div class='bd'>";$("entry",a).each(function(){var a=$(this).find("content").text();b+=a});b+="</div>";close_popup_content();setTimeout(function(){popup_content("html","940px",b,"yes")},300)}})}
function close_popup_content(){$(".popup").bPopup().close()}
function popup_content(b,a,c,d){$(".popup .content").empty();var f,i;if(is_rwd_page()||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&screen.width<g_rwd_device_width)if(b=="url"){window.location=c;return}else $(".popup").addClass("mobile_popup"),f=$(window).width()-10,i=$(window).height()-50;else $(".popup").removeClass("mobile_popup"),f=$(window).width()-100,i=$(window).height()-100;a=parseInt(a);a=a>f?f:a;f=i;b=="url"?($(".popup").css("width",a),$(".popup").css("height",
f),$(".popup").bPopup({content:"iframe",contentContainer:".popup .content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=$(this).find("iframe");a.css("width",$(this).width()+"px");a.css("height",$(this).height()+"px");a.css("background","url()");a.attr("title","\u6d88\u606f\u5167\u5bb9");a.attr("scrolling",d);$(".popup iframe").focus()}},function(){})):(b=$(window).scrollTop()+20,$(c).appendTo($(".popup .content")),$(".popup").css("width",a),$(".popup").css("height",
"auto"),$(".popup").bPopup({follow:[!1,!1],position:["auto",b]}));updateGoogleLanguage();start_auto_close_floating_window()}var gIframeContentResizeFunc=void 0;function callIframeContentResizeFunc(b,a){typeof gIframeContentResizeFunc!="undefined"&&gIframeContentResizeFunc(b,a)}function getUrlVars(){for(var b=[],a,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}
function getParameterByName(b,a){if(!a)a=window.location.href;var b=b.replace(/[\[\]]/g,"\\$&"),c=RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)").exec(a);return!c?"":!c[2]?"":decodeURIComponent(c[2].replace(/\+/g," "))}function process_hash_value(){g_hash_value=window.location.hash.toLowerCase()}function getUrlParameter(b){var a=decodeURIComponent(window.location.search.substring(1)).split("&"),c,d;for(d=0;d<a.length;d++)if(c=a[d].split("="),c[0]===b)return c[1]===void 0?!0:c[1]}
function process_url_param(){var b=getUrlParameter("cid"),a=getUrlParameter("nid"),c=getUrlParameter("hiid"),d="";isNaN(b)?isNaN(c)?g_home_class_id!=""&&!isNaN(g_home_class_id)?(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?id="+g_home_class_id,g_default_active_class_id=g_home_class_id):isNaN(a)||(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?nid="+a):(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?hiid="+c):(d=g_root_path+"widget/main_menu/page_map_main_v2.php",
d+="?id="+b,g_default_active_class_id=b);return d!=""?(load_site_embed_pages_content(),!0):!1}function resizeend(){new Date-g_rtime<g_delta?setTimeout(resizeend,g_delta):(g_timeout=!1,g_window_width!=$(window).width()&&adjustSectionSize())}function isBrowser(b){return navigator.userAgent.toLowerCase().indexOf(b)!=-1?1:0}function logout(){$.ajax({url:"../../config/logout_m.php?continue=../publish_page/"+g_bid,error:function(){},success:function(){}})}
function is_mobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1}
function is_rwd_page(){if(g_rwd==1){var b=Math.round(window.devicePixelRatio*100);log("browserZoomLevel="+b+", container.width()="+$("#container").width()+", window.width()="+$(window).width());if(screen.width<g_rwd_device_width)return!0;else if($(window).width()<g_rwd_device_width)return!0;else if(g_web_accessibility==1&&b>200&&$("#container").width()>=$(window).width())return!0}return!1}
function show_mobile_nav_bar(b){b=$("."+b+" #mobile_main_menu_content2");b.hasClass("menu-silder")?b.hasClass("menu-unactive")?(b.addClass("menu-active"),b.removeClass("menu-unactive")):b.hasClass("menu-active")&&(b.addClass("menu-unactive"),b.removeClass("menu-active")):b.is(":visible")?b.hide():b.show()}function change_doc_title(){}
function load_site_embed_pages_content(){$("#site_embed_pages").resize(function(){var a=$("#site_embed_pages").width();$("#site_embed_pages").height();g_pre_div_news_table_main_width!=a&&(g_pre_div_news_table_main_width=a,adjust_site_embed_pages_size())});display_site_embed_pages();var b=$("meta[itemprop=name]").attr("content");change_doc_title(b+" | "+$(".l_map").text());$('#site_embed_pages a[href^="#"]').bind("click.smoothscroll",function(a){var b=$(this).attr("id");if(!(b!=void 0&&(b.indexOf("C-")==
0||b.indexOf("tab_header")==0))){a.preventDefault();var c=this.hash,a=$(".contentArea "+c);a.length>0?$("html, body").stop().animate({scrollTop:a.offset().top-40},900,"swing",function(){window.location.hash=c}):log("\u7db2\u9801\u9328\u9ede["+c+"]\u4e0d\u5b58\u5728")}});$(".reduced-menu-ctl-x").click(function(){var a=$(this).attr("data-title");$(this).hasClass("reduced-menu-open-x")?($(".reduced-menu-data-x").hide(),$(this).removeClass("reduced-menu-open-x"),$(this).attr("title",a+"(\u9ede\u64ca\u958b\u555f)")):
($(".reduced-menu-data-x").hide(),$(".reduced-menu-open-x").removeClass("reduced-menu-open-x"),$(this).addClass("reduced-menu-open-x"),$(this).parent().siblings("#reduced_menu_content").show(),$(this).attr("title",a+"(\u9ede\u64ca\u95dc\u9589)"));adjust_site_embed_pages_size()});var a=0,c=$("#site_embed_pages img").length;$("#site_embed_pages img").on("load",function(){a++;a==c&&adjust_site_embed_pages_size()});adjust_site_embed_pages_size()}
function display_site_embed_pages(){is_rwd_page()&&($(".mobile-main-menu-content").hasClass("menu-silder")||$(".mobile-main-menu-content").hide(),$(".menubar").hide());var b=$("#center-content").height();$("#site_embed_pages").attr("data-ini-height")!=void 0&&(b=parseInt($("#site_embed_pages").attr("data-ini-height")));var a=$(".s1").height(),b=Math.max(b,a)-5;b<=0&&(b=600);$("#site_embed_pages").css("height",b);$("#center-content").children("#main").children(".widget-x").hide();$("#site_embed_pages").show();
$("#page_main_content").show()}
function adjust_site_embed_pages_size(){var b=$("#site_embed_pages").find("#div_news_table_main"),a=$("#site_embed_pages").width();is_rwd_page()&&(a=$(window).width());var c=parseInt(b.css("margin-left"));isNaN(c)||(a-=c);c=parseInt(b.css("margin-right"));isNaN(c)||(a-=c);b.css("width",a);$("#site_embed_pages").find("#div_news_table_1_topbanner_center").css("width",a-4);c=0;if($(".menubar").length>0&&$(".menubar").is(":visible")){var c=$(".menubar").width()+1,d=parseInt($(".menubar").css("margin-left"));isNaN(d)||
(c+=d);d=parseInt($(".menubar").css("margin-right"));isNaN(d)||(c+=d)}d=parseInt($("#page_main_content").css("padding-left"));isNaN(d)||(a-=d);d=parseInt($("#page_main_content").css("padding-right"));isNaN(d)||(a-=d);a-=c;$(".contentArea").css("width",a);$(".sites-subpages").css("width",a);setMainWidth(a);c=parseInt(b.css("margin-top"));a=parseInt(b.css("margin-bottom"));b=b.height()+c+a;setMainHeight(b)}
function on_load_site_embed_pages_iFrm_complete(b){document.getElementById("iFrm");b!=void 0&&($("#iFrm").css("height",b),$("#iFrm").css("min-height",b),adjust_site_embed_pages_size(),adjustSectionSize())}function onGetWidgetToken(b,a){g_token=b;$(".widget-x").each(function(){$(this).attr("class").indexOf(a)!=-1&&$(this).widget({action:"onLoginHandler",root_path:g_root_path},b)})}
function onWidgetLoginSuccess(b,a){$(".widget-x").each(function(){$(this).attr("class").indexOf(a)!=-1&&$(this).widget({action:"onLoginHandler",root_path:g_root_path},b)})}
$(document).ready(function(){if(g_disable_right_menu)document.oncontextmenu=function(){return!1};var b=g_storage.get("board-fontsize"),a=getParameterByName("fontsize");a!=""&&(b=a);b=="medium"?$("#layout").css("font-size","1.1em"):b=="large"&&$("#layout").css("font-size","1.2em");g_storage.set("board-fontsize",b);process_hash_value();process_url_param();g_count=0;var c=$(".widget-x").length;log("widget_x_count = "+c);$(".widget-x").each(function(){$(this).css("visibility","visible");$(this).widget({action:"",
root_path:g_root_path,complete:function(a){g_count++;log("g_count = "+g_count+"/"+c+" : "+a);adjustSectionSize();$("a").each(function(){$(this).addClass("tab-ctl-x")})},update_tabindex:function(){$(".tab-ctl-x").each(function(){$(this).attr("tabindex",0)})}})});is_rwd_page()&&adjust_rwd_container_layout();load_data();$("#gotop").keyup(function(a){a.which==13&&jQuery("html,body").animate({scrollTop:0},500)});$("#gotop").click(function(){jQuery("html,body").animate({scrollTop:0},500)});$("#Accesskey_C").length>
0?$("#gotocenter").focus(function(){$(this).animate({left:"10",top:"0"},"fast","linear",function(){})}).focusout(function(){$(this).animate({left:"10",top:"-999"},"fast","linear",function(){})}):$("#gotocenter").hide();$(window).scroll(function(){$(this).scrollTop()>300?$("#gotop").fadeIn("fast"):$("#gotop").fadeOut("fast")});$(window).resize(function(){g_rtime=new Date;g_timeout===!1&&(g_timeout=!0,setTimeout(resizeend,g_delta))});$(".contentArea").resize(function(){adjust_site_embed_pages_size()});
$(document).click(function(){});$(document).mousemove(function(){start_auto_close_floating_window()});$("#class_password_input #password_submit").click(function(){var a=$(this).attr("data-cid"),b=$(this).attr("data-uid"),c=$("#class_password_input #password_input").val(),e={};e.uid=b;e.cid=a;e.pwd=c;$.ajax({url:"../../widget/main_menu/password_input.php",type:"post",dataType:"text",data:e,timeout:2E4,error:function(){alert("\u9a57\u8b49\u5931\u6557\uff01")},success:function(a){a==200?window.location.reload():
alert("\u9a57\u8b49\u5931\u6557\uff01")}})});setTimeout(function(){var a=getUrlParameter("cid");typeof a=="undefined"||a==""||(a=Math.max($("#center-content").position().top,0),a>$(window).height()*0.7&&!isNaN(g_default_active_class_id)&&!g_disable_mainmenu_auto_scroll&&(log("html, body scrollTop: "+a),jQuery("html,body").animate({scrollTop:a},200)))},500);if(g_person_id>0&&g_person_name!=""){b=window.location.href;if(b.indexOf("%27")!=-1||b.indexOf("%22")!=-1)b=b.substring(0,b.indexOf("?"));a="Hi! "+
g_person_name;g_debug==1&&(a+="("+g_person_id+", "+g_person_level+")");a+="<a href='"+g_root_path+"config/logout_m.php?continue="+b+"'>\u767b\u51fa</a>";$("#login_info").empty();$("#login_info").append(a);$("#login_info").show()}});
function start_auto_close_floating_window(){g_enable_auto_close_floating_window&&g_auto_close_floating_window_time>0&&(clearTimeout(g_auto_close_floating_window_timer),g_auto_close_floating_window_timer=null,g_auto_close_floating_window_timer=setTimeout(function(){close_popup_content()},g_auto_close_floating_window_time*1E3),log("reset timer"))}
function onYouTubeIframeAPIReady(){$(".widget-x").each(function(){$(this).attr("id")=="youtube"&&$(this).widget({action:"onYouTubeIframeAPIReady",root_path:g_root_path})})}function adjust_rwd_container_layout(){$("#container").css("width","auto");$("#container").css("overflow-x","hidden");$("#container").css("overflow-y","hidden")}function open_floating_window_handler(b){b=b.href;typeof b!="undefined"&&b!=""&&(close_popup_content(),popup_content("url",$(window).width(),b,"yes"))}
function updateGoogleLanguage(){typeof updateLanguage!="undefined"&&setTimeout(function(){updateLanguage()},1E3)};

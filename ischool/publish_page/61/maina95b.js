var accessToken="";(function(b){b.fn.widget=function(a,c){return this.each(function(){var d=jQuery(this).attr("id"),e=String(jQuery(this).attr("class")).split(" ")[0],i=b(this);if(jQuery(this).is(":visible")&&e.indexOf("WID")!=-1){var f=e.split("_");if(f.length==4&&(f=parseInt(f[1]),!isNaN(f))){var g=b.fn.widget[d];b.isFunction(g)?g(i,a,f,e,c):(a.complete!=null&&a.complete(e),log("Not implement widget: "+d))}}})}})(jQuery);function get_api_url(b){return g_api_url+b}
function generate_nav_bar(b,a){var c="";c+='<div class="navDiv">';b>0?(c+='<a class="nav-load-x" data-page="0">|&lt;</a>',c+='<a class="nav-load-x" data-page="'+(b-1)+'">&lt;&lt;</a>'):c+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';for(var d=!1,e=0;e<a;e++)e==b?(c+='<span class="select">'+(e+1)+"</span>",d=!1):Math.abs(e-b)>2&&e!=a-1&&e!=0&&a>10?d==!1&&(c+="<span>...</span>",d=!0):c+='<a class="nav-load-x" data-page="'+e+'">'+(e+1)+"</a>";b<a-1?(c+='<a class="nav-load-x" data-page="'+
(b+1)+'">&gt;&gt;</a>',c+='<a class="nav-load-x" data-page="'+(a-1)+'">&gt;|</a>'):c+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';c+="</div>";return c}
(function(b){b.fn.widget.header=function(a,c,d,e){a.resize(function(){var a=parseInt(b(this).find("#header_pic").attr("data-widget-height"));b(this).attr("class");var c=parseInt(b(this).find("#header_pic").attr("data-image-width")),e,d=a;b(this).width()<c&&g_rwd==1?(e=b(this).width(),d=e*(a/c),b(this).height()<d&&(d=b(this).height(),e=d*(c/a)),b(this).find("#header_pic").css("background-size",e+"px "+d+"px"),b(this).css("height",d)):b(this).height()<d&&g_rwd==1?(d=b(this).height(),e=d*(c/a),b(this).width()<
e&&(e=b(this).width(),d=e*(a/c)),b(this).find("#header_pic").css("background-size",e+"px "+d+"px"),b(this).css("height",d)):(b(this).find("#header_pic").css("background-size","auto"),b(this).css("height",a))});c.complete!=null&&c.complete(e)};b.fn.widget.carousel=function(a,c,d,e){var i=c.root_path,f=a.find(".pics").attr("data-widget-width"),g=a.find(".pics").attr("data-widget-height"),f=parseInt(a.find(".pics").attr("data-auto-adj-with-screen")),m=parseInt(a.find(".pics").attr("data-auto-browse")),
h=g/2,d="uid="+e,q=function(a,c,e,d,h){var g=c="",f="";d==1||d==3?(c="."+a+" #prev1",g="."+a+" #next1"):d==2&&(f="."+a+" #nav");b("."+a+" .pics").cycle({fx:e,speed:1E3,delay:1E3,before:function(c,e){m!=0&&e!=void 0&&(b("."+a+" #"+e.id).css("left","0px"),b("."+a+" #"+e.id).css("top","0px"))},after:function(c,e){if(m!=0&&e!=void 0){var d=e.cycleW,g=e.cycleH,f=b("."+a).width(),D=b("."+a).height();g>D&&(g=D-g,b("."+a+" #"+e.id).animate({top:g},h));d>f&&(g=f-d,b("."+a+" #"+e.id).animate({left:g},h))}},
prev:c,next:g,pager:f,timeout:h,skipInitializationCallbacks:!0})},o=1;f==1&&(f=screen.width-17,is_rwd_page()&&(g=h),o=parseFloat(g/f));b.ajax({url:i+"widget/carousel/news_query_json_field.php",data:d,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading carousel json data")},success:function(d){for(var f=a.width(),r=Math.min(f*o,g),A=0,C=d[0].effect,w=d[0].navtype,y=d[0].playinterval,u=!!parseInt(d[0].autofit),j=1;j<d.length;j++){var z=i+"resources/"+e+"/"+d[j].image,p=d[j].title,
L=d[j].link_to,D=!!parseInt(d[j].showtitle),G=!!parseInt(d[j].enablelink),n=d[j].target,B=parseInt(d[j].img_width),k=parseInt(d[j].img_height),x='<div id="slide_'+A+'" class="inner"';x+=' style="width:'+f+"px;height:"+r+'px"';x+=' data-image-width="'+B+'" data-image-height="'+k+'">';G&&(x+='<a href="'+L+'" target="'+n+'">');x+='<img src="'+z+'"';D&&(x+=' title="'+p+'"');x+=' alt="'+p+'"';x+=' border="0">';x+='<div class="image-mask">';x+="</div>";D&&(x+='<div class="b-link">',x+='<div class="b-title">'+
p+"</div>",x+="</div>");G&&(x+="</a>");x+="</div>";b("."+e+" .pics").append(x);A++}q(e,u,C,w,y);a.resize(function(){var a=b(this),c=b(this).width(),n=Math.min(Math.max(c*o,h),g),d=-1;b(this).find(".inner").each(function(){var a=b(this).attr("data-image-width"),e=b(this).attr("data-image-height"),h=a,k=e;u?(h=c,k=h*(e/a)):(k=n,h=k*(a/e));b(this).css("width",u?h:c);b(this).css("height",k);a=c>h?(c-h)/2:0;b(this).find("img").css("left",a);b(this).find("img").css("width",h);b(this).find("img").css("height",
k);m==0&&b(this).find(".b-link").css("bottom",k-n);d=Math.max(d,k)});d!=-1&&a.css("height",Math.min(n,d));b("."+e+" .pics").cycle("resize")});w==3?(a.find(".nav-arrow-type").focus(function(){b("."+e+" .pics").cycle("pause")}),a.find(".nav-arrow-type").blur(function(){b("."+e+" .pics").cycle("resume")})):(a.find("#nav a").focus(function(){b("."+e+" .pics").cycle("pause");var a=parseInt(b(this).attr("title"))-1;b("."+e+" .pics").cycle(a)}),a.find("#nav a").blur(function(){b("."+e+" .pics").cycle("resume")}),
a.find("#nav a").keyup(function(c){var c=c.which,e=parseInt(b(this).attr("title"))-1;c==13&&e>=0&&(c=a.find("#slide_"+e+" a").attr("href"),typeof c!="undefined"&&c!=""&&window.open(c))}));c.complete!=null&&c.complete(e)}});a.unbind("mouseover");a.mouseover(function(){b("."+e+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.7},200)});a.find(".nav-arrow-type").unbind("focus");a.find(".nav-arrow-type").focus(function(){b("."+e+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.7},
200)});a.find(".nav-arrow-type").unbind("blur");a.find(".nav-arrow-type").blur(function(){b("."+e+" .pics").cycle("pause");a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.unbind("mouseleave");a.mouseleave(function(){b("."+e+" .pics").cycle("resume");a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.find(".nav-arrow-type").animate({opacity:0.3},200)};b.fn.widget.main_menu=function(a,c,d,e){b("#site_embed_pages").height();var i=parseInt(a.find("#main_menu_x").attr("data-widget-depth")),
d=parseInt(a.find("#main_menu_x").attr("data-widget-submenu-expand-mode")),f=function(){g_rwd!=0&&(is_rwd_page()?(a.find(".main-menu-content").hide(),a.find(".nav-trigger").show()):(a.find(".main-menu-content").show(),b(".nav-trigger").hide()))},g=function(b){b.next("ul").length>0&&(a.find(".submenu").hide(),b.next().is(":visible")?b.html(b.html()).next().hide():b.html(b.html()).next().show(),adjustSectionSize())};i>1&&(d==0?a.find(".main_nav a").click(function(){g(b(this))}):(a.find(".main_nav a").mouseenter(function(){g(b(this))}),
a.mouseleave(function(){a.find(".submenu").hide()})));f();a.find(".nav-trigger").unbind("click");a.find(".nav-trigger").click(function(){show_mobile_nav_bar(e)});a.find(".main_nav a").unbind("keydown");a.find(".main_nav a").keydown(function(a){if(a.keyCode==9)return i>1&&g(b(this)),!0});a.resize(function(){f()});if(g_default_active_class_id>0){var m="C-"+g_default_active_class_id;a.find(".main_nav a").each(function(){var c=b(this);if(c.attr("id")==m)return a.find(".active").removeClass("active"),
c.toggleClass("active"),!0;c.next("ul").find("a").each(function(){b(this).attr("id")==m&&(a.find(".submenu").hide(),c.next().is(":visible")?c.html(c.html()).next().hide():c.html(c.html()).next().show(),a.find(".active").removeClass("active"),b(this).toggleClass("active"))})})}c.complete!=null&&c.complete(e)};b.fn.widget.main_menu2=function(a,c,d,e){var i=a.find("#main_menu_content2").attr("data-widget-mouseover-audio"),f=parseInt(a.find("#main_menu_content2").attr("data-widget-average-menu")),g=parseInt(a.find("ul.navigation>li a").css("width")),
m=parseInt(a.find("#main_menu_content2").attr("data-widget-auto-flip-submenu")),h="",q=0,o=function(){var c=parseInt(a.find("ul.navigation > li > a").css("padding-left"))+parseInt(a.find("ul.navigation > li > a").css("padding-right"));navigator.userAgent.indexOf("Firefox")!==-1&&(c=0);if(f==1){var d=parseInt(a.find("ul.navigation").css("padding-left"))*2,c=(a.width()-d)/a.find("ul.navigation>li").length-c;a.find("ul.navigation ul a").css("width",Math.max(c,200));a.find("ul.navigation>li>a").css("width",
c);navigator.userAgent.indexOf("Firefox")!==-1&&a.find("ul.navigation>li>a").last().css("width",Math.floor(c))}else f!=2&&(c=g-c,a.find("ul.navigation ul a").css("width",Math.max(c,200)),a.find("ul.navigation>li>a").css("width",c),navigator.userAgent.indexOf("Firefox")!==-1&&a.find("ul.navigation>li>a").last().css("width",Math.floor(c)));is_rwd_page()?(a.css("height","auto"),a.find(".main-menu-content").hide(),a.find(".nav-trigger").show(),c=b("."+e+" #mobile_main_menu_content2"),c.hasClass("menu-silder")&&
c.show()):(a.find(".main-menu-content").show(),a.find(".nav-trigger").hide(),a.find(".mobile-main-menu-content").hide())},t=function(){a.find("ul.navigation>li ul").hide()},l=function(a,b){var c=b.children("ul"),d=a.pageX,g=b.attr("data-level"),f=0,j=-1,f=-1;h=c.attr("id");typeof h!="undefined"&&(f=c.attr("data-ul-level"),j=c.width(),f*=j);c.css("display","table");if(g>2){var g=!1,o=c.parents("li[data-level=2]");m==1&&(o.hasClass("flip-submenu-x")?g=!0:j>0&&d+f>document.body.clientWidth&&(g=!0,o.addClass("flip-submenu-x")));
g?c.css("left","-100%"):c.css("left","100%");c.css("top","0")}i!=""&&createsoundbite(e+"/"+i).playclip()};a.find("ul.navigation > li:has(ul) > a").append("<div class='arrow-bottom'></div>");a.find("ul.navigation > li ul li:has(ul) > a").append("<div class='arrow-right'></div>");a.find("ul.navigation").unbind("mouseleave");a.find("ul.navigation").mouseleave(function(){t(b(this));a.css("z-index",10)});a.find("ul.navigation li").unbind("mouseover");a.find("ul.navigation li").mouseover(function(c){l(c,
b(this));a.css("z-index",99);a.find("ul").css("z-index",99)});a.find("ul.navigation li").unbind("mouseleave");a.find("ul.navigation li").mouseleave(function(){t(b(this));a.css("z-index",10);a.find("ul").css("z-index",10)});a.find("ul.navigation ul a").unbind("click");a.find("ul.navigation ul a").click(function(){b(this).find("ul.navigation li ul").hide()});a.find("ul.navigation li a").unbind("click");a.find("ul.navigation li a").click(function(){a.find(".active").removeClass("active");b(this).closest(".navigation>li").children("a").toggleClass("active")});
a.find("#close_mobile_main_menu_content2").unbind("click");a.find("#close_mobile_main_menu_content2").click(function(){show_mobile_nav_bar(e)});a.find(".nav-trigger").unbind("click");a.find(".nav-trigger").click(function(){show_mobile_nav_bar(e)});a.find("ul.navigation li").unbind("keyup");a.find("ul.navigation li").keyup(function(c){if(c.keyCode==9){var e=b(this).parent("ul").attr("data-ul-level");e==1?t(b(this)):e<q&&a.find("ul[data-ul-level="+q+"]").hide();l(c,b(this));a.css("z-index",99);a.find("ul").css("z-index",
10);log("key up on menu. currentULevel="+e+", prevULevel="+q);q=b(this).parent("ul").attr("data-ul-level");return!1}return!0});a.find("ul.navigation li[data-level=2]").last().find("li").last().unbind("focusout");a.find("ul.navigation li[data-level=2]").last().find("li").last().focusout(function(){t(b(this))});a.resize(function(){o()});a.find(".mobile-main-menu-content > li:has(ul) > a").append("<div class='mobile-arrow-bottom'></div>");a.find(".mobile-main-menu-content .mobile-arrow-bottom").unbind("click");
a.find(".mobile-main-menu-content .mobile-arrow-bottom").click(function(){$el=b(this).parents("li").find("ul");$el.css("display")!=="none"?$el.hide():$el.show();return!1});g_default_active_class_id!=""&&a.find("#C-"+g_default_active_class_id).toggleClass("active");o();c.complete!=null&&c.complete(e)};b.fn.widget.quick_link=function(a,c,d,e){var i=c.root_path,f=parseInt(a.find("#adshow").css("border-width")),g=parseInt(a.find("#quick_link_main").attr("data-widget-size-type")),m=parseInt(a.find("#quick_link_main").attr("data-widget-nav-type"));
parseInt(a.find("#quick_link_main").attr("data-widget-enable-carousel"));var h=parseInt(a.find("#quick_link_main").attr("data-enable-rwd-auto-fit-width")),q=parseInt(a.find("#quick_link_main").attr("data-widget-show-count")),o=parseInt(a.find("#quick_link_main").attr("data-widget-play-interval")),t=parseInt(a.find("#quick_link_main").attr("data-image-show-width")),l=parseInt(a.find("#quick_link_main").attr("data-image-show-height")),r=parseInt(a.find("#quick_link_main").attr("data-margin-size")),
A=decodeURIComponent(a.find("#quick_link_main").attr("data-string-table")),C=null,w=a.find("#quick_link_main").css("max-width"),y=0,u=!1,j=function(a,b){var c="";c+='<div class="navDivGF">';a>0?(c+='<a class="nav-load-x" data-page="0">|&lt;</a>',c+='<a class="nav-load-x" data-page="'+(a-1)+'">&lt;&lt;</a>'):c+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';for(var e=!1,n=0;n<b;n++)n==a?(c+='<span class="select">'+(n+1)+"</span>",e=!1):Math.abs(n-a)>2&&n!=b-1&&n!=0&&b>10?
e==!1&&(c+="<span>...</span>",e=!0):c+='<a class="nav-load-x" data-page="'+n+'">'+(n+1)+"</a>";a<b-1?(c+='<a class="nav-load-x" data-page="'+(a+1)+'">&gt;&gt;</a>',c+='<a class="nav-load-x" data-page="'+(b-1)+'">&gt;|</a>'):c+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';c+="</div>";return c},z=function(c){var d=t;h==1&&is_rwd_page()&&(d=b(window).width()-f*2,y=1);var D={};D.uid=e;D.maxRows=q;D.pageNum=c;D.w=d;D.h=l;D.fit_width=y;b.ajax({url:i+"widget/quick_link/content_query_json_field.php",
data:D,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(c){var d=c[0].pageNum,h=c[0].totalPages;a.find(".adshow-x").hide();for(var k=1;k<c.length;k++){var f=c[k].resources,D=c[k].over_resources,H="",v="",p=c[k].id,q=c[k].link_to,l=c[k].target,t=c[k].title,S=c[k].desc,v=c[k].style,Q=c[k].over_style,r=c[k].display_alt_title,s=t;l=="_blank"&&(s=t+"("+A+")");f!=""&&(H=i+"resources/"+e+"/"+f,a.find("#content_"+k+" img").attr("data-src",H));a.find("#content_"+k+" img").attr("src",
H);a.find("#content_"+k+" img").attr("alt",r==1?t:"");r==1&&a.find("#content_"+k+" img").attr("title",s);g==0?(a.find("#content_"+k+" img").attr("style",v),a.find("#content_"+k+" img").attr("data-style",v)):a.find("#content_"+k+" img").attr("style","");D!=""&&(v=i+"resources/"+e+"/"+D,a.find("#content_"+k+" img").attr("data-over-src",v));Q!=""&&a.find("#content_"+k+" img").attr("data-over-style",Q);a.find("#content_"+k+" a").attr("href",q);a.find("#content_"+k+" a").attr("target",l);a.find("#content_"+
k+" a").attr("title",s);a.find("#content_"+k+" h2").html(t);a.find("#content_"+k+" .ellipsis").text(S);a.find("#content_"+k+" .Txt").attr("id","q_"+p);a.find("#content_"+k).parent(".adshow-x").fadeIn()}m==2&&(a.find("#nav").empty(),a.find("#nav").append(j(d,h)),a.find(".nav-load-x").click(function(){clearInterval(C);z(b(this).attr("data-page"))}));h>1?a.find("#nav").show():a.find("#nav").hide();o>0&&h>1&&(d+1>=h?d=0:d+=1,C=setTimeout(function(){z(d)},o));a.find(".adshow-x").mouseenter(function(){b(this).find("p").text()!=
""&&b(this).find(".Txt").css("bottom",0);var a=b(this).find("img").attr("data-over-src");a!=""&&b(this).find("img").attr("src",a);a=b(this).find("img").attr("data-over-style");a!=""&&b(this).find("img").attr("style",a)});a.find(".adshow-x").mouseleave(function(){if(b(this).find("p").length>0){var a=b(this).find(".Txt").height()-b(this).find(".Txt h2").height();b(this).find("p").text()==""&&(a=40);b(this).find(".Txt").css("bottom",-a)}var a=b(this).find("img").attr("data-over-src"),c=b(this).find("img").attr("data-src");
a!=""&&c!=""&&b(this).find("img").attr("src",c);a=b(this).find("img").attr("data-over-style");c=b(this).find("img").attr("data-style");a!=""&&c!=""&&b(this).find("img").attr("style",c)})}})};a.resize(function(){var c=window.devicePixelRatio,d=b(this).width(),f=0,m=0;log("quick_link "+e+": quick_link_max_width="+w+", devicePixelRatio="+c);w.indexOf("%")!=-1?d*=parseInt(w)/100:d=w.indexOf("px")!=-1?parseInt(w):b(this).width();var n=0,B=0;a.find(".adshow-x").each(function(a){b(this).removeClass("first-col-x");
var c=g==0?t:b(this).width(),h=b(this).css("border-left-style")=="none"?0:parseInt(b(this).css("border-left-width"));u=!1;log("quick_link "+e+": adshow_width="+c);c+=2*h+r;log("quick_link "+e+": adshow_margin_left="+r+", sum_adshow_width="+f+", quick_link_width="+d+", ratio=1");log("quick_link "+e+": adshow_width="+c);c>=d?is_rwd_page()?(log("quick_link "+e+": this is full case, adshow_width="+c+", quick_link_width="+d),b(this).css("width","auto"),u=!0):(c=d-2*h-r,c*=1,b(this).css("width",c),log("quick_link "+
e+": new adshow_width="+c)):(b(this).css("width","auto"),is_rwd_page()&&(u=!0));f+c<=d?(f+=c,a==0&&b(this).addClass("first-col-x"),n++):(n=0,f=c,b(this).addClass("first-col-x"),B++);B==0&&b(this).addClass("first-row-x");m=Math.max(f,m);is_rwd_page()?b(this).find(".Txt").css("width",b(window).width()-5):b(this).find(".Txt").css("width",t);b(this).find(".Txt").each(function(){if(b(this).find("p").length>0){var a=b(this).height()-b(this).find("h2").height();b(this).find("p").text()==""&&(a=40);b(this).css("bottom",
-a)}})});u?(a.find("#quick_link_main").css("width","100%"),a.find("#quick_link_main").css("max-width","100%")):m>0&&(a.find("#quick_link_main").css("width",m),horzWidthOffset=a.find("#quick_link_main").get(0).scrollWidth-a.find("#quick_link_main").get(0).clientWidth,horzWidthOffset>0&&(m+=horzWidthOffset,a.find("#quick_link_main").css("width",m)));g==0&&(u?h==1?a.find(".adshow-x").css("margin-left",0):(n=h==12?2:h==13?3:h==14?4:1,c=(d-t*n)/(n+1),a.find(".adshow-x").css("margin-left",c)):(a.find(".adshow-x").css("margin-left",
r),a.find(".first-row-x").css("margin-top",0),a.find(".first-col-x").css("margin-left",0)));a.find(".navDiv").css("margin-left",-a.find(".navDiv").width()/2)});z(0);c.complete!=null&&c.complete(e)};b.fn.widget.youtubexx=function(a,c,d,e){var i=a.find(".main").attr("data-show-title"),d=a.find(".main").attr("data-show-playlist"),f=a.find(".main").attr("data-show-playlist-height"),g=function(b){var c=b.getAttribute("data-src"),b=b.getAttribute("title");a.find("iframe").attr("src",c);i==1&&(a.find(".youtube_title_block span").attr("title",
b),a.find(".youtube_title_block span").text(b))},m=a.find("li").length;m>0&&(m=Math.floor(Math.random()*m),m=a.find("li").get(m),g(m));d==0?a.find(".playlist").hide():d==1?(a.find(".playlist").hide(),a.find(".main").mouseenter(function(){var c=a.find(".main .playlist");c.show();c.css("top",b(this).height())}),a.find(".main").mouseleave(function(){a.find(".main .playlist").hide()}),a.find(".main .playlist li").click(function(){g(b(this).get(0));a.find(".main .playlist").hide()})):(a.find(".playlist").show(),
a.find(".main .playlist").css("height",f),a.find(".main .playlist li").click(function(){g(b(this).get(0))}));(function(){var b=a.find(".header").height()+a.find(".yucontent").height()+a.find(".footer").height();setWidgetHeight(a,b)})();c.complete!=null&&c.complete(e)};b.fn.widget.youtube=function(a,c,d,e){var i=c.root_path,d=c.action,f=a.find(".main").attr("data-show-title"),g=a.find(".main").attr("data-autoplay"),m=a.find(".main").attr("data-controls"),h=a.find(".main").attr("data-mute"),q=a.find(".main").attr("data-autoplay-next-video"),
o=a.find(".main").attr("data-random-play"),t=a.find(".main").attr("data-show-playlist"),l=a.find(".main").attr("data-show-playlist-height"),r=null,A=!1,C="",w=-1,y="",u=function(){var b=0,c=a.find("li").length;if(c<=1)return 0;if(o)for(;;){if(b=Math.floor(Math.random()*c),b!=w)break}else b=w+1,b>c&&(b=0);return b},j=function(a){var c={};c.youtubeId=a;b.ajax({url:i+"widget/youtube/update_youtube_clicks.php",data:c,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})},z=
function(){a.find(".youtube_thumb_block").hide()},p=function(b){var c=b.getAttribute("data-src"),e=b.getAttribute("title");w=b.getAttribute("data-id");C=b.getAttribute("data-end-url");if(r!=null&&c!=""&&A)if(log("loadVideoByUrl..."+c),r.loadVideoByUrl(c),h==1&&r.mute(),g==0){var c=a.find(".youtube_content_block").width(),d=a.find(".youtube_content_block").height();a.find(".youtube_thumb_block").width(c);a.find(".youtube_thumb_block").height(d);c=b.getAttribute("data-vid");b=b.getAttribute("title");
a.find(".youtube_thumb_block img").attr("src","https://img.youtube.com/vi/"+c+"/hqdefault.jpg");a.find(".youtube_thumb_block img").attr("alt",b);a.width()>a.height()?(a.find(".youtube_thumb_block img").css("width","auto"),a.find(".youtube_thumb_block img").css("height","140%")):(a.find(".youtube_thumb_block img").css("width","100%"),a.find(".youtube_thumb_block img").css("height","auto"));a.find(".youtube_thumb_block").show();r.stopVideo();a.find("#b_play").show()}else z();f==1&&(a.find(".youtube_title_block span").attr("title",
e),a.find(".youtube_title_block span").text(e));y=e},L=function(){A=!0;if(a.find("li").length>0){var b=u(),b=a.find("li").get(b);log("onPlayerReady...");p(b)}},D=function(b){b.data==YT.PlayerState.PLAYING?log("YT.PlayerState.PLAYING"):b.data==YT.PlayerState.ENDED?(log("YT.PlayerState.ENDED"),q==1?A!=!1&&(b=u(),b=a.find("li").get(b),p(b)):C!=""&&popup_content("url","940px",C,"yes"),j(w)):b.data==YT.PlayerState.PAUSED?log("YT.PlayerState.PAUSED"):b.data==YT.PlayerState.BUFFERING?log("YT.PlayerState.BUFFERING"):
b.data==YT.PlayerState.CUED&&(log("YT.PlayerState.CUED"),a.find(".youtube_content_block").prop("title",y))},G=function(){};if((typeof YT=="undefined"?!1:!0)==!1)return c=document.createElement("script"),c.src="https://www.youtube.com/iframe_api",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(c,e),this;t==0?a.find(".playlist").hide():t==1?(a.find(".playlist").hide(),a.find(".main").mouseenter(function(){var c=a.find(".main .playlist");c.show();c.css("top",b(this).height())}),
a.find(".main").mouseleave(function(){a.find(".main .playlist").hide()}),a.find(".main .playlist li").click(function(){p(b(this).get(0));a.find(".main .playlist").hide()})):(a.find(".playlist").show(),a.find(".main .playlist").css("height",l),a.find(".main .playlist li").click(function(){p(b(this).get(0))}));a.find(".youtube_thumb_block").click(function(){if(r==null)log("Player is not initialized!");else try{log("youtube_thumb_block: vplayer.playVideo"),z(),r.playVideo()}catch(a){log("youtube_thumb_block: exception")}});
a.find("#b_play").keyup(function(a){if(a.which==13)if(r==null)log("Player is not initialized!");else try{log("youtube_thumb_block: vplayer.playVideo"),z(),r.playVideo()}catch(b){log("youtube_thumb_block: exception")}});a.find(".youtube_thumb_block").mouseenter(function(){a.find("#b_play").show()});a.find(".youtube_thumb_block").mouseleave(function(){a.find("#b_play").hide()});if(d=="onYouTubeIframeAPIReady"){if(typeof YT=="undefined"){log("youtube is not ready!");c=document.createElement("script");
c.src="https://www.youtube.com/iframe_api";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(c,e);return}log("onYouTubeIframeAPIReady: unique_id="+e);r=new YT.Player(e+"_v_player",{height:b("."+e+" .slide_youtube").height(),width:b("."+e+" .slide_youtube").width(),title:"",tabindex:"-1",playerVars:{autoplay:0,controls:m,modestbranding:1},events:{onReady:L,onStateChange:D,onError:G}});g==0&&a.find(".youtube_content_block").attr("tabindex",-1)}(function(){var b=a.find(".header").height()+
a.find(".yucontent").height()+a.find(".footer").height();setWidgetHeight(a,b);if(t==2||t==3)b=parseInt(a.find(".yucontent .main").css("padding-left"))+parseInt(a.find(".yucontent .main").css("padding-right")),b=a.width()-a.find(".playlist").width()-b,a.find(".slide_youtube").css("width",b)})();c.complete!=null&&c.complete(e)};b.fn.widget.popup=function(a,c,d,e){var d=c.root_path,i=parseInt(a.find("#popup_widget").attr("data-popup-timeout")),f=a.find("#popup_widget").attr("data-transition"),g=a.find("#popup_widget").attr("data-transition-close"),
m=a.find("#popup_widget").attr("data-popup-width-type"),h=parseInt(a.find("#popup_widget").attr("data-popup-width")),a=(new Date).getTime(),q=g_storage.get(e+"_popup_expire_time"),o=!1;i<=0||q==""?o=!0:a>q&&(g_storage.set(e+"_popup_expire_time",""),q="",o=!0);if(o)a={},a.uid=e,b.ajax({url:d+"widget/popup/content_query_json_field.php",data:a,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(a){a=decodeURIComponent(a[0].content);a!=""&&(b(a).appendTo(b(".popup .content")),
m=="full_width"?b(".popup").css("width",b(window).width()-100):(h>b(window).width()&&(h=b(window).width()-100),b(".popup").css("width",h)),b(".popup").bPopup({speed:1200,transition:f,transitionClose:g,follow:[!1,!1],position:["auto",20],onOpen:function(){if(q==""&&i>0){var a=new Date;a.setTime(a.getTime()+i*6E4);g_storage.set(e+"_popup_expire_time",a.getTime())}},onClose:function(){b(".popup .content").empty()}}),c.complete!=null&&c.complete(e))}})};b.fn.widget.group=function(a,c,d,e){var i=parseInt(a.find(".abgne_tab").attr("data-widget-type")),
f=parseInt(a.find(".abgne_tab").attr("data-widget-average-tab")),f=parseInt(a.find(".abgne_tab").attr("data-widget-average-tab")),g=parseInt(a.find(".abgne_tab").attr("data-widget-open-tab")),m=parseInt(a.find(".abgne_tab").attr("data-widget-length")),h=parseInt(a.find(".abgne_tab").attr("data-widget-vertical-arrangement-width")),q=a.find(".abgne_tab").attr("data-widget-group-height"),h=parseInt(a.find(".abgne_tab").attr("data-widget-vertical-arrangement-width")),o=a.find(".abgne_tab").attr("data-widget-two-column-width-type"),
t=parseInt(a.find(".abgne_tab").attr("data-widget-two-column-left-width")),l=parseInt(a.find(".abgne_tab").attr("data-widget-two-column-right-width")),r=a.find(".abgne_tab").attr("data-widget-three-column-width-type"),A=parseInt(a.find(".abgne_tab").attr("data-widget-three-column-left-width")),C=parseInt(a.find(".abgne_tab").attr("data-widget-three-column-center-width")),w=parseInt(a.find(".abgne_tab").attr("data-widget-three-column-right-width")),y=function(h,g){var f="."+e+" "+h.find("a").attr("data-href");
h.addClass("active").siblings(".active").removeClass("active");b(f).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();var m=b(f).find(".widget-x").attr("id"),j=b.fn.widget[m],n=String(b(f).find(".widget-x").attr("class")).split(" ")[0];if(b.isFunction(j)){c.complete=function(){g&&b("."+n).attr("tabindex",-1).focus()};c.update_tabindex=function(){a.find(".tab_container .tab-ctl-x").attr("tabindex",0)};if(m=="youtube")c.action="onYouTubeIframeAPIReady";j(b("."+n),c,d,n)}else log("Group: Not implement widget: "+
m);b(f).find("iframe").length>0&&(b(f).find("iframe").attr("src",function(a,b){return b}),g&&b(f).find("iframe").focus())};if(i==2){a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();var u=a.height(),j=a.find(".tabs").height();q!="auto"&&a.find(".tab_container").css("height",u-j-2);g==1&&a.find("ul.tabs li").mouseover(function(){y(b(this),!1)}).find("a").focus(function(){});a.find("ul.tabs li").click(function(){y(b(this),!1)}).find("a").focus(function(){});a.find("ul.tabs li").keyup(function(a){a.keyCode==
13&&y(b(this),!0)}).find("a").focus(function(){})}a.resize(function(){if(i==2&&f==1){var c=(m+b("."+e+" .abgne_tab").width()-parseInt(a.find(".abgne_tab").css("padding-left"))-parseInt(a.find(".abgne_tab").css("padding-right"))-m*2-1)/m;a.find("ul.tabs li").css("width",c)}a.find("#g-left_sider").removeClass("vertical_arrangement");a.find("#g-center_sider").removeClass("vertical_arrangement");a.find("#g-right_sider").removeClass("vertical_arrangement");a.width()<h&&(i==1?(a.find("#g-left_sider").addClass("vertical_arrangement"),
a.find("#g-right_sider").addClass("vertical_arrangement"),o=="custom"&&(a.find("#g-left_sider").css("width",t+"%"),a.find("#g-right_sider").css("width",l+"%"))):i==3&&(a.find("#g-left_sider").addClass("vertical_arrangement"),a.find("#g-center_sider").addClass("vertical_arrangement"),a.find("#g-right_sider").addClass("vertical_arrangement"),r=="custom"&&(a.find("#g-left_sider").css("width",A+"%"),a.find("#g-center_sider").css("width",C+"%"),a.find("#g-right_sider").css("width",w+"%"))),a.find(".abgne_tab").css("padding",
"0px"))});c.complete!=null&&c.complete(e)};b.fn.widget.site_news_tab=function(a,c,d,e){var i=c.root_path,f=parseInt(a.find("#sitenews_tab_main").attr("data-class-count")),g=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-max-rows")),m=a.find("#sitenews_tab_main").attr("data-widget-newslink-openmode"),h=parseInt(a.find("#sitenews_tab_main").attr("data-widget-average-tab")),d=parseInt(a.find("#sitenews_tab_main").attr("data-widget-open-tab")),q=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-width")),
o=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-height")),t=parseInt(a.find("#sitenews_tab_main").attr("data-widget-news-image-show")),l=parseInt(a.find("#sitenews_tab_main").attr("data-widget-height")),r=!1,A=function(){var b=a.find(".abgne_tab").height();setWidgetHeight(a,b)},C=function(a){b(window.parent).width();b(window.parent).height();y(a,!0,function(a){parseInt(a[0].totalRows);parseInt(a[0].maxRows);var b=a[0].classTitle,c="";c+="<div class='bd' style='font-size:120%'>";
c+="<div class='class_title'><h3>"+b+" \u00bb</h3></div>";c+="<ul>";for(b=1;b<a.length;b++){var d=a[b].newsId,h=a[b].title,f=a[b].content,g=a[b].linktype;c+="<li";b==0&&(c+=" class='first'");c+=">";c+="<div class='txt'>";c+=g=="content"?"<a onclick='load_Site_News_Tab_Content("+d+', "'+e+"\")' title='"+h+"'>":f==""?"<a class='title'>":"<a href='"+f+"' class='title' target='"+m+"'>";c+=h;c+="</a></div></li>"}c+="</ul></div>";popup_content("html","940px",c,"yes")})},w=function(a){var c={};c.uid=e;c.nid=
a;b.ajax({url:i+"widget/site_news_tab/news_query_content.php",data:c,type:"GET",dataType:"xml",timeout:2E4,error:function(){},success:function(a){var c="";c+="<div class='bd'>";b("entry",a).each(function(){var a=b(this).find("content").text();c+=a});c+="</div>";popup_content("html","940px",c,"yes")}})},y=function(a,c,d){var h={};h.uid=e;h.cid=a;h.maxRows=g;if(c)h.queryall="1";b.ajax({url:i+"widget/site_news_tab/news_query_json.php",data:h,type:"GET",dataType:"json",timeout:2E4,error:function(){},
success:function(a){d&&d(a)}})},u=function(d,h){y(h,!1,function(f){var g="",m=0,k=parseInt(f[0].totalRows),j=parseInt(f[0].maxRows);a.find(".tabs").width();a.find(".tab_content").height();g+="<table style='width:100%;table-layout:fixed;'>";g+="<tr>";g+=t==1?"<td style='vertical-align:top;width:"+(q+10)+"px;padding:0 10px 0 0;' headers='table-icon'>":"<td style='vertical-align:top;width:0px' headers='table-icon'>";for(m=1;m<f.length;m++){var i=f[m].newsId,H=f[m].title,v=f[m].image,p=f[m].width,y=f[m].height,
u=f[m].content,z=f[m].linktarget,S=f[m].linktype,Q=H;if(m==1){var U=q,s=o,R=U,I=s,I=s,R=I*(p/y),F="";R<U?(R=U,I=R*(y/p),F="margin-top:"+(s-I)/2+"px;"):F="margin-left:"+(U-R)/2+"px;";p="width:"+R+"px;";p+="height:"+I+"px;";p+=F;g+="<label class='img-border clearfix'>";S=="content"?g+="<a class='open-news-x tab-ctl-x' data-id='"+i+"' title='"+H+"'>":S=="url"&&(g+=u==""?"<a title='"+H+"'>":"<a href='"+u+"' title='"+H+"' target='"+z+"'>");g+="<div class='thumb' style='overflow:hidden;width:"+U+"px;height:"+
s+"px'>";g+="<img alt='"+H+"' title='"+H+"' src='"+v+"' style='"+p+"'>";g+="</div>";g+="</a>";g+="</label>";g+="</td>";g+="<td style='vertical-align:top;' headers='table-content'>";g+="<div class='news-content'>"}g+="<div class='news'>";S=="content"?g+="<a href='javascript:void(0);' class='open-news-x tab-ctl-x' data-id='"+i+"' title='"+H+"'>"+Q+"</a>":S=="url"&&(g+=u==""?"<a class='tab-ctl-x' title='"+H+"'>"+Q+"</a>":"<a class='tab-ctl-x' href='"+u+"' title='"+H+"' target='"+z+"'>"+Q+"</a>");g+=
"</div>"}g+="</div>";g+="</td>";g+="</tr>";k>j&&(g+="<tr><td></td><td>",g+="<span class='btnmore' style='bottom:0px;display:block;padding-left:3px;position:relative;right:7px;text-align:right;'>",g+="<a href='javascript:void(0);' class='open-more-news-x tab-ctl-x' data-id='"+h+"' style='text-decoration:none;cursor:pointer;'>\u00bb \u66f4\u591a</a>",g+="</span>",g+="</td></tr>");g+="</table>";a.find(d).empty();a.find(d).append(g);a.find(".tab_content").css("padding",5);f=a.find("ul.tabs").height()+
15;f=l-f-a.find(".footer").height();f=Math.max(a.find(d).find("table").height(),f);a.find(".tab_content").css("height",f);a.find(".open-news-x").click(function(){var a=parseInt(b(this).attr("data-id"));w(a)});a.find(".open-more-news-x").click(function(){var a=parseInt(b(this).attr("data-id"));C(a)});A();c.complete!=null&&r==!1&&(c.complete(e),r=!0);c.update_tabindex!=null&&c.update_tabindex(e)})},j=function(b){var c=b.find("a").attr("href"),e=b.find("a").attr("cid"),c=c.substring(c.indexOf("#"),c.length);
b.addClass("active").siblings(".active").removeClass("active");a.find(c).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();u(c,e)};if(f==0)a.find("div.abgne_tab").remove();else{var z=a.find("#tab_header0").attr("href"),p=a.find("#tab_header0").attr("cid");u(z,p);a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();d==0?a.find("ul.tabs li").click(function(){j(b(this));return!1}).find("a").focus(function(){}):d==1&&(a.find("ul.tabs li").mouseover(function(){j(b(this));
return!1}).find("a").focus(function(){}),a.find("ul.tabs li").click(function(){return!1}));a.find("div.abgne_tab").css("width","100%");a.resize(function(){var b=(a.find(".tabs").width()-f)/f;h==1&&a.find(".site_news_tab_x").css("width",b)})}};b.fn.widget.activities3=function(a,c,d,e){var i=c.root_path;a.find("#main").width();var f=a.find("#main").attr("data-widget-slidecount-perpage"),g=parseInt(a.find("#main").attr("data-widget-left-space")),m=parseInt(a.find("#main").attr("data-widget-right-space")),
h=a.find("#main").attr("data-widget-container-width"),q=parseInt(a.find("#main").attr("data-widget-container-height")),o=parseInt(a.find("#main").attr("data-widget-slideshow-title")),t=parseInt(a.find("#main").attr("data-widget-album-speed"))*1E3,l=0,r=0,A=0,C=0,w="left",y=0,u=0,j=0,z=0,p=function(a){var b="";b+='<div class="slide">';for(var c=1;c<a.length;c++){var e=a[c].album_title,d=a[c].thumb_image,g=a[c].style,h=a[c].url;e+="(\u53e6\u958b\u555f\u65b0\u8996\u7a97)";b+='<div class="slide_image" style="width:'+
y+"px;height:"+u+'px;">';b+='<a href="'+h+'" class="tab-ctl-x" target="_blank">';b+='<img src="'+d+'"';b+=' title="'+e+'"';b+=' alt="'+e+'"';b+=' style="'+g+'">';o==1&&(b+='<div class="album_title_block" title="'+e+'"',b+=' style="color: rgb(255, 255, 255); opacity: 0.65; background: rgb(0, 0, 0);">',b+="<div>"+e+"</div>",b+="</div>");b+="</a>";b+="</div>"}b+="</div>";return b},L=function(){var b=A,c=C;b==0?a.find("#leftControl").hide():a.find("#leftControl").show();b==c-1?a.find("#rightControl").hide():
a.find("#rightControl").show()},D=function(){var d=a.find("#search .input").val()==void 0?"":a.find("#search .input").val(),g={paction:"query_album"};g.uid=e;g.pageNum=A;g.maxRows=f;g.keyword=escape(d);g.ws_width=y;g.ws_height=u;b.ajax({url:i+"widget/activities3/album_query_json.php",data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d=b[0].pageNum,g=b[0].totalPages,h=w,b=p(b);h=="right"?(a.find("#slideInner").css("marginLeft",
-j),a.find("#slideInner").prepend(b)):(h!="left"&&h!="fadeout"&&a.find("#slideInner").empty(),a.find("#slideInner").append(b));a.find(".slide").css({"float":"left",width:j});A=d;C=g;L();if(a.find(".slide").length>1)if(h=="right"){a.find("#slideInner").fadeIn();a.find("#slideInner").animate({marginLeft:0},500,function(){a.find(".slide").last().remove();a.find("#slideInner").css("marginLeft",0)});return}else if(h=="left"){a.find("#slideInner").fadeIn();a.find("#slideInner").animate({marginLeft:-j},
500,function(){a.find(".slide").first().remove();a.find("#slideInner").css("marginLeft",0)});return}else if(h=="fadeout"){a.find("#slideInner").fadeOut(500,function(){a.find(".slide").first().remove();a.find("#slideInner").css("marginLeft",0);a.find("#slideInner").fadeIn()});return}a.find("#div_topbanner").height();a.find("#content").height();parseInt(a.find("#slideshow").css("top"));c.complete!=null&&c.complete(e)}})},G=function(){var a=A,b=C;b<=1||(a+=1,a>b-1?(a=0,w="fadeout"):w="left",A=a,D())},
n=function(a){var b=A,c=C;a.attr("id")=="rightControl"?(b+1>=c?b=c-1:b+=1,w="left"):(b-1<=0?b=0:b-=1,w="right");A=b;C=c;L();D()};a.find("#search .button").click(function(){clearInterval(z);w="none";A=0;D()});a.find("#search .input").keyup(function(b){var c=a.find("#search .input").val()==void 0?"":a.find("#search .input").val();if(b.which==13||c=="")clearInterval(z),w="none",A=0,D()});a.find("#slidesContainer").css("overflow","hidden");a.find("#slideshow").prepend('<span class="control tab-ctl-x" id="leftControl" title="Swipe left" alt="Swipe left"><div class="icon"></div></span>').append('<span class="control tab-ctl-x" id="rightControl" title="Swipe right" alt="Swipe right"><div class="icon"></div></span>');
a.find(".control").hide();a.find(".control").keypress(function(a){a.which==13&&n(b(this))});a.find(".control").bind("click",function(){n(b(this))});a.find(".control").mouseover(function(){b(this).css("background-color","#AAABAC")});a.find(".control").mouseleave(function(){b(this).css("background-color","#6E7070")});a.resize(function(){var b=a.find("#main").width();l=h=="parent_width"?b-g-m:h;r=q;y=Math.floor(l/f);u=r;a.find("#content").css("width",l);j=y*f+2*f;a.find("#slideInner").css("width",j*
2);a.find("#slideInner").css("overflow","hidden");D();clearInterval(z);t<=0||(z=setInterval(G,t))})};b.fn.widget.site_news=function(a,c,d,e){var i=c.root_path;a.find("#main").width();var f=parseInt(a.find("#main").attr("data-show-col-time")),g=parseInt(a.find("#main").attr("data-show-col-attr")),m=parseInt(a.find("#main").attr("data-show-col-unit")),h=parseInt(a.find("#main").attr("data-show-col-user")),q=parseInt(a.find("#main").attr("data-show-col-click")),o=parseInt(a.find("#main").attr("data-show-col-serial")),
t=a.find("#main").attr("data-show-time-format"),l=a.find("#main").attr("data-show-col-order"),r=a.find("#main").attr("data-show-col-time-width"),A=a.find("#main").attr("data-show-col-attr-width"),C=a.find("#main").attr("data-show-col-unit-width"),w=a.find("#main").attr("data-show-col-user-width"),y=a.find("#main").attr("data-show-col-click-width"),u=a.find("#main").attr("data-show-col-serial-width"),j=a.attr("default-attr"),z=a.find("#main").attr("data-widget-news-open-mode"),p=a.attr("default-tag");
j!=-1&&j!=void 0&&(a.find("#search #select_attr_"+e).val(j),a.find("#ntb").attr("flock","attr_"+j));var r=r==""||r=="undefined"?"15%":r,A=A==""||A=="undefined"?"15%":A,C=C==""||C=="undefined"?"10%":C,w=w==""||w=="undefined"?"10%":w,y=y==""||y=="undefined"?"10%":y,u=u==""||u=="undefined"?"15%":u,L=!1,D=1;l==""&&(l="Serial,Time,Attr,Unit,News,User,Click");var G=0;f==1&&(G+=15);g==1&&(G+=15);m==1&&(G+=10);h==1&&(G+=10);q==1&&(G+=10);for(var G=100-G,n=[],l=l.split(","),j=0;j<l.length;j++){var B=l[j];
o==1&&B=="Serial"?n.push(B):f==1&&B=="Time"?n.push(B):g==1&&B=="Attr"?n.push(B):m==1&&B=="Unit"?n.push(B):h==1&&B=="User"?n.push(B):q==1&&B=="Click"?n.push(B):B=="News"&&n.push(B)}var k=function(d){for(var g=d[0].flock,h=d[0].field,f=d[0].fval,m=d[0].order,I=d[0].maxRows,j=parseInt(d[0].pageNum),J=parseInt(d[0].totalPages),E="",O=0,K=1;K<d.length;K++){var V=d[K].newsId,aa=d[K].time,k=d[K].attr,p=d[K].attr_name==""?"\u7121":d[K].attr_name,X=d[K].title,o=d[K].title_color,q=d[K].unit,t=d[K].unit_name==
""?"\u7121":d[K].unit_name,Z=d[K].issuer,l=d[K].name==""?"\u7121":d[K].name,x=d[K].clicks,ca=d[K].top,D=d[K].content_type,B=d[K].content,N=parseInt(d[K].permission);E+=O%2==0?'<tr nid="'+V+'" class="tcontent even">':'<tr nid="'+V+'" class="tcontent odd">';for(var M=0;M<n.length;M++){var P=n[M];P=="Serial"&&(E+='<td style="text-align:center;width:'+u+'" order="DESC" field="serial" axis="\u7de8\u865f" >',E+=V,E+="</td>");P=="Time"&&(E+='<td style="text-align:center;width:'+r+'" order="DESC" field="time" axis="\u6642\u9593" >',
E+=aa,E+="</td>");P=="Attr"&&(E+='<td style="text-align:center;width:'+A+'" class="ctrl" order="DESC" field="attr" fval="'+k+'" axis="\u985e\u5225">\u3010'+p+"\u3011</td>");P=="Unit"&&(E+='<td style="text-align:center;width:'+C+'" class="ctrl" order="DESC" field="unit" fval="'+q+'" title="'+t+'" axis="\u55ae\u4f4d">'+t+"</td>");P=="News"&&(E+='<td order="DESC" field="title" style="width:'+G+'%" axis="\u5167\u5bb9">',$is_locked_news=N>=1?!0:!1,$is_top_news=ca=="1"?!0:!1,D=="url"?(E+='<a id="content_href" class="',
$is_locked_news&&(E+=" news-locked-x"),$is_top_news&&(E+=" news-top-x"),E+=" loadnews-url-x",E+=' tab-ctl-x"',E+=' href="'+B+'" nid="'+V+'" title="'+X+'" target="_blank">'):(E+='<a id="content_href" class="',$is_locked_news&&(E+=" news-locked-x"),$is_top_news&&(E+=" news-top-x"),z==0&&(E+=" loadnews-x"),E+=' tab-ctl-x"',z==0?E+=' href="javascript:void(0);"':z==1?E+=' href="?nid='+V+'"':z==3&&(E+=' href="'+i+"public/news_view/show.php?nid="+V+'" target="_blank"'),E+=' nid="'+V+'" title="'+X+'">'),
o!=""&&(E+='<span style="color:#'+o+'">'),E+=X,o!=""&&(E+="</span>"),E+="</a>",$is_locked_news&&(E+='<div id="imgLock"></div>'),$is_top_news&&(E+='<div id="imgHot"></div>'),E+="</td>");P=="User"&&(E+='<td style="text-align:center;width:'+w+'" class="ctrl" order="DESC" field="issuer" fval="'+Z+'" axis="\u767c\u4f48">'+l+"</a></td>");P=="Click"&&(E+='<td style="text-align:center;width:'+y+'" order="DESC" field="clicks" axis="\u9ede\u95b1">'+x+"</td>")}E+="</tr>";O++}a.find("#ntb").attr("field",h);a.find("#ntb").attr("flock",
g);a.find("#ntb").attr("fval",f);a.find("#ntb").attr("order",m);a.find("#ntb").attr("maxRows",I);a.find("#ntb").attr("pageNum",j);a.find("#ntb").attr("totalPages",J);a.find("#ntb tbody").html(E);a.find(".loadnews-url-x").unbind("click");a.find(".loadnews-url-x").click(function(){var a=b(this).attr("nid");W(a)});a.find(".loadnews-x").unbind("click");a.find(".loadnews-x").click(function(){var a=b(this).attr("nid");T(a)});a.find("#ntb tbody tr td").unbind("click");a.find("#ntb tbody tr td").click(function(){var c=
b(this).attr("field"),d=b(this).attr("fval");b(this).attr("order");if(!(c=="time"||c=="clicks"))if(c=="title")return!0;else a.find("#ntb").attr("field","time"),a.find("#ntb").attr("fval",d),a.find("#ntb").attr("order","DESC"),a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("flock",c+"_"+d),v();return!1});H();c.update_tabindex!=null&&c.update_tabindex(e);c.complete!=null&&L==!1&&(c.complete(e),L=!0)},x=function(a,c){a.replaceWith(function(){return b(c,{html:b(this).html()})})},M=function(){var c=
parseInt(a.find("#ntb").attr("totalPages")),d=parseInt(a.find("#ntb").attr("pageNum"));d+=1;c<=1?(a.find("#btnFirst").addClass("disablebtn"),a.find("#btnPrev").addClass("disablebtn"),a.find("#btnNext").addClass("disablebtn"),a.find("#btnLast").addClass("disablebtn"),x(a.find("#btnFirst a"),"<span/>"),x(a.find("#btnPrev a"),"<span/>"),x(a.find("#btnNext a"),"<span/>"),x(a.find("#btnLast a"),"<span/>")):(d>1?(a.find("#btnFirst").removeClass("disablebtn"),a.find("#btnPrev").removeClass("disablebtn"),
x(a.find("#btnFirst span"),"<a/>"),x(a.find("#btnPrev span"),"<a/>"),a.find("#btnFirst a").attr("href","javascript:void(0);"),a.find("#btnPrev a").attr("href","javascript:void(0);")):(a.find("#btnFirst").addClass("disablebtn"),a.find("#btnPrev").addClass("disablebtn"),x(a.find("#btnFirst a"),"<span/>"),x(a.find("#btnPrev a"),"<span/>")),d==c?(a.find("#btnNext").addClass("disablebtn"),a.find("#btnLast").addClass("disablebtn"),x(a.find("#btnNext a"),"<span/>"),x(a.find("#btnLast a"),"<span/>")):(a.find("#btnNext").removeClass("disablebtn"),
a.find("#btnLast").removeClass("disablebtn"),x(a.find("#btnNext span"),"<a/>"),x(a.find("#btnLast span"),"<a/>"),a.find("#btnNext a").attr("href","javascript:void(0);"),a.find("#btnLast a").attr("href","javascript:void(0);")),a.find(".btn a").each(function(){b(this).hasClass("tab-ctl-x")||(b(this).addClass("tab-ctl-x"),b(this).attr("tabindex",0))}),P(),d=parseInt(a.find("#ntb").attr("pageNum"))+1,c=parseInt(a.find("#ntb").attr("totalPages")),a.find("#pageInfo").text(d+" / "+(c==0?1:c)))},H=function(){var b=
a.find(".topbanner-x").height()+a.find("#div_table_content").height()+a.find(".footer-x").height()+10;a.find("#search").css("position")!="absolute"&&(b+=a.find("#search").height(),b+=20);var c=a.find("#div_table_content").width();a.find("#div_news_table_1_topbanner").css("width",c);c=a.find("#div_table_content").find("#ntb thead tr").eq(0).height();a.find("#div_news_table_1_topbanner").css("height",c);c=a.find("#div_table_content").height();a.find("#div_news_table_1").css("height",c);setWidgetHeight(a,
b)},v=function(){var c=parseInt(a.find("#ntb").attr("pageNum")),d=a.find("#ntb").attr("flock"),g=a.find("#ntb").attr("field"),h=a.find("#ntb").attr("fval"),f=a.find("#ntb").attr("order"),m=a.find("#ntb").attr("maxRows"),v=a.find("#ntb").attr("keyword"),J={};J.field=g;J.order=f;J.pageNum=c;J.maxRows=m;J.keyword=escape(v);if(h!="")J.fval=h;if(d!="")J.flock=d;J.uid=e;J.tf=t;J.auth_type="user";J.use_cache=D;D=0;J.tag=p;a.find(".loading").css("left",(a.width()-a.find(".loading").width())/2);a.find(".loading").css("top",
50);a.find(".loading").show();b.ajax({url:i+"widget/site_news/news_query_json.php",data:J,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Fail to load site news!")},success:function(b){k(b);M();a.find(".loading").hide()}})},T=function(c){var g=a.find("#ntb").attr("maxRows");if(popup_content!=void 0)c=i+"widget/site_news/news_pop_content.php?newsId="+c+"&maxRows_rsResult="+g+"&fh=0&bid="+d+"&uid="+e,popup_content("url","1000px",c,"no");else{var h=0,h=h==0?b(window).height():h,c="news_pop_content.php?newsId="+
c+"&maxRows_rsResult="+g+"&fh="+h+"&bid="+d+"&uid="+e;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location=c:(g=b(window).width()-100,h=b(window).height()-100,b(".popup-news .content").empty(),b(".popup-news").css("width",g),b(".popup-news").css("height",h),b(".popup-news").bPopup({content:"iframe",contentContainer:".content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=b(this).find("iframe");a.css("width",
b(this).width()+"px");a.css("height",b(this).height()+"px");a.css("background","url()")}},function(){}))}},W=function(a){b.ajax({url:i+"widget/site_news/update_news_clicks.php",data:"newsId="+a,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})},N=function(b){if(b=="btnFirst")a.find("#ntb").attr("pageNum",0),v();else if(b=="btnPrev")b=parseInt(a.find("#ntb").attr("pageNum"))-1,b<=0&&(b=0),a.find("#ntb").attr("pageNum",b),v();else if(b=="btnNext"){var c=parseInt(a.find("#ntb").attr("totalPages")),
b=parseInt(a.find("#ntb").attr("pageNum"))+1;b>c-1&&(b=c-1);a.find("#ntb").attr("pageNum",b);v()}else b=="btnLast"&&(b=parseInt(a.find("#ntb").attr("totalPages"))-1,a.find("#ntb").attr("pageNum",b),v())},P=function(){a.find("#btnFirst").unbind("click");a.find("#btnFirst").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnPrev").unbind("click");a.find("#btnPrev").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnNext").unbind("click");
a.find("#btnNext").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find("#btnLast").unbind("click");a.find("#btnLast").click(function(){if(b(this).hasClass("disablebtn"))return!1;N(b(this).attr("id"))});a.find(".nav-unit-tag-x").unbind("click");a.find(".nav-unit-tag-x").click(function(){if(b(this).hasClass("disablebtn"))return!1;a.find(".nav-unit-tag-x").removeClass("active");b(this).addClass("active");a.find("#ntb").attr("pageNum",0);var c=b(this).attr("data-uid"),
d=a.find("#search .select-attr-x"),d=d.val()!=void 0?d.val():-1,e="";c!="-1"&&(e+="unit_"+c);d!="-1"&&(e!=""&&(e+="-"),e+="attr_"+d);a.find("#ntb").attr("flock",e);v()})};a.find("#ntb").attr("pageNum",0);v();a.find("#ntb thead tr th").unbind("click");a.find("#ntb thead tr th").click(function(){var a=b(this).attr("hid"),c=b(this).attr("order");b("#ntb").attr("field",a);b("#ntb").attr("fval","");b("#ntb").attr("order",c);b(this).attr("order",c=="DESC"?"ASC":"DESC");v();return!1});P();a.find("#search .button").unbind("click");
a.find("#search .button").click(function(){var b=a.find("#search .input").val();a.find("#ntb").attr("pageNum",0);a.find("#ntb").attr("keyword",b);v()});a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(c){var d=b(this).val();if(c.which==13||d=="")a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("keyword",d),v()});a.find("#search .select-attr-x, #search .select-unit-x").unbind("change");a.find("#search .select-attr-x, #search .select-unit-x").change(function(){var b=
a.find("#search .select-unit-x"),c=a.find("#search .select-attr-x"),b=b.val()!=void 0?b.val():-1,c=c.val()!=void 0?c.val():-1,d="";b!="-1"&&(d+="unit_"+b);c!="-1"&&(d!=""&&(d+="-"),d+="attr_"+c);a.find("#ntb").attr("flock",d);v()});a.unbind("resize");a.resize(function(){H()})};b.fn.widget.site_news2=function(a,c,d,e){function i(a,b){if(b<=1)return"";var c="";c+='<div id="nav_bar">';for(var d=!1,e=0;e<b;e++)e==a?(c+='<span class="btn select"><a class="tab-ctl-x" href="javascript:void(0);">'+(e+1)+
"</a></span>",d=!1):e-a>1&&e!=b-1&&e!=0&&b>5?d==!1&&(c+='<span class="btn skip next"><a class="tab-ctl-x" href="javascript:void(0);">...</a></span>',d=!0):e-a<-1&&e!=b-1&&e!=0&&b>5?d==!1&&(c+='<span class="btn skip prev"><a class="tab-ctl-x" href="javascript:void(0);">...</a></span>',d=!0):c+='<span class="btn" data-page="'+e+'"><a class="tab-ctl-x" href="javascript:void(0);">'+(e+1)+"</a></span>";c+="</div>";return c}var f=c.root_path;a.find("#widget_main").width();var g=parseInt(a.find("#widget_main").attr("data-show-col")),
m=parseInt(a.find("#widget_main").attr("data-show-col-time")),h=parseInt(a.find("#widget_main").attr("data-show-col-attr")),q=parseInt(a.find("#widget_main").attr("data-show-col-unit")),o=parseInt(a.find("#widget_main").attr("data-show-col-user")),t=parseInt(a.find("#widget_main").attr("data-show-col-click"));parseInt(a.find("#widget_main").attr("data-show-col-serial"));var l=a.find("#widget_main").attr("data-show-time-format"),r=decodeURIComponent(a.find("#widget_main").attr("data-col-time-title")),
A=decodeURIComponent(a.find("#widget_main").attr("data-col-attr-title")),C=decodeURIComponent(a.find("#widget_main").attr("data-col-unit-title")),w=decodeURIComponent(a.find("#widget_main").attr("data-col-user-title")),y=decodeURIComponent(a.find("#widget_main").attr("data-col-click-title")),u=a.find("#widget_main").attr("data-widget-layout"),j=a.find("#widget_main").attr("data-widget-news-open-mode"),z=a.find("#widget_main").attr("data-widget-column-count"),p=a.attr("default-attr"),L=a.attr("default-tag"),
D=!1;p!=-1&&p!=void 0&&(a.find("#search #select_attr_"+e).val(p),a.find("#ntb").attr("flock","attr_"+p));var G=function(d,v){var p=v[0].flock,n=v[0].field,l=v[0].fval,u=v[0].order,z=v[0].maxRows,Q=parseInt(v[0].pageNum),G=parseInt(v[0].totalPages),s="",L=0;s+="<ul class='"+d+"'>";for(var I=1;I<v.length;I++){var F=v[I].newsId,J=v[I].time,E=v[I].attr_name==""?"\u7121":v[I].attr_name,O=v[I].title,K=v[I].unit_name==""?"\u7121":v[I].unit_name,V=v[I].name==""?"\u7121":v[I].name,aa=v[I].clicks,ba=v[I].content_type,
Y=v[I].content;parseInt(v[I].permission);var X=v[I].news_image,da=v[I].news_image_width,ea=v[I].news_image_height;s+='<li class="item">';s+='<div class="imgBox">';g_web_accessibility==0&&(ba=="url"?s+='<a id="content_href" class="loadnews-url-x" href="'+Y+'" nid="'+F+'" title="'+O+'" target="_blank">':j==0?s+='<a id="content_href" class="loadnews-x" href="javascript:void(0);" nid="'+F+'" title="'+O+'">':j==1?s+='<a id="content_href" class="tab-ctl-x" href="?nid='+F+'" nid="'+F+'" title="'+O+'">':
j==3&&(s+='<a id="content_href" class="tab-ctl-x" href="'+f+"public/news_view/show.php?nid="+F+'" target="_blank" nid="'+F+'" title="'+O+'">'));s+='<img src="'+X+'"';s+=' data-width="'+da+'"';s+=' data-height="'+ea+'"';s+=' alt="'+O+'">';g_web_accessibility==0&&(s+="</a>");s+="</div>";s+='<div class="textBox">';s+='<div class="atitle">';ba=="url"?s+='<a id="content_href" class="loadnews-url-x tab-ctl-x" href="'+Y+'" nid="'+F+'" title="'+O+'" target="_blank">':j==0?s+='<a id="content_href" class="loadnews-x tab-ctl-x" href="javascript:void(0);" nid="'+
F+'" title="'+O+'">':j==1?s+='<a id="content_href" class="tab-ctl-x" href="?nid='+F+'" nid="'+F+'" title="'+O+'">':j==3&&(s+='<a id="content_href" class="tab-ctl-x" href="'+f+"public/news_view/show.php?nid="+F+'" target="_blank" nid="'+F+'" title="'+O+'">');s+=O;s+="</a>";s+="</div>";s+='<div class="adec">';g_web_accessibility==0?ba=="url"?s+='<a id="content_href" class="loadnews-url-x" href="'+Y+'" nid="'+F+'" title="'+O+'" target="_blank">':j==0?s+='<a id="content_href" class="loadnews-x" href="javascript:void(0);" nid="'+
F+'" title="'+O+'">':j==1?s+='<a id="content_href" class="tab-ctl-x" href="?nid='+F+'" nid="'+F+'" title="'+O+'">':j==3&&(s+='<a id="content_href" class="tab-ctl-x" href="'+f+"public/news_view/show.php?nid="+F+'" target="_blank" nid="'+F+'" title="'+O+'">'):s+="<span>";s+=Y;s+=g_web_accessibility==0?"</a>":"</span>";s+="</div>";s+='<div id="news_info" class="ainfo">';g==1&&(m&&(s+=r,s+=":",s+=J,s+=" | "),h&&(s+=A,s+=":",s+=E,s+=" | "),q&&(s+=C,s+=":",s+=K,s+=" | "),o&&(s+=w,s+=":",s+=V,s+=" | "),
t&&(s+=y,s+=":",s+=aa,s+=" | "));s+="</div>";s+="</div>";s+="</li>";L++}s+="</ul>";a.find("#ntb").attr("field",n);a.find("#ntb").attr("flock",p);a.find("#ntb").attr("fval",l);a.find("#ntb").attr("order",u);a.find("#ntb").attr("maxRows",z);a.find("#ntb").attr("pageNum",Q);a.find("#ntb").attr("totalPages",G);a.find("#ntb").html(s);a.find(".loadnews-url-x").unbind("click");a.find(".loadnews-url-x").click(function(){var a=b(this).attr("nid");M(a)});a.find(".loadnews-x").unbind("click");a.find(".loadnews-x").click(function(){var a=
b(this).attr("nid");x(a)});a.find("#div_nav").html(i(Q,G));a.find("#div_nav .btn").unbind("click");a.find("#div_nav .btn").click(function(){var c=b(this).attr("data-page");a.find("#ntb").attr("pageNum",c);k()});a.find("#div_nav .next").unbind("click");a.find("#div_nav .next").click(function(){var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"))+1;c>b-1&&(c=b-1);a.find("#ntb").attr("pageNum",c);k()});a.find("#div_nav .prev").unbind("click");a.find("#div_nav .prev").click(function(){var b=
parseInt(a.find("#ntb").attr("pageNum"))-1;b<=0&&(b=0);a.find("#ntb").attr("pageNum",b);k()});B();c.complete!=null&&D==!1&&(c.complete(e),D=!0);c.update_tabindex!=null&&c.update_tabindex(e)},n=function(){a.find(".imgBox xximg").each(function(){var c=b(this),d=c.attr("data-width"),e=c.attr("data-height"),g=a.find(".imgBox").width(),h=a.find(".imgBox").height(),f=h+1;d==0||e==0?(b(this).css("height",f),b(this).css("width","auto"),setTimeout(function(){var a=c.prop("width"),b=c.prop("height"),b=(h-b)/
2;c.css("left",(g-a)/2);c.css("top",b)},700)):(d*=f/e,e=f,b(this).css("height",e),b(this).css("width","auto"),e=(h-e)/2,c.css("left",(g-d)/2),c.css("top",e))})},B=function(){if(u=="Grid"){if(b(window).width()>767&&a.find(".Grid").length>0){var c=a.find(".Grid").width()/z-25;a.find(".item").css("width",c+"px")}a.find(".item").each(function(){var a=b(this).height(),c=b(this).find(".imgBox").height(),a=a-c-28;a<=0?b(this).find(".textBox").css("height","auto"):b(this).find(".textBox").css("height",a)})}var c=
a.find(".topbanner-x").height()+a.find("#div_news_table_1").height()+a.find(".footer-x").height()+a.find("#div_nav").height(),d=a.width();d-=parseInt(a.find(".news_main").css("padding-left"));d-=parseInt(a.find(".news_main").css("padding-right"));a.find(".news_main").css("width",d);n();a.hasClass("widget-open-in-menu")?setMainHeight(c):setWidgetHeight(a,c);adjustSectionSize()},k=function(){var c=parseInt(a.find("#ntb").attr("pageNum")),d=a.find("#ntb").attr("flock"),g=a.find("#ntb").attr("field"),
h=a.find("#ntb").attr("fval"),m=a.find("#ntb").attr("order"),j=a.find("#ntb").attr("maxRows"),i=a.find("#ntb").attr("keyword"),p={};p.field=g;p.order=m;p.pageNum=c;p.maxRows=j;p.keyword=escape(i);if(h!="")p.fval=h;if(d!="")p.flock=d;p.uid=e;p.tf=l;p.auth_type="user";p.show_brief_content=1;p.show_content_image=1;var o="";a.find(".select-tag").each(function(){if(b(this).val()==""||b(this).val()=="all")return!0;o!=""&&(o+=",");o+=b(this).val()});p.tag=typeof L!="undefined"&&L!=""?L:o;a.find(".loading").css("left",
(a.width()-a.find(".loading").width())/2);a.find(".loading").css("top",50);a.find(".loading").show();b.ajax({url:f+"widget/site_news/news_query_json.php",data:p,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Fail to load site news!")},success:function(b){G(u,b);var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"))+1;b<=1?(a.find("#btnFirst").addClass("disable"),a.find("#btnPrev").addClass("disable"),a.find("#btnNext").addClass("disable"),a.find("#btnLast").addClass("disable")):
(c>1?(a.find("#btnFirst").removeClass("disable"),a.find("#btnPrev").removeClass("disable")):(a.find("#btnFirst").addClass("disable"),a.find("#btnPrev").addClass("disable")),c==b?(a.find("#btnNext").addClass("disable"),a.find("#btnLast").addClass("disable")):(a.find("#btnNext").removeClass("disable"),a.find("#btnLast").removeClass("disable")));a.find(".loading").hide()}})},x=function(c){var g=a.find("#ntb").attr("maxRows");if(popup_content!=void 0)c=f+"widget/site_news/news_pop_content.php?newsId="+
c+"&maxRows_rsResult="+g+"&fh=0&bid="+d+"&uid="+e,popup_content("url","1000px",c,"no");else{var h=0,h=h==0?b(window).height():h,c="news_pop_content.php?newsId="+c+"&maxRows_rsResult="+g+"&fh="+h+"&bid="+d+"&uid="+e;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location=c:(g=b(window).width()-100,h=b(window).height()-100,b(".popup-news .content").empty(),b(".popup-news").css("width",g),b(".popup-news").css("height",h),b(".popup-news").bPopup({content:"iframe",
contentContainer:".content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=b(this).find("iframe");a.css("width",b(this).width()+"px");a.css("height",b(this).height()+"px");a.css("background","url()")}},function(){}))}},M=function(a){b.ajax({url:f+"widget/site_news/update_news_clicks.php",data:"newsId="+a,type:"GET",dataType:"text",timeout:2E4,error:function(){},success:function(){}})};a.find("#ntb").attr("pageNum",0);k();a.find("#ntb thead tr th").unbind("click");
a.find("#ntb thead tr th").click(function(){var a=b(this).attr("hid"),c=b(this).attr("order");b("#ntb").attr("field",a);b("#ntb").attr("fval","");b("#ntb").attr("order",c);b(this).attr("order",c=="DESC"?"ASC":"DESC");k();return!1});a.find("#btnFirst").unbind("click");a.find("#btnFirst").click(function(){if(b(this).hasClass("disablebtn"))return!1;a.find("#ntb").attr("pageNum",0);k()});a.find("#btnPrev").unbind("click");a.find("#btnPrev").click(function(){if(b(this).hasClass("disablebtn"))return!1;
var c=parseInt(a.find("#ntb").attr("pageNum"))-1;c<=0&&(c=0);a.find("#ntb").attr("pageNum",c);k()});a.find("#btnNext").unbind("click");a.find("#btnNext").click(function(){if(b(this).hasClass("disablebtn"))return!1;var c=parseInt(a.find("#ntb").attr("totalPages")),d=parseInt(a.find("#ntb").attr("pageNum"))+1;d>c-1&&(d=c-1);a.find("#ntb").attr("pageNum",d);k()});a.find("#btnLast").unbind("click");a.find("#btnLast").click(function(){if(b(this).hasClass("disablebtn"))return!1;var c=parseInt(a.find("#ntb").attr("totalPages"))-
1;a.find("#ntb").attr("pageNum",c);k()});a.find("#search .button").unbind("click");a.find("#search .button").click(function(){var b=a.find("#search .input").attr("value");a.find("#ntb").attr("pageNum",0);a.find("#ntb").attr("keyword",b);k()});a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(c){var d=b(this).val();if(c.which==13||d=="")a.find("#ntb").attr("pageNum",0),a.find("#ntb").attr("keyword",d),k()});a.find("#search #select_attr, #search #select_unit").unbind("change");
a.find("#search #select_attr, #search #select_unit").change(function(){var c=a.find("#search #select_unit").val()!=void 0?a.find("#search #select_unit").val():-1,d=a.find("#search #select_attr").val()!=void 0?a.find("#search #select_attr").val():-1,e="";c!="-1"&&(e+="unit_"+c);d!="-1"&&(e!=""&&(e+="-"),e+="attr_"+d);b("#ntb").attr("flock",e);k()});a.find(".nav-next-arrow-type").unbind("click");a.find(".nav-next-arrow-type").click(function(){var b=parseInt(a.find("#ntb").attr("totalPages")),c=parseInt(a.find("#ntb").attr("pageNum"));
c!=b-1&&(c+=1,c>b-1&&(c=b-1),a.find("#ntb").attr("pageNum",c),k())});a.find(".nav-prev-arrow-type").unbind("click");a.find(".nav-prev-arrow-type").click(function(){var b=parseInt(a.find("#ntb").attr("pageNum"));b!=0&&(b-=1,b<=0&&(b=0),a.find("#ntb").attr("pageNum",b),k())});a.find(".select-tag").unbind("change");a.find(".select-tag").change(function(){a.find("#ntb").attr("pageNum",0);k()});a.unbind("mouseover");a.mouseover(function(){a.find(".nav-arrow-type").animate({opacity:0.7},200)});a.unbind("mouseleave");
a.mouseleave(function(){a.find(".nav-arrow-type").animate({opacity:0.3},200)});a.find(".nav-arrow-type").animate({opacity:0.3},200);a.unbind("resize");a.resize(function(){B()})};b.fn.widget.air_quality=function(a,c,d,e){d=c.root_path;a.find("#main").width();parseInt(a.find("#main").attr("data-show-col-time"));var i={};i.uid=e;b.ajax({url:d+"widget/air_quality/content_query_json.php",data:i,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(b){var d="";b.result=="success"?
(d+='<span class="site"><span class="title">'+b.data.site+"</span></span>",d+='<div class="info" style="background-color:#'+b.data.color+'">',d+='<span class="aqi">'+b.data.aqi+"</span>",d+='<span class="status">'+b.data.status+"</span>",d+='<span class="update_time">'+b.data.update_time+"</span>",d+="</div>"):d+='<span class="error">'+b.err_message+"</span>";a.find(".qcontent .main").html(d);c.complete!=null&&c.complete(e)}})};b.fn.widget.db_show=function(a,c,d,e,i){var f=c.root_path,d=c.action,
g=e+"_client_id",m=g_storage.get(g),h=a.find("#db_show_main").attr("data-access-token"),q=parseInt(a.find("#db_show_main").attr("data-widget-hr")),o=a.find("#db_show_main").attr("data-widget-cat-field");a.find("#db_show_main").attr("data-widget-cat-value");a.find("#db_show_main").attr("data-widget-search-field");var t=a.find("#db_show_main").attr("data-widget-header-field"),l=a.find("#db_show_main").attr("data-widget-icon-field"),r=a.find("#db_show_main").attr("data-widget-file-field"),A=a.find("#db_show_main").attr("data-widget-title-field"),
C=a.find("#db_show_main").attr("data-widget-clicks-field"),w=a.find("#db_show_main").attr("data-widget-shown-fields"),y=a.find("#db_show_main").attr("data-widget-open-fields"),u=a.find("#db_show_main").attr("data-widget-open-customize-url"),j=a.find("#db_show_main").attr("data-widget-open-customize-label"),z=a.find("#db_show_main").attr("data-widget-open-target"),p=parseInt(a.find("#db_show_main").attr("data-widget-column-count")),L=parseInt(a.find("#db_show_main").attr("data-widget-row-count")),
D=p*L,G=parseInt(a.find("#db_show_main").attr("data-widget-field-layout")),n=a.find("#db_show_main").attr("data-login-permission-scope"),n=n==""?"token":n,B=!1,k=o+","+t+","+l+","+r+","+A+","+w,x=0,M=null,H="",v="";m==""&&(m=e+"."+(new Date).getTime(),g_storage.set(g,m));var M=a.find("#dialog_advance_search").dialog({autoOpen:!1,width:Math.max(600,b(window).width()/2),height:600,modal:!0,position:["middle","middle"],draggable:!1,resizable:!1,buttons:{"\u78ba\u5b9a":function(){N(0);M.dialog("close")}}}),
T=function(){a.find("#person_name").html("");a.find("#option_logout").hide();a.find(".login-x").show();a.find(".login-x #section_login").css("top",Math.min(100,(a.find(".login-x").height()-a.find(".login-x #section_login").height())/2))},W=function(){var a="";b("#"+e+"_boxSearchField").find(".search_keyword_field").each(function(){var c=b(this).find(".keyword-fuzzy-search").prop("checked");b(this).find(".keyword-field").val()!=""&&(a!=""&&(a+=","),a+=b(this).attr("data-field"),a+="<",a+=c?"?"+b(this).find(".keyword-field").val()+
"?":b(this).find(".keyword-field").val())});b("#"+e+"_boxSearchField").find(".search_subitem_field").each(function(){var c=b(this).find(".keyword-field:checked");c.length>0&&(a!=""&&(a+=","),a+=b(this).attr("data-field"),a+="<",c.each(function(d){var e=b(this).attr("data-item-type"),h=!!parseInt(b(this).attr("data-editable"));e=="multi-select"&&(a+="?");a+=b(this).attr("data-title");if(e=="multi-select"||h)a+="?";d!=c.length-1&&(a+=">")}))});a=encodeURIComponent(a);if(a=="")for(var c=(A+","+w).split(","),
d=0;d<c.length;d++)c[d]!=""&&(a!=""&&(a+=","),a+="hr_field."+c[d]);return a},N=function(d){if(!B){H=W();if(o!=""){var g="",g=a.find("ul.tabs").length>0?decodeURIComponent(a.find("ul.tabs li.active").find("a").attr("data-title")):decodeURIComponent(a.find(".data_container").attr("data-title"));H!=""&&(H+=",");H+="hr_item_list."+o+"<"+g}b(".select-search-field-x").each(function(){var a=b(this).attr("data-search-fields"),c=b(this).val();c!="all"&&(H!=""&&(H+=","),H+="hr_item_list."+a+"<"+c+"")});v=a.find("#search .input").val();
var g=get_api_url("hr.items.get"),f={};f.hid=q;f.shown_column=k;f.order="";f.pageNum=d;f.maxRows=D;f.keyword_field=H;f.keyword=v;f.rule="and";f.auth=n=="no"?"token":n;f.token=h;f.uid=e;a.find(".data_container").html("<span class='loading-x'>Loading...</span>");B=!0;b.ajax({url:g,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(a){B=!1;a.status==401&&T()},success:function(b){var d="",g=parseInt(b[0].pageNum);parseInt(b[0].totalRows);var f=parseInt(b[0].totalPages);parseInt(b[0].enable_d_confirm);
d+="";for(var m=1;m<b.length;m++){var p=b[m].id,o=b[m].fields;parseInt(b[m].confirm_permission);parseInt(b[m].d_confirm);var J="";r=="print_item"?(J=g_root_path+"public/hr/print_item.php?auth_type=token&token="+h+"&hid="+q+"&hiid="+p+"&window=1",y!=""&&(J+="&scol="+y)):J=r=="customize_url"?u.indexOf("?")==-1?u+"?hiid="+p+"&uid="+e:u+"&hiid="+p+"&uid="+e:Q(o,r);d+="<div class='item-show'>";d+=G==1?"<div class='top-section'>":"<div class='left-section'>";var i;a:{for(i=0;i<o.length;i++){var k=o[i].infos_count,
n=o[i].infos;if(A==o[i].name){if(k>0){i=n[0].show;break a}break}}i=""}k=Q(o,t);k!=""&&(d+="<img class='item-header",J!=""&&(d+=" item-open-x"),d+="'",d+=" id='item_show_image_gst'",d+=" src='"+k+"'",d+=" data-id='"+p+"'",d+=" data-url='"+J+"'",d+="/>");k=Q(o,l);d+="<a class='";J!=""&&(d+=" item-open-x tab-ctl-x");d+="'";d+=" data-id='"+p+"'";d+=" data-url='"+J+"'";d+=" href='javascript:void(0);'";J!=""&&(d+=" title='"+i,J.indexOf("print_item.php")==-1&&(d+="(\u958b\u555f\u65b0\u8996\u7a97)"));d+=
"'";d+=">";k!=""&&(d+="<img class='item-icon",d+="'",d+=" id='item_show_image_gsh'",d+=" src='"+k+"'",d+=" alt='"+Z+"'",d+="/>");d+="</a>";d+="</div>";d+=G==1?"<div class='bottom-section'>":"<div class='right-section'>";d+="<div class='item-title'>";d+=i;d+="</div>";for(k=0;k<o.length;k++){var n=o[k].type,Z=o[k].title,I=o[k].infos_count,s=o[k].infos,ca=o[k].value;if(w.indexOf(o[k].name)!=-1){d+="<div class='item-field'>";d+="<span class='item-field-label'>";d+=Z;d+="\uff1a";d+="</span>";for(var x=
0;x<I;x++){var F=s[x].show,v=s[x].path;d+=I>1?"<span class='item-field-values'>":"<span class='item-field-value'>";v!=""?(d+="<a href='"+v+"' target='_blank' tabindex='0' class='tab-ctl-x'",d+=" title='"+F+"(\u958b\u555f\u65b0\u8996\u7a97)'",d+=">",d+=F,d+="</a>"):n=="multi-string"?F!=""&&(F=ca.replaceAll("\n","<br>"),d+="<div>"+F+"</div>"):d+=typeof F!="string"?"":F.length>100?F.substring(0,100)+"...":F;d+="</span>"}d+="</div>"}}d+="</div>";J!=""&&(o=j+" "+i,J.indexOf("print_item.php")==-1&&(o+=
"(\u958b\u555f\u65b0\u8996\u7a97)"),d+="<div class='open-section'>",d+="<a class='item-open-x tab-ctl-x' id='item_open'",d+=" href='javascript:void(0);'",d+=" data-id='"+p+"'",d+=" data-url='"+J+"'",d+=" title='"+o+"'",d+=">",d+=j,d+="</a>",d+="</div>");d+="</div>"}if(f>1){b="";b+='<div style="width:100%;float:left">';b+='<div class="navDiv">';g>0?(b+='<a class="nav-load-x" data-page="0">|&lt;</a>',b+='<a class="nav-load-x" data-page="'+(g-1)+'">&lt;&lt;</a>'):b+='<span class="disable">|&lt;</span><span class="disable">&lt;&lt;</span>';
m=!1;for(p=0;p<f;p++)p==g?(b+='<span class="select">'+(p+1)+"</span>",m=!1):Math.abs(p-g)>2&&p!=f-1&&p!=0&&f>10?m==!1&&(b+="<span>...</span>",m=!0):b+='<a class="nav-load-x" data-page="'+p+'">'+(p+1)+"</a>";g<f-1?(b+='<a class="nav-load-x" data-page="'+(g+1)+'">&gt;&gt;</a>',b+='<a class="nav-load-x" data-page="'+(f-1)+'">&gt;|</a>'):b+='<span class="disable">&gt;&gt;</span><span class="disable">&gt;&gt;|</span>';b+="</div>";b+="</div>";d+=b}a.find(".data_container").html(d);U();c.update_tabindex!=
null&&c.update_tabindex(e);R();c.complete!=null&&c.complete(e);B=!1}})}},P=function(a,c,d){var g=get_api_url("hr.item.value.get"),f={};f.hid=q;f.hiid=a;f.field_name=c;f.auth=n=="no"?"token":n;f.token=h;f.uid=e;b.ajax({url:g,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(a){d&&d(a.value)}})},S=function(a){P(a,C,function(c){if(isNaN(c)||c=="")c=0;var d=get_api_url("hr.item.value.set"),g={};g.hid=q;g.hiid=a;g.field_name=C;g.field_value=parseInt(c)+1;g.auth=n=="no"?
"token":n;g.token=h;g.uid=e;b.ajax({url:d,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){},success:function(){}})})},Q=function(a,b){for(var c=0;c<a.length;c++){var d=a[c].infos_count,e=a[c].infos;if(b==a[c].name){if(d>0)return e[0].path!=""&&e[0].path!=void 0?e[0].path:"";break}}return""},U=function(){a.find(".item-open-x").click(function(){var a=b(this).attr("data-id"),c=b(this).attr("data-url");S(a);a=c;if(a.indexOf("print_item.php")!=-1)c=Math.max(b(window).width()-100,1E3)+"px",
popup_content("url",c,a,"yes");else if(z=="_self")window.location=a;else if(z=="_popup")popup_content("url",b(window).width()+"px",a,"yes");else if(z=="_inframe"||z=="_inframe2"){if(c=window.location.href,c=c.substring(0,c.indexOf("?")),c!="")a=c+"?in="+encodeURIComponent(a),z=="_inframe"?window.location=a:window.open(a)}else window.open(a)});a.find(".nav-load-x").click(function(){N(b(this).attr("data-page"))})},g=function(a,c){var d=get_api_url("hr.permission.get"),e={};e.auth=n=="no"?"token":n;
e.hid=q;e.token=a;b.ajax({url:d,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){T()},success:function(){s(a,c)}})},s=function(d,g){var h=get_api_url("userinfo.get"),f={};f.auth=n=="no"?"token":n;f.token=d;b.ajax({url:h,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){T()},success:function(b){a.find("#person_name").html(b.name);a.find("#option_logout").show();a.find(".login-x").hide();N(0);g&&g(b);c.complete!=null&&c.complete(e)}})},R=function(){var c=0,c=a.find(".dbcontent").width();
parseInt(a.find(".main").css("padding-left"));parseInt(a.find(".main").css("padding-right"));var d=p;c>328&&c<=628?d=2:c<=328&&(d=1);a.find(".main").css("width","100%");a.find(".item-show").css("width",c/d-28);var e=300;a.find(".item-show").each(function(){var a=0,a=G==1?b(this).find(".top-section").height()+b(this).find(".bottom-section").height()+10+50:Math.max(b(this).find(".right-section").height(),200)+50;a>e&&(e=a)});a.find(".item-show").css("height",e);c=a.find(".header").height()+a.find(".dbcontent").height()+
a.find(".footer").height();a.find(".dbshowcontent").is(":visible")&&(c+=a.find(".dbshowcontent").height());x!=c&&(x=c,a.hasClass("widget-open-in-menu")?setMainHeight(x):setWidgetHeight(a,x),adjustSectionSize())};if(d=="onLoginHandler")return h=typeof i=="undefined"?"":i,log("setToken: "+h+" and start to query person info"),g(h,function(){h!=""&&(log(storageTokenName+" = "+h),g_storage.set(storageTokenName,h));window.location.reload()}),this;a.find("ul.tabs li").eq(0).addClass("active");a.find(".tab_content").hide().eq(0).show();
a.find("ul.tabs li").click(function(){var c=b(this),d=c.find("a").attr("href");c.find("a").attr("cid");d=d.substring(d.indexOf("#"),d.length);c.addClass("active").siblings(".active").removeClass("active");a.find(d).stop(!1,!0).fadeIn().siblings().hide();a.find(".footer").show();N(0);return!1}).find("a").focus(function(){});a.find("#search #sa").unbind("click");a.find("#search #sa").click(function(){N(0)});a.find("#search #ads").unbind("click");a.find("#search #ads").click(function(){M.dialog("open")});
a.find("#search .input").unbind("keyup");a.find("#search .input").keyup(function(b){g_web_accessibility!=1&&(v=a.find("#search .input").val(),(b.which==13||v=="")&&N(0))});a.find(".select-search-field-x").unbind("change");a.find(".select-search-field-x").change(function(){g_web_accessibility!=1&&N(0)});a.find("#btn_login_w").click(function(){var a=f+"config/login.php",b=encodeURI("hid="+q),a=a+"?response_type="+(n=="token"?"token":"session")+"&client_id="+m+"&permission_scope=hr&scope=userinfo.get,hr.item.create,hr.items.get,hr.item.set,hr.item.get,hr.reviewer.get,hr.item.display.create,hr.items.related.value.get,hr.permission.get,hr.item.input.data.get,hr.item.update,hr.item.temp.get,hr.item.temp.create,hr.item.temp.update&data="+
b+"&continue="+encodeURIComponent(f+"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+e);window.open(a,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300")});a.find("#btn_logout").click(function(){if(n=="token")g_storage.set(storageTokenName,""),window.location.reload();else{var a=get_api_url("user.logout"),c={};c.auth=n;b.post(a,c,function(){window.location.reload()})}});a.resize(function(){R()});n=="no"?(a.find(".dbshowcontent").hide(),N(0)):(a.find(".dbshowcontent").show(),
g(h,null))};b.fn.widget.db_step=function(a,c,d,e,i){var f=c.root_path,d=c.action,g=e+"_client_id",m=e+"_token",h=parseInt(a.find("#db_step_main").attr("data-widget-hr")),q=a.find("#db_step_main").attr("data-widget-layout"),o=!!parseInt(a.find("#db_step_main").attr("data-open-input")),t=parseInt(a.find("#db_step_main").attr("data-hide-data-list")),l=a.find("#db_step_main").attr("data-confirm-template"),r=a.find("#db_step_main").attr("data-show-confirm-content"),A=a.find("#db_step_main").attr("data-finish-template"),
C=a.find("#db_step_main").attr("data-show-finish-content"),w=parseInt(a.find("#db_step_main").attr("data-related-hr")),y=a.find("#db_step_main").attr("data-shown-column"),u=parseInt(a.find("#db_step_main").attr("data-step-count")),j=!!parseInt(a.find("#db_step_main").attr("data-widget-enable-all-steps")),z=g_storage.get(g),p=g_storage.get(m),L=0,D=0,G=!1,n=a.find("#db_step_main").attr("data-login-permission-scope"),n=n==""?"token":n,B=-1,k=-1,x=-1,M=null,H=!0,v=-1;if(h<=0)a.find(".readme").html("<li>\u5c1a\u672a\u8a2d\u5b9a\u8cc7\u6599\u5eab</li>");
else{z==""&&(z=e+"."+(new Date).getTime(),g_storage.set(g,z));var T=function(){o||(a.find("#person_name").html(""),a.find("#option_logout").hide(),a.find(".login-x").show(),a.find(".login-x #section_login").css("top",Math.min(100,(a.find(".login-x").height()-a.find(".login-x #section_login").height())/2)))},W=function(){var c=0,d=0;a.find(".current").find(".signup-column").each(function(){var a=b(this).height();if(a==0)return!1;a+=parseInt(b(this).css("padding-top"));a+=parseInt(b(this).css("padding-bottom"));
c+=a});c+=a.find(".current .section-desc-x").height()+150;a.find(".content").css("height",c);d=a.find(".header").height()+a.find(".dbstepcontent").height()+a.find(".footer").height();D!=d&&(D=d,a.hasClass("widget-open-in-menu")?(D+=20,setMainHeight(D)):setWidgetHeight(a,D),adjustSectionSize())},N=function(){var c=a.find(".user_input"),d=function(a){if(typeof a=="undefined"||a=="")return null;a=decodeURIComponent(a);try{a=JSON.parse(a)}catch(b){return null}return a},e=function(a,d){if(typeof d=="undefined")return!0;
var e=a=="or"?1:d.length,g=0,h=!1,f=function(a,b,c){if(c=="="&&a==b)return!0;else if(c==">"&&a>b)return!0;else if(c==">="&&a>=b)return!0;else if(c=="<"&&a<b)return!0;else if(c=="<="&&a<=b)return!0;else if(c=="!="&&a!=b)return!0;return!1};if(d.length<=0)return!0;for(var m=0;m<d.length;m++){var p=d[m].field_name,o=d[m].field_value,k=d[m].condition;p=="hr_account_permission"?f(v,o,k)&&g++:c.each(function(){var a=b(this).attr("data-id"),c=b(this).attr("data-type"),d="";if(a!=p)return!0;c=="single-select"?
b(this).find("input[type=radio]").each(function(){var c=b(this).attr("data-id"),e=b(this).attr("data-title"),g=b(this).attr("data-editable");b(this).prop("checked")&&(d=e,g==1&&(d+=",",d+=b("#"+a).find("#input_subitem_"+c).val()))}):c=="combobox"?b(this).find("option").each(function(){var a=b(this).attr("data-title");b(this).prop("selected")&&(d=a)}):d=b(this).val();f(d,o,k)&&g++;return!1});if(g>=e){h=!0;break}}return h};c.each(function(){var a=b(this).attr("data-id"),g=b(this).attr("data-type"),
h=b(this).hasClass("manual-user-input-x");if(g=="computation"&&h==!1){var g=b(this).attr("data-formula"),h=b(this).attr("data-basefield"),f=b(this).attr("data-basefield-computation"),m=b(this).attr("data-field"),p=b(this).attr("data-field-computation"),o=b(this).attr("data-number-of-digits");m!=void 0&&m!=""&&(m=m.split(","),b(this).val(doComputationField(g,h,f,m,p,c,o)))}if(b("#"+a).hasClass("user_unique_col"))return!0;g=b(this).attr("data-display-rule");h=d(g);if(h!=null)g=h.match,h=h.rules,g=e(g,
h),h=b("#"+a),f=b("#input_"+a),typeof h=="undefined"||typeof f=="undefined"||(g&&h.hasClass("signup-column-hidden")?(h.show(),h.removeClass("signup-column-hidden")):!g&&!h.hasClass("signup-column-hidden")&&(h.hide(),h.addClass("signup-column-hidden"),f.val("")));g=b(this).attr("data-must-rule");h=d(g);if(h!=null)g=h.display_match,h=h.display_rules,g=e(g,h),h=b("#"+a),a=b("#input_"+a),typeof h!="undefined"&&(g?(h.find(".input-must-text").show(),a.attr("data-must","true")):g||(h.find(".input-must-text").hide(),
a.attr("data-must","false")))})},P=function(){var c=a.find("a[href$='#finish']").parent("li");if(!c.hasClass("disabled")&&!G){if(check_file_is_uploading())return alert("\u6a94\u6848\u6b63\u5728\u4e0a\u50b3\u4e2d\uff0c\u8acb\u7b49\u5f85\u4e0a\u50b3\u5b8c\u6210!"),!1;if(!check_file_is_complete())return alert("\u6a94\u6848\u4e0a\u50b3\u672a\u5b8c\u6210\uff0c\u8acb\u91cd\u65b0\u4e0a\u50b3\u6a94\u6848!"),!1;var d=g_storage.get(m),e=get_user_input_array_result(a.find(".body"));G=!0;var g=get_api_url("hr.item.create"),
f={};f.auth=n;f.token=o?"db_step_access_token":d;f.hid=h;f.data=JSON.stringify(e);f.upload_column=gen_upload_value();if(B>0)g=get_api_url("hr.item.update"),f.hiid=B;f.temp=k;c.addClass("disabled");b.ajax({url:g,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(a){a.status==701?alert("\u6c92\u6709\u586b\u5beb\u552f\u4e00\u6b04\u4f4d\u5167\u5bb9\uff01"):a.status==702?alert("\u8cc7\u6599\u5df2\u7d93\u5b58\u5728\uff01"):a.status==704?alert("\u6b64\u5e33\u865f\u6c92\u6709\u5efa\u7acb\u8cc7\u6599\u7684\u6b0a\u9650\uff01"):
a.status==706?alert("\u55ae\u4e00\u5e33\u865f\u50c5\u53ef\u8f38\u5165\u55ae\u7b46\u8cc7\u6599\uff0c\u6b64\u5e33\u865f\u5df2\u8f38\u5165\u904e\u8cc7\u6599\uff01"):alert("\u5efa\u7acb\u8cc7\u6599\u5931\u6557\uff01("+a.status+")");G=!1;c.removeClass("disabled")},success:function(a){G=!1;c.removeClass("disabled");a=a.id;C==1?F(a):(alert(B>0?"\u4fee\u6539\u8cc7\u6599\u5b8c\u6210!":"\u5efa\u7acb\u8cc7\u6599\u5b8c\u6210!"),window.location.reload())}})}},S=function(){var c=a.find("a[href$='#savetemp']").parent("li");
if(!c.hasClass("disabled")&&!G){if(check_file_is_uploading())return alert("\u6a94\u6848\u6b63\u5728\u4e0a\u50b3\u4e2d\uff0c\u8acb\u7b49\u5f85\u4e0a\u50b3\u5b8c\u6210!"),!1;if(!check_file_is_complete())return alert("\u6a94\u6848\u4e0a\u50b3\u672a\u5b8c\u6210\uff0c\u8acb\u91cd\u65b0\u4e0a\u50b3\u6a94\u6848!"),!1;var d=g_storage.get(m),e=get_user_input_array_result(a.find(".body"));G=!0;var g=get_api_url("hr.item.temp.create"),f={};f.auth=n;f.token=o?"db_step_access_token":d;f.hid=h;f.data=JSON.stringify(e);
f.upload_column=gen_upload_value();if(k>0)g=get_api_url("hr.item.temp.update"),f.hitid=k;c.addClass("disabled");b.ajax({url:g,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(a){a.status==701?alert("\u6c92\u6709\u586b\u5beb\u552f\u4e00\u6b04\u4f4d\u5167\u5bb9\uff01"):a.status==702?alert("\u8cc7\u6599\u5df2\u7d93\u5b58\u5728\uff01"):a.status==704?alert("\u6b64\u5e33\u865f\u6c92\u6709\u5efa\u7acb\u8cc7\u6599\u7684\u6b0a\u9650\uff01"):a.status==706?alert("\u55ae\u4e00\u5e33\u865f\u50c5\u53ef\u8f38\u5165\u55ae\u7b46\u8cc7\u6599\uff0c\u6b64\u5e33\u865f\u5df2\u8f38\u5165\u904e\u8cc7\u6599\uff01"):
alert("\u66ab\u5b58\u8cc7\u6599\u5931\u6557\uff01("+a.status+")");G=!1;btn_finish.removeClass("disabled")},success:function(){G=!1;alert(k>0?"\u4fee\u6539\u66ab\u5b58\u8cc7\u6599\u5b8c\u6210!":"\u66ab\u5b58\u8cc7\u6599\u5b8c\u6210!");window.location.reload()}})}},Q=function(a,c){var d=get_api_url("hr.item.temp.get"),e={};e.auth=n;e.token=a;e.hid=h;b.ajax({url:d,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){c&&c(-1)},success:function(a){c&&c(a.id)}})},g=function(a,c){var d=get_api_url("hr.permission.get"),
e={};e.auth=n;e.hid=h;e.token=a;b.ajax({url:d,data:e,type:"POST",dataType:"json",timeout:2E4,error:function(){T()},success:function(b){v=b.level;U(a,c)}})},U=function(d,g){var h=get_api_url("userinfo.get"),f={};f.auth=n;f.token=d;b.ajax({url:h,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(){o?(a.find(".readme").hide(),a.find(".signup-column").removeClass("signup-column-hidden"),a.find(".signup-column").removeClass("signup-column-disabled"),a.find("a[href='#savetemp']").parents("li").hide(),
L=setInterval(function(){N();W()},500),R("",function(){init_reviewer("");init_uploader(a.find(".body"))})):T()},success:function(b){a.find("#person_name").html(b.name);a.find("#option_logout").show();a.find(".login-x").hide();a.find(".signup-column").removeClass("signup-column-hidden");a.find(".signup-column").removeClass("signup-column-disabled");a.find(".signup-column").attr("data-token",p);L=setInterval(function(){N();W()},500);Q(p,function(b){k=b;R(p,function(){init_reviewer(d);init_uploader(a.find(".body"))})});
g&&g(b);c.complete!=null&&c.complete(e)}})},s=function(a,c){var d=b("#input_"+a),e="<input ",g=d.prop("attributes");typeof g!="undefined"&&(b.each(g,function(){this.name.indexOf("data-")==0?e+=this.name+"='"+this.value+"' ":this.name.indexOf("class")==0?e+="class='user_input' ":this.name.indexOf("id")==0?e+="id='input_"+a+"' ":this.name.indexOf("name")==0&&(e+="id='input_"+a+"' ")}),e+=" value='",e+=encodeURIComponent(c),e+="' type='hidden'>",d.replaceWith(e))},R=function(c,d){var e=get_api_url("hr.item.input.data.get"),
g={};g.auth=n;g.token=c;g.hid=h;g.hiid=B;g.copy_hiid=x;g.related_hid=w;g.query_latest_one=o?0:x==-1?1:0;g.temp=k;b.ajax({url:e,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){d&&d(json_data)},success:function(c){var e=c[0].data,g=c[0].resource_path,h=c[0].one_data_per_account,f=c[0].data_list_count,m=c[0].editable,p=c[0].latest_update_time,k=c[0].archive;B=c[0].hr_item_id;log("load_data: hr_item_id="+B);B==-1&&!o?(a.find("#option_log_list").hide(),a.find("a[href='#savetemp']").parents("li").show(),
a.find("a[href='#savetemp']").parents("li").addClass("disabled")):(a.find("#option_log_list").show(),a.find("a[href='#savetemp']").parents("li").hide());f>=1&&!h==0&&t!=1&&k==0&&(a.find("#option_data_list").show(),t==2?(a.find("#option_data_list_sec1").hide(),a.find("#option_data_list_sec2").show()):t==3&&(a.find("#option_data_list_sec1").show(),a.find("#option_data_list_sec2").hide()));for(h=0;h<e.length;h++){var i=e[h].type,f=e[h].name,j=decode_uri_string(e[h].value),n=e[h].subitem,k=e[h].disabled;
if(i=="single-select")for(i=0;i<n.length;i++){var j=n[i].name,l=n[i].value,q=n[i].editable;q==1&&(q=l.split(","),l=q[0],subitem_input_value=q.length>1?decodeURIComponent(q[1]):"",a.find("#"+f+" #input_subitem_"+j).val(subitem_input_value),a.find("#"+f+" #input_subitem_"+j).prop("readonly",k));a.find("#"+f+" #input_"+j).prop("checked",l=="true"?!0:!1);a.find("#"+f+" #input_"+j).prop("disabled",k)}else if(i=="multi-select")for(i=0;i<n.length;i++)j=n[i].name,l=n[i].value,q=n[i].editable,q==1&&(q=l.split(","),
l=q[0],subitem_input_value=q.length>1?decodeURIComponent(q[1]):"",a.find("#"+f+" #input_subitem_"+j).val(subitem_input_value),a.find("#"+f+" #input_subitem_"+j).prop("readonly",k)),a.find("#input_"+f+"[data-id='"+j+"']").prop("checked",l=="true"?!0:!1),a.find("#input_"+f+"[data-id='"+j+"']").prop("disabled",k);else if(i=="combobox"){for(i=0;i<n.length;i++)if(j=n[i].name,l=n[i].value,q=decodeURIComponent(n[i].title),l=="true"){a.find("#input_"+f).val(q);break}a.find("#input_"+f).prop("disabled",k)}else if(i==
"date_between"||i=="datetime_between")a.find("#input_"+f+"_start").prop("disabled",k),a.find("#input_"+f+"_end").prop("disabled",k),j!=""&&(q=j.split(","),a.find("#input_"+f+"_start").val(q[0]),a.find("#input_"+f+"_end").val(q[1]));else if(i=="associated-menu"){for(i=0;i<n.length;i++)j=n[i].name,l=n[i].value,q=n[i].parent,l=="true"&&(l=q=="root_menu"?f:q,a.find("#subitem_input_"+l+" option[data-id='"+j+"']").prop("selected",!0),change_associated_option(f,l));a.find("#"+f+" .user_subitem_input").prop("disabled",
k)}else if(i=="upload"){q="list";if(e[h].upload_setting!="undefined"&&(i=decodeURIComponent(e[h].upload_setting),i=b.parseJSON("["+i+"]"),typeof i[0]!="undefined"&&typeof i[0].listview!=="undefined"))q=i[0].listview;a.find("#input_"+f).prop("data-disable-upload",k);a.find("#list_"+f).empty();if(j!=""){j=parse_json_string(j);for(i=0;j!=null&&i<j.length;i++){var n=(new Date).getTime()*(Math.floor(Math.random()*1E3)+1),r=j[i].file,x=g+"/"+f+"/"+r,l="";l+='<li class="qq-upload-success '+q+'" id="'+n+
'">';l+='<a href="';l+=x;l+='" target="_blank">';if(q=="thumb"){var y=/[.]/.exec(r)?String(/[^.]+$/.exec(r)).toLowerCase():void 0;l+='<div class="fileDiv qq-upload-file"';l+=' id="'+y+'"';l+=' data-uid="'+n+'"';l+=' data-filename="'+r+'"';l+=' title="'+r+'"';l+=">";l+='<span class="fileNameDiv">';l+=r;l+="</span>";if(y=="jpg"||y=="jpeg"||y=="png"||y=="gif")l+='<img class="qq-upload-thumb "',l+=' alt="'+r+'"',l+=' src="'+x+'">';l+="</div>"}else l+='<span class="qq-upload-file" data-uid="'+n+'" data-filename="'+
r+'">',l+=r,l+="</span>";l+="</a>";k||(l+='<a class="qq-upload-remove" href="#" onclick="removeattach('+n+');">\u79fb\u9664</a>');l+="</li>";a.find("#list_"+f).append(l)}}}else if(i=="url"){q=[];if(j!="")try{q=JSON.parse(j)}catch(w){q=[]}a.find("#list_"+f).empty();for(i=0;i<q.length;i++)n=q[i].uid,r=q[i].name,x=q[i].url,l="",l+='<li class="url-field" id="'+n+'">',l+='<a href="',l+=x,l+='" target="_blank">',l+=r,l+="</a>",k||(l+='<a class="qq-url-edit" href="javascript:void(0);" onclick="do_edit_url(\''+
f+"', '"+n+"')\";>\u7de8\u8f2f</a>",l+='<a class="qq-url-remove" href="javascript:void(0);" onclick="do_remove_url(\''+f+"', '"+n+"')\";>\u79fb\u9664</a>"),l+="</li>",a.find("#list_"+f).append(l);a.find("#input_"+f).val(j);k==!0&&a.find("#input_add_url_"+f).addClass("disabled")}else if(i=="table"){i=e[h].table_attr;j=parseInt(i.col);l=parseInt(i.row);q=i.type;if(i.row_type=="dynamic"){r="input_"+f;for(x=2;x<l+1;x++){y="<tr>";for(i=0;i<j;i++){var u="table_pos_"+f+"_"+x+"x"+i;y+="<td>";y+="<input id='"+
u+"' class='fieldInput";q=="number"&&(y+=" numInput");y+="' value=''";y+="</td>"}y+="</tr>";a.find("#"+r+" tr:last").after(y)}a.find("#"+r).prop("data-table_row",l)}if(n!=null)for(i=0;i<n.length;i++)j=n[i].name,q=decodeURIComponent(n[i].title),a.find("#"+j).val(q);a.find("#"+f+" .fieldInput").prop("readonly",k);a.find("#"+f+" .fieldInput").prop("disabled",k)}else i=="general-database"?(i=e[h].show_value,i!=""&&a.find("#input_select_db_data_"+f).text(i),a.find("#input_"+f).val(j),k==!0&&(a.find("#input_select_db_data_"+
f).addClass("disabled"),a.find("#input_delete_db_data_"+f).hide()),j==""&&a.find("#input_delete_db_data_"+f).hide()):i=="reviewer"?(i=e[h].show_value,i!=""&&a.find("#input_select_reviewer_"+f).text(i),a.find("#input_"+f).val(j),k==!0&&a.find("#input_select_reviewer_"+f).addClass("disabled")):i=="multi-string"||i=="text-editor"?(k?(s(f,j),a.find("#input_"+f).before(j)):a.find("#input_"+f).val(j),a.find("#input_"+f).prop("disabled",k),a.find("#input_"+f).prop("readonly",k)):i=="textblock"?(a.find("#input_"+
f).prop("checked",j=="true"?!0:!1),a.find("#input_"+f).prop("disabled",k)):i=="computation"?(k=e[h].computation_attr,typeof k!="undefined"&&parseInt(k.manual_user_input)==1&&b("#chk_enable_manual_input_"+f).prop("checked",!0),b("#"+f).find("#input_"+f).val(j)):a.find("#input_"+f).val(j)}a.find("#latest_update_time").text(p);H=m==1?!0:!1;a.find("#db_step_main").steps("setStep",0);a.find(".user_input").focusout(function(){a.find("#message_box").hide()});a.find(".user_input").keyup(function(){var c=
b(this).attr("maxlength");b(this).attr("data-type");var d=b(this);if(typeof c!="undefined"){var e=d.position().left+50,d=d.position().top-50;log("show message_box left="+e+", top="+d);var f=b(this).val().length;a.find("#message_box").html("\u8f38\u5165\u5b57\u6578 : "+f+" / "+c);a.find("#message_box").css("left",e);a.find("#message_box").css("top",d);a.find("#message_box").show()}H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});a.find(".user_input").change(function(){var c=
b(this).attr("data-id");update_default_value(null,c,B<=0?!0:!1);H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});a.find(".user_input input").change(function(){var c=b(this).attr("data-id");update_default_value(null,c,B<=0?!0:!1);H&&a.find("a[href='#savetemp']").parents("li").removeClass("disabled")});addEnableComputationManualInputEventListener();d&&d(c)}})},I=function(){var c=g_storage.get(m),d=get_api_url("hr.item.display.create"),e=get_user_input_xml_result(a.find(".body")),
f={};f.auth=n;f.token=o?"db_step_access_token":c;f.hid=h;f.data=e;f.template=l;b.ajax({url:d,data:f,type:"POST",dataType:"json",timeout:2E4,error:function(a){alert("\u53d6\u5f97\u8cc7\u6599\u5931\u6557\uff01("+a.status+")")},success:function(b){a.find(".confirm-x #section_confirm #fcontent").html(b.data);a.find(".confirm-x").show()}})},F=function(c){var d=g_storage.get(m),e=get_api_url("hr.item.display.create"),f={};f.auth=n;f.token=o?"db_step_access_token":d;f.hid=h;f.hiid=c;f.template=A;b.ajax({url:e,
data:f,type:"POST",dataType:"json",timeout:2E4,error:function(a){alert("\u53d6\u5f97\u8cc7\u6599\u5931\u6557\uff01("+a.status+")")},success:function(b){a.find(".finish-x #section_finish #fcontent").html(b.data);a.find(".finish-x").show()}})};if(d=="onLoginHandler"){if(!b.isReady)return alert("widget is not ready!"),this;p=typeof i=="undefined"?"":i;log("setToken: "+p+" and start to query person info");g(p,function(){p!=""&&(log(m+" = "+p),g_storage.set(m,p));window.location.reload()});return this}a.find("#db_step_main").steps({headerTag:"h3",
bodyTag:"section",transitionEffect:"fade",autoFocus:!0,enableAllSteps:j,enablePagination:!0,enableSaveTempButton:!0,stepsOrientation:q,labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"\u5b8c\u6210",next:"\u4e0b\u4e00\u6b65",previous:"\u4e0a\u4e00\u6b65",loading:"Loading ...",savetemp:"\u66ab\u5b58"},onStepChanging:function(b,c,d){return c>d?!0:check_user_input(a.find("section.current"))},onStepChanged:function(b,c){D=0;setTimeout(W,1E3);u==c+1&&(H?a.find("a[href='#finish']").parents("li").show():
a.find("a[href='#finish']").parents("li").hide());return!0},onFinishing:function(){return check_user_input(a.find("section.current"))},onFinished:function(){return r==1?(I(),!1):P()},saveTemp:function(){return S()}});a.find("#btn_login_w").click(function(){var a=f+"config/login.php",b=encodeURI("hid="+h),a=a+"?response_type="+(n=="token"?"token":"session")+"&client_id="+z+"&permission_scope=hr&scope=userinfo.get,hr.item.create,hr.items.get,hr.item.set,hr.item.get,hr.reviewer.get,hr.item.display.create,hr.items.related.value.get,hr.permission.get,hr.item.input.data.get,hr.item.update,hr.item.temp.get,hr.item.temp.create,hr.item.temp.update&data="+
b+"&continue="+encodeURIComponent(f+"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+e);window.open(a,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300")});a.find("#btn_logout").click(function(){clearInterval(L);if(n=="token")g_storage.set(m,""),window.location.reload();else{var a=get_api_url("user.logout"),c={};c.auth=n;b.post(a,c,function(){window.location.reload()})}});a.find("#btn_ok_confirm").click(function(){a.find(".confirm-x").hide();P()});a.find("#btn_cancel_confirm").click(function(){a.find(".confirm-x").hide()});
a.find("#btn_close_finish").click(function(){a.find(".finish-x").hide();window.location.reload()});a.find("#data_list").click(function(){M.data("action","").dialog("open")});a.find("#copy_data_list").click(function(){M.data("action","create_copy").dialog("open")});M=a.find("#dialog_data_list").dialog({autoOpen:!1,width:Math.min(b(window).width()-50,800),modal:!0,position:["middle",5],open:function(){var c=b(this).data("action"),d=g_storage.get(m),f=get_api_url("hr.items.get"),g={};g.hid=h;g.pageNum=
0;g.maxRows=10;g.uid=e;g.shown_column=y;g.auth=n;g.token=d;g.field="hr_item_date";g.order="DESC";b.ajax({url:f,data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){M.dialog("close")},success:function(e){if(e.length<=0)M.dialog("close");else{var f=e[0].field_array,g="";g+=c=="create_copy"?'<p style="font-size:14px">\u4ee5\u4e0b\u662f\u60a8\u586b\u5beb\u904e\u5171'+(e.length-1)+"\u7b46\u8cc7\u6599\uff0c\u8acb\u9078\u53d6\u8981\u8f09\u5165\u7684\u526f\u672c\u8cc7\u6599:</p>":'<p style="font-size:14px">\u4ee5\u4e0b\u662f\u60a8\u586b\u5beb\u904e\u5171'+
(e.length-1)+"\u7b46\u8cc7\u6599\uff0c\u8acb\u9078\u53d6\u4fee\u6539\u8cc7\u6599\u6216\u95dc\u9589\u8996\u7a97\u586b\u5beb\u65b0\u8cc7\u6599:</p>";g+='<table border="1" cellpadding="5" cellspacing="1" style="width:100%;border-collapse: collapse;">';g+='<tr style="background-color:#ccc">';g+='<td><div style="width:35px">\u9078\u53d6</div></td>';g+="<td>\u7de8\u865f</td>";for(var h=0;h<f.length;h++)g+="<td>"+f[h].title+"</td>";g+="<td>\u5efa\u7acb\u6642\u9593</td>";g+="</tr>";for(h=1;h<e.length;h++)if(f=
e[h].fields,typeof f!="undefined"){g+="<tr";B==e[h].id&&c!="create_copy"&&(g+=' style="background-color:#b0dde7"');g+=">";g+="<td>";g+=B==e[h].id&&c!="create_copy"?"\u5df2\u9078":c=="create_copy"?'<a class="open-copy-data-list" href="javascript:void(0)" data-id="'+e[h].id+'" style="cursor:pointer;color:#0000FF">\u9078\u53d6</a>':'<a class="open-data-list" href="javascript:void(0)" data-id="'+e[h].id+'" style="cursor:pointer;color:#0000FF">\u9078\u53d6</a>';g+="</td>";g+="<td>";g+=e[h].id;g+="</td>";
for(var i=0;i<f.length;i++){g+="<td>";for(var m=0;m<f[i].infos.length;m++)g+=decodeURIComponent(f[i].infos[m].show);g+="</td>"}g+="<td>";g+=e[h].date;g+="</td>";g+="</tr>"}g+="</table>";b("#dialog_data_list").empty();b("#dialog_data_list").html(g);b(".open-data-list").click(function(){x=-1;B=b(this).attr("data-id");R(d,function(){init_reviewer(d);init_uploader(a.find(".body"));M.dialog("close")})});b(".open-copy-data-list").click(function(){x=b(this).attr("data-id");B=-1;R(d,function(){init_reviewer(d);
init_uploader(a.find(".body"));M.dialog("close")})})}}})},buttons:{"\u95dc\u9589":function(){M.dialog("close")}},close:function(){}});a.resize(function(){var a=g_storage.get(m);n=="token"&&a==""&&T();W()});a.find("a[href='#savetemp']").parents("li").hide();a.find("#option_log_list").hide();a.find("#option_data_list").hide();attach_num_with_decimalinput_checker("numInput");init_datetime(a.find(".body"));init_text_editor(a.find(".body"),"");init_uploader(a.find(".body"));init_url_setting();g(p,null)}};
b.fn.widget.countdown=function(a,c,d,e){var i=a.find("#countdown_main").attr("data-title"),f=parseInt(a.find("#countdown_main").attr("data-end-year")),g=parseInt(a.find("#countdown_main").attr("data-end-month")),m=parseInt(a.find("#countdown_main").attr("data-end-day")),h=parseInt(a.find("#countdown_main").attr("data-end-hour")),q=parseInt(a.find("#countdown_main").attr("data-end-minute")),o=parseInt(a.find("#countdown_main").attr("data-show-day")),t=parseInt(a.find("#countdown_main").attr("data-show-hour")),
l=parseInt(a.find("#countdown_main").attr("data-show-min")),r=parseInt(a.find("#countdown_main").attr("data-show-sec")),A=0;a.resize(function(){});A=setInterval(function(){var a="&#26178;",c="&#20998;",d="&#31186;",u=new Date(f,g-1,m,h,q,0),j=function(a,b){var c=String(a);if(c)for(;c.length<b;)c="0"+c;return c};today=new Date;myMsec=u.getTime()-today.getTime();time0=Math.floor(myMsec/864E5);myMsec-=time0*864E5;time1=Math.floor(myMsec/36E5);myMsec-=time1*36E5;time2=Math.floor(myMsec/6E4);myMsec-=time2*
6E4;time3=Math.floor(myMsec/1E3);myMsec-=time3*1E3;time4=Math.floor(myMsec/10);var z=time0;"5"==2?a=c=d=time1=time2=time3=time4="":"5"==3?c=d=time2=time3=time4="":"5"==4?d=time3=time4="":"5"==5&&(time4="");time1=j(time1,2);time2=j(time2,2);time3=j(time3,2);time4=j(time4,2);myMsec=today.getTime()-u.getTime();time00=Math.floor(myMsec/864E5);myMsec-=time00*864E5;time01=Math.floor(myMsec/36E5);myMsec-=time01*36E5;time02=Math.floor(myMsec/6E4);myMsec-=time02*6E4;time03=Math.floor(myMsec/1E3);myMsec-=time03*
1E3;time04=Math.floor(myMsec/10);"5"==2?time01=time02=time03=time04="":"5"==3?time02=time03=time04="":"5"==4?time03=time04="":"5"==5&&(time04="");time01=j(time01,2);time02=j(time02,2);time03=j(time03,2);time04=j(time04,2);u=b("."+e+" #counter");u.empty();time0>=0?(j="",j+='<p class="count_display">',j+='<span class="title">'+i+"</span>",o==1&&(j+='<span class="time">'+z+"</span>",j+="&#22825;"),t==1&&(j+='<span class="time">'+time1+"</span>",j+=a),l==1&&(j+='<span class="time">'+time2+"</span>",j+=
c),r==1&&(j+='<span class="time">'+time3+"</span>",j+=d),j+="</p>",u.append(j)):(j(time1,2),u.append('<p class="count_display">'),u.append('<span class="title">'+i+"</span>"),u.append('<span class="time">'+f+"/"+j(g,2)+"/"+j(m,2)+" "+j(h,2)+":"+j(q,2)+"</span>"),u.append("<p>\u5012\u6578\u6642\u9593\u5df2\u7d50\u675f</p>"),u.append("</p>"),clearInterval(A))},10);c.complete!=null&&c.complete(e)};b.fn.widget.text_marqueexx=function(a,c,d,e){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed"));
a.resize(function(){});var f=function(){function c(){w=!w;var a=d.position().top/f,a=(C?a-1+g.length:a+1)%g.length;d.animate({top:a*f},l,function(){a==g.length-1?d.css("top",g.length/2*f-f):a==0&&d.css("top",g.length/2*f);w=!w});r=setTimeout(c,A)}var d=a.find("div#abgne_marquee ul"),e=a.find("div#abgne_marquee");if(!(d.find("li").length<=1)){var g=d.append(d.html()).children(),f=a.find("div#abgne_marquee").height()*-1,l=i,r,A=3E3+l,C=0,w=!1;d.css("top",g.length/2*f);d.css("width",e.width()-60);g.hover(function(){clearTimeout(r)},
function(){r=setTimeout(c,A)});a.find("div#abgne_marquee .marquee_btn").unbind("click");a.find("div#abgne_marquee .marquee_btn").click(function(){w||(clearTimeout(r),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});a.find("div#abgne_marquee .marquee_btn").unbind("keydown");a.find("div#abgne_marquee .marquee_btn").keydown(function(a){a.keyCode==13&&!w&&(clearTimeout(r),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});r=setTimeout(c,A)}},g={};g.uid=e;b.ajax({url:d+"widget/text_marquee/news_query_json.php",
data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d=0;a.find("ul#marquee_ul").empty();for(var g=0;g<b.length;g++){var i=b[g].link,t=b[g].content,l="";b[g].enablelink=="1"?(l="<li><span>",l+='<a href="'+i+'" title="'+t+'" target="_blank" class="b-link tab-ctl-x">'+t+"</a>",l+="</span></li>"):l='<li><span title="'+t+'" class="b-link">'+t+"</span></li>";a.find("ul#marquee_ul").append(l);d++}d<=1&&(a.find("#marquee_next_btn").hide(),
a.find("#marquee_prev_btn").hide());f();c.complete!=null&&c.complete(e)}})};b.fn.widget.text_marquee=function(a,c,d,e){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed"));a.resize(function(){});var f=function(){function c(){w=!w;var a=d.position().top/f,a=(C?a-1:a+1)%g.length,b=a*f;C==1&&a<=0&&(d.children().last().prependTo(d),d.css("top",f),b=0);d.animate({top:b},l,function(){a==g.length-1&&(d.children().last().prependTo(d),d.css("top",0));w=!w});r=setTimeout(c,A)}var d=a.find("div#abgne_marquee ul"),
e=a.find("div#abgne_marquee");d.find("li");var g=d.children(),f=a.find("div#abgne_marquee").height()*-1,l=i,r,A=3E3+l,C=0,w=!1;d.css("top",0);d.css("width",e.width()-60);g.hover(function(){clearTimeout(r)},function(){r=setTimeout(c,A)});window.addEventListener("keydown",function(a){a.key==="Tab"&&clearTimeout(r)});a.find("div#abgne_marquee .marquee_btn").unbind("click");a.find("div#abgne_marquee .marquee_btn").click(function(){w||(clearTimeout(r),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});
a.find("div#abgne_marquee .marquee_btn").unbind("keydown");a.find("div#abgne_marquee .marquee_btn").keydown(function(a){a.keyCode==13&&!w&&(clearTimeout(r),C=b(this).attr("id")=="marquee_next_btn"?0:1,c())});r=setTimeout(c,A)},g={};g.uid=e;b.ajax({url:d+"widget/text_marquee/news_query_json.php",data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d=0;a.find("ul#marquee_ul").empty();for(var g=0;g<b.length;g++){var i=b[g].link,t=b[g].content,
l="";b[g].enablelink=="1"?(l="<li><span>",l+='<a href="'+i+'" title="'+t+'" target="_blank" class="b-link tab-ctl-x">'+t+"</a>",l+="</span></li>"):l='<li><span title="'+t+'" class="b-link">'+t+"</span></li>";a.find("ul#marquee_ul").append(l);d++}d<=1&&(a.find("#marquee_next_btn").hide(),a.find("#marquee_prev_btn").hide());f();c.complete!=null&&c.complete(e)}})};b.fn.widget.text_marquee2=function(a,c,d,e){var d=c.root_path,i=parseInt(a.find("#abgne_marquee").attr("data-speed")),f=a.find("#abgne_marquee").attr("data-direction");
a.resize(function(){});var g={};g.uid=e;b.ajax({url:d+"widget/text_marquee2/news_query_json.php",data:g,type:"POST",dataType:"json",timeout:2E4,error:function(){alert("Error loading JSON data")},success:function(b){var d="",g=0;d+='<marquee style="width:100%;height:100%;"';d+=' onMouseOver="this.stop()" onMouseOut="this.start()"';d+=' direction="'+f+'"';d+=' scrollamount="'+i+'"';d+=' height="100%">';d+='<div id="marquee_content">';for(var o=g=0;o<b.length;o++){var t=b[o].content;d+="<div>";d+=t;
d+="</div>";g++}d+="</div>";d+="</marquee>";a.find("#abgne_marquee_content").empty();a.find("#abgne_marquee_content").html(d);c.complete!=null&&c.complete(e)}})};b.fn.widget.resource_show=function(a,c,d,e){var i=c.root_path,f=c.action,g=a.find("#resource_show_main").attr("data-album-id"),m=a.find("#resource_show_main").attr("data-shown-column"),h=a.find("#resource_show_main").attr("data-style"),q=a.find("#resource_show_main").attr("data-string-table"),o=null,t=g,l=!!parseInt(a.find("#resource_show_main").attr("data-view")),
r=i;if(h!="")try{o=JSON.parse(decodeURIComponent(h))}catch(A){o=null}if(q!="")try{json_string_table=JSON.parse(decodeURIComponent(q))}catch(C){json_string_table=null}var w=function(b){b=b.attr("hid");a.find("#resource_show_main").attr("data-field",b);b=a.find("#resource_show_main").attr("data-order");a.find("#resource_show_main").attr("data-order",b=="DESC"?"ASC":"DESC");b=a.find("#resource_show_main").attr("data-page-num");z(g,b)},y=function(b){g=b.attr("aid");a.find("#search .input").val("");z(g,
0)},u=function(a){var b=a.attr("file"),a=a.attr("resource_id"),c="";if(a!=void 0&&a>0)c=r+"/openfid.php?id="+a;else if(b!=void 0&&b!="")c=r+"/open.php?file="+b;else return;window.open(c)},j=function(a){a=a.attr("data-page-num");z(g,a)},z=function(g,f){var h=a.find("#resource_show_main").attr("data-query-count"),q=a.find("#resource_show_main").attr("data-field"),n=a.find("#resource_show_main").attr("data-order"),A=a.find("#search .input").val(),k={};k.aid=g;k.field=q;k.order=n;k.pageNum=f;k.maxRows=
h;k.keyword=escape(A);k.queryall=1;k.auth_type="user";k.bid=d;b.ajax({url:i+"widget/resource_integration/resource_query_field.php",data:k,type:"GET",dataType:"json",timeout:2E4,error:function(){},success:function(f){var h=parseInt(f[0].rcode);r=f[0].resource_root_url;if(h==401)a.find("#resource_show_main").attr("data-login-album-id",g),f=i+"config/login.php",h=encodeURI("type=folder,bid="+d+",aid="+g+",resource="+g),f=f+"?response_type=session&permission_scope=resource&data="+h+"&continue="+encodeURIComponent(i+
"public/open_id/callback.html?callback=onWidgetLoginSuccess&uid="+e),window.open(f,"mywindow","menubar=1,resizable=1,width=630,height=630, top=100, left=300");else if(h==200&&(build_resource_view(a.find("#mainRegion"),l,g,t,m,f,json_string_table,y,u,w,j),o!=null))f=o.table_head_color,f!=""&&b("#atb thead tr").css("background-color",f),f=o.table_odd_color,f!=""&&b("#atb tr.odd").css("background-color",f),f=o.table_even_color,f!=""&&b("#atb tr.even").css("background-color",f),f=o.table_font_size,f!=
""&&b("#atb tr.tcontent").css("font-size",f);c.update_tabindex!=null&&c.update_tabindex(e);f=a.find("#search").height()+a.find("#resource_show_main").height()+20;setMainHeight(f)}})};if(f=="onLoginHandler"){if(!b.isReady)return alert("widget is not ready!"),this;g=parseInt(a.find("#resource_show_main").attr("data-login-album-id"));z(g,0);return this}a.find("#resource_show_main").mouseover(function(){b(this).find(".optionDiv").show()});a.find("#resource_show_main").mouseleave(function(){b(this).find(".optionDiv").hide()});
a.find("#search .button").click(function(){z(g,0)});a.find("#search .input").keyup(function(b){var c=a.find("#search .input").val();(b.which==13||b.which!=9&&c=="")&&z(g,0)});b.contextMenu({selector:"#resource_show_main .optionDiv",trigger:"left",callback:function(a){a=="thumbView"?(l=0,z(g,0)):a=="listView"&&(l=1,z(g,0))},items:{thumbView:{name:"\u7e2e\u5716\u6a21\u5f0f",icon:"thumb",disabled:function(){return l==1?!1:!0}},listView:{name:"\u5217\u8868\u6a21\u5f0f",icon:"list",disabled:function(){return l==
0?!1:!0}}}});z(g,0)};b.fn.widget.floating_icon=function(a){var b=a.find("li"),d=b.length,e=0;b.hide();a.find("#icon_"+e).show();a.resize(function(){});(function(){setInterval(function(){e>d-1&&(e=0);b.hide();a.find("#icon_"+e).show();e++},3E3)})()}})(jQuery);var g_default_active_class_id="",g_window_width=0,g_rtime,g_timeout=!1,g_delta=200,g_count=0,g_storage=new myStorage,g_prev_hash_value="",g_hash_value="",g_pre_div_news_table_main_width=0,g_token="";
function loadembedpage(b,a,c,d){b="#"+b;a="#"+a;if($(".pagecontent").length){display_site_embed_pages();var b=$(b).find(a),b=b.find("div"),a=b.width(),d=Math.max($("#site_embed_pages").height(),600),e=c.indexOf("?");c+=e==-1?"?fw="+a:"&fw="+a;c+="&fh="+d;c=c.replace("page_map_main.php","page_map_main_v2.php");$.ajax({url:c,type:"post",dataType:"html",data:"",timeout:2E4,error:function(){alert("Fail to load content!")},success:function(a){$(".pagecontent").html(a)}})}else d==1&&$(b).children().css("display",
"none"),b=$(b).find(a),b.css("display","block"),b=b.find("iframe"),a=b.width(),d=b.height(),e=c.indexOf("?"),c+=e==-1?"?fw="+a:"&fw="+a,c+="&fh="+d,b.attr("src",c)}var Browser={Version:function(){var b=999;navigator.appVersion.indexOf("MSIE")!=-1&&(b=parseFloat(navigator.appVersion.split("MSIE")[1]));return b}};function setMainWidth(){$("#site_embed_pages").css("width","100%")}
function setMainHeight(b){var a=parseInt($(".sites-subpages-map").height());isNaN(a)||(b+=a);a=parseInt($(".contentArea").css("padding-top"));isNaN(a)||(b+=a);$("#site_embed_pages").css("height",b);log("site_embed_pages_height="+b);$("#center-content").children("#main").css("height",b)}
function setWidgetHeight(b,a){if($("."+b).is(":visible")&&($("."+b).css("height",a),$("."+b).closest(".sites-subpages-map").length>0)){var c=a+$(".sites-subpages-map").height()+10;$("#site_embed_pages").css("height",c);$("#site_embed_pages #iFrm").length>0&&$("#site_embed_pages #iFrm").css("height",c)}}
function setWidgetHeight(b,a){if(typeof b.is!="undefined"&&b.is(":visible")&&(b.css("height",a),b.closest(".sites-subpages-map").length>0)){var c=a+$(".sites-subpages-map").height()+10;$("#site_embed_pages").css("height",c);$("#site_embed_pages #iFrm").length>0&&$("#site_embed_pages #iFrm").css("height",c)}}
function adjustSectionSize(b){log("adjustSectionSize...");var a=$("#center-content"),c=a.children("#main");g_window_width=$(window).width();var d=$(".widget-top-x").length,e=d-1,i=function(){var a=0;$(".widget-top-x").each(function(){a+=$(this).height()});return a},f=i();f>$(window).height()/2&&(f=$(window).height()/4/d,$(".widget-top-x").css("max-height",f),$(".widget-top-x").find(".widget-x").css("max-height",f),f=i());(function(){var a=0;$(".widget-top-x").each(function(){$(this).css("top",a);
a+=$(this).height()})})();(function(){$(".widget-top-x").each(function(a){$(this).css("z-index",120);e>a&&$(this).css("box-shadow","none")})})();d>0&&$("#container").css("top",f);is_rwd_page()?(adjust_rwd_container_layout(),$(".s1").css("width","100%"),$(".s1").css("height","auto"),$(".s1").css("overflow-y","hidden"),b&&(d=c.height(),$("#site_embed_pages").attr("data-ini-height",d),b())):setTimeout(function(){var d=[],e=[];$(".s1").each(function(){for(var a=$(this).parent().attr("id"),b=!1,c=0;c<
d.length;c++)if(d[c]==a){b=!0;break}$(this).width()>0&&(b==!1&&(d.push(a),e[a]=0),e[a]++)});for(var f=0;f<d.length;f++){var i=d[f];if(!(e[i]<=1)){var o=0;$("#"+i+" .s1").each(function(){var a=0,b=$(this).attr("id");$(this).children().each(function(){var c=$(this).attr("class");if(c!=void 0&&$(this).css("display")=="block"&&$(this).attr("id")!="popup"){var d=parseInt($(this).css("padding-top")),e=parseInt($(this).css("padding-bottom")),d=$(this).height()+d+e;a+=d;log(b+" > class_name="+c+"'s height="+
d)}});o=Math.max(o,a)});log(i+"'s height="+o);$("#"+i+" .s1").css("height",o)}}$(".s3").each(function(){var a=$(this).parent();if(a){var b=a.height();$(this).prevAll("div").each(function(){b-=$(this).height()});$(this).css("height",b)}});f=parseFloat($("#container").css("width"));i=parseFloat($("#container").parent().css("width"));if(100*f/i+"%"=="100%"){var t=a.width();a.children(".s1").each(function(){$(this).attr("id")!="main"&&(t-=$(this).width())});f=parseInt(c.css("border-left"));f>0&&(t-=f);
c.animate({width:t},50,function(){})}b&&(f=c.height(),$("#site_embed_pages").attr("data-ini-height",f),b())},200)}
function xxadjustWidgetSize(){$(".widget-x").each(function(){if($(this).attr("id")=="xheader"){$(this).attr("class");var b=parseInt($(this).find("#header_pic").attr("data-widget-height")),a=parseInt($(this).find("#header_pic").attr("data-image-width")),c=a,d=b;$(this).width()<a?(c=$(this).width(),d=c*(b/a),$(this).find("#header_pic").css("background-size",c),$(this).css("height",d)):($(this).find("#header_pic").css("background-size","auto"),$(this).css("height",b))}})}
function log(b){console.log&&g_debug=="1"&&console.log(new Date+": "+b)}function decode_uri_string(b){if(b=="")return log("decode_uri_string input string is empty."),"";var a="";try{a=decodeURIComponent(b)}catch(c){log("decode_uri_string fail ["+b+"]"),a=b}return a}function parse_json_string(b){if(b=="")return log("parse_json_string input string is empty."),"";var a=null;try{a=$.parseJSON(b)}catch(c){return log("parse_json_string fail ["+b+"]"),null}return a}
function load_Site_News_Tab_Content(b,a){var c="";c+="uid="+a;c+="&nid="+b;$.ajax({url:"../../widget/site_news_tab/news_query_content.php",data:c,type:"GET",dataType:"xml",timeout:2E4,error:function(){},success:function(a){$(window).width();$(window).height();var b="";b+="<div class='bd'>";$("entry",a).each(function(){var a=$(this).find("content").text();b+=a});b+="</div>";close_popup_content();setTimeout(function(){popup_content("html","940px",b,"yes")},300)}})}
function close_popup_content(){$(".popup").bPopup().close()}
function popup_content(b,a,c,d){$(".popup .content").empty();var e,i;if(is_rwd_page()||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&screen.width<g_rwd_device_width)if(b=="url"){window.location=c;return}else $(".popup").addClass("mobile_popup"),e=$(window).width()-10,i=$(window).height()-50;else $(".popup").removeClass("mobile_popup"),e=$(window).width()-100,i=$(window).height()-100;a=parseInt(a);a=a>e?e:a;e=i;b=="url"?($(".popup").css("width",a),$(".popup").css("height",
e),$(".popup").bPopup({content:"iframe",contentContainer:".popup .content",loadUrl:c,positionStyle:"fixed",position:["auto",20],loadCallback:function(){var a=$(this).find("iframe");a.css("width",$(this).width()+"px");a.css("height",$(this).height()+"px");a.css("background","url()");a.attr("title","\u6d88\u606f\u5167\u5bb9");a.attr("scrolling",d);$(".popup iframe").focus()}},function(){})):(b=$(window).scrollTop()+20,$(c).appendTo($(".popup .content")),$(".popup").css("width",a),$(".popup").css("height",
"auto"),$(".popup").bPopup({follow:[!1,!1],position:["auto",b]}))}var gIframeContentResizeFunc=void 0;function callIframeContentResizeFunc(b,a){typeof gIframeContentResizeFunc!="undefined"&&gIframeContentResizeFunc(b,a)}function getUrlVars(){for(var b=[],a,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}
function getParameterByName(b,a){if(!a)a=window.location.href;var b=b.replace(/[\[\]]/g,"\\$&"),c=RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)").exec(a);return!c?"":!c[2]?"":decodeURIComponent(c[2].replace(/\+/g," "))}function process_hash_value(){g_hash_value=window.location.hash.toLowerCase()}function getUrlParameter(b){var a=decodeURIComponent(window.location.search.substring(1)).split("&"),c,d;for(d=0;d<a.length;d++)if(c=a[d].split("="),c[0]===b)return c[1]===void 0?!0:c[1]}
function process_url_param(){var b=getUrlParameter("cid"),a=getUrlParameter("nid"),c=getUrlParameter("hiid"),d="";isNaN(b)?isNaN(c)?g_home_class_id!=""&&!isNaN(g_home_class_id)?(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?id="+g_home_class_id,g_default_active_class_id=g_home_class_id):isNaN(a)||(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?nid="+a):(d=g_root_path+"widget/main_menu/page_map_main_v2.php",d+="?hiid="+c):(d=g_root_path+"widget/main_menu/page_map_main_v2.php",
d+="?id="+b,g_default_active_class_id=b);return d!=""?(load_site_embed_pages_content(),!0):!1}function resizeend(){new Date-g_rtime<g_delta?setTimeout(resizeend,g_delta):(g_timeout=!1,g_window_width!=$(window).width()&&adjustSectionSize())}function isBrowser(b){return navigator.userAgent.toLowerCase().indexOf(b)!=-1?1:0}function logout(){$.ajax({url:"../../config/logout_m.php?continue=../publish_page/"+g_bid,error:function(){},success:function(){}})}
function is_mobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1}
function is_rwd_page(){if(g_rwd==1){var b=Math.round(window.devicePixelRatio*100);log("browserZoomLevel="+b+", container.width()="+$("#container").width()+", window.width()="+$(window).width());if(screen.width<g_rwd_device_width)return!0;else if($(window).width()<g_rwd_device_width)return!0;else if(g_web_accessibility==1&&b>150&&$("#container").width()>=$(window).width())return!0}return!1}
function show_mobile_nav_bar(b){b=$("."+b+" #mobile_main_menu_content2");b.hasClass("menu-silder")?b.hasClass("menu-unactive")?(b.addClass("menu-active"),b.removeClass("menu-unactive")):b.hasClass("menu-active")&&(b.addClass("menu-unactive"),b.removeClass("menu-active")):b.is(":visible")?b.hide():b.show()}function change_doc_title(){}
function load_site_embed_pages_content(){$("#site_embed_pages").resize(function(){var a=$("#site_embed_pages").width();$("#site_embed_pages").height();g_pre_div_news_table_main_width!=a&&(g_pre_div_news_table_main_width=a,adjust_site_embed_pages_size())});display_site_embed_pages();var b=$("meta[itemprop=name]").attr("content");change_doc_title(b+" | "+$(".l_map").text());$('#site_embed_pages a[href^="#"]').bind("click.smoothscroll",function(a){var b=$(this).attr("id");if(!(b!=void 0&&(b.indexOf("C-")==
0||b.indexOf("tab_header")==0))){a.preventDefault();var c=this.hash,a=$(".contentArea "+c);a.length>0?$("html, body").stop().animate({scrollTop:a.offset().top-40},900,"swing",function(){window.location.hash=c}):log("\u7db2\u9801\u9328\u9ede["+c+"]\u4e0d\u5b58\u5728")}});$(".reduced-menu-ctl-x").click(function(){var a=$(this).attr("data-title");$(this).hasClass("reduced-menu-open-x")?($(".reduced-menu-data-x").hide(),$(this).removeClass("reduced-menu-open-x"),$(this).attr("title",a+"(\u9ede\u64ca\u958b\u555f)")):
($(".reduced-menu-data-x").hide(),$(".reduced-menu-open-x").removeClass("reduced-menu-open-x"),$(this).addClass("reduced-menu-open-x"),$(this).parent().siblings("#reduced_menu_content").show(),$(this).attr("title",a+"(\u9ede\u64ca\u95dc\u9589)"));adjust_site_embed_pages_size()});var a=0,c=$("#site_embed_pages img").length;$("#site_embed_pages img").on("load",function(){a++;a==c&&adjust_site_embed_pages_size()});adjust_site_embed_pages_size()}
function display_site_embed_pages(){is_rwd_page()&&($(".mobile-main-menu-content").hasClass("menu-silder")||$(".mobile-main-menu-content").hide(),$(".menubar").hide());var b=$("#center-content").height();$("#site_embed_pages").attr("data-ini-height")!=void 0&&(b=parseInt($("#site_embed_pages").attr("data-ini-height")));var a=$(".s1").height(),b=Math.max(b,a)-5;b<=0&&(b=600);$("#site_embed_pages").css("height",b);$("#center-content").children("#main").children(".widget-x").hide();$("#site_embed_pages").show();
$("#page_main_content").show()}
function adjust_site_embed_pages_size(){var b=$("#site_embed_pages").find("#div_news_table_main"),a=$("#site_embed_pages").width();is_rwd_page()&&(a=$(window).width());var c=parseInt(b.css("margin-left"));isNaN(c)||(a-=c);c=parseInt(b.css("margin-right"));isNaN(c)||(a-=c);b.css("width",a);$("#site_embed_pages").find("#div_news_table_1_topbanner_center").css("width",a-4);c=0;if($(".menubar").length>0&&$(".menubar").is(":visible")){var c=$(".menubar").width()+1,d=parseInt($(".menubar").css("margin-left"));isNaN(d)||
(c+=d);d=parseInt($(".menubar").css("margin-right"));isNaN(d)||(c+=d)}d=parseInt($("#page_main_content").css("padding-left"));isNaN(d)||(a-=d);d=parseInt($("#page_main_content").css("padding-right"));isNaN(d)||(a-=d);a-=c;$(".contentArea").css("width",a);$(".sites-subpages").css("width",a);setMainWidth(a);c=parseInt(b.css("margin-top"));a=parseInt(b.css("margin-bottom"));b=b.height()+c+a;setMainHeight(b)}
function on_load_site_embed_pages_iFrm_complete(b){document.getElementById("iFrm");b!=void 0&&($("#iFrm").css("height",b),$("#iFrm").css("min-height",b),adjust_site_embed_pages_size(),adjustSectionSize())}function onGetWidgetToken(b,a){g_token=b;$(".widget-x").each(function(){$(this).attr("class").indexOf(a)!=-1&&$(this).widget({action:"onLoginHandler",root_path:g_root_path},b)})}
function onWidgetLoginSuccess(b,a){$(".widget-x").each(function(){$(this).attr("class").indexOf(a)!=-1&&$(this).widget({action:"onLoginHandler",root_path:g_root_path},b)})}
$(document).ready(function(){if(g_disable_right_menu)document.oncontextmenu=function(){return!1};var b=g_storage.get("board-fontsize"),a=getParameterByName("fontsize");a!=""&&(b=a);b=="medium"?$("#layout").css("font-size","1.1em"):b=="large"&&$("#layout").css("font-size","1.2em");g_storage.set("board-fontsize",b);process_hash_value();process_url_param();g_count=0;var c=$(".widget-x").length;log("widget_x_count = "+c);$(".widget-x").each(function(){$(this).css("visibility","visible");$(this).widget({action:"",
root_path:g_root_path,complete:function(a){g_count++;log("g_count = "+g_count+"/"+c+" : "+a);adjustSectionSize();$("a").each(function(){$(this).addClass("tab-ctl-x")})},update_tabindex:function(){$(".tab-ctl-x").each(function(){$(this).attr("tabindex",0)})}})});is_rwd_page()&&adjust_rwd_container_layout();load_data();$("#gotop").keyup(function(a){a.which==13&&jQuery("html,body").animate({scrollTop:0},500)});$("#gotop").click(function(){jQuery("html,body").animate({scrollTop:0},500)});$("#Accesskey_C").length>
0?$("#gotocenter").focus(function(){$(this).animate({left:"10",top:"0"},"fast","linear",function(){})}).focusout(function(){$(this).animate({left:"10",top:"-999"},"fast","linear",function(){})}):$("#gotocenter").hide();$(window).scroll(function(){$(this).scrollTop()>300?$("#gotop").fadeIn("fast"):$("#gotop").fadeOut("fast")});$(window).resize(function(){g_rtime=new Date;g_timeout===!1&&(g_timeout=!0,setTimeout(resizeend,g_delta))});$(".contentArea").resize(function(){adjust_site_embed_pages_size()});
$(document).click(function(){});$("#class_password_input #password_submit").click(function(){var a=$(this).attr("data-cid"),b=$(this).attr("data-uid"),c=$("#class_password_input #password_input").val(),f={};f.uid=b;f.cid=a;f.pwd=c;$.ajax({url:"../../widget/main_menu/password_input.php",type:"post",dataType:"text",data:f,timeout:2E4,error:function(){alert("\u9a57\u8b49\u5931\u6557\uff01")},success:function(a){a==200?window.location.reload():alert("\u9a57\u8b49\u5931\u6557\uff01")}})});setTimeout(function(){var a=
getUrlParameter("cid");typeof a=="undefined"||a==""||(a=Math.max($("#center-content").position().top,0),a>$(window).height()*0.7&&!isNaN(g_default_active_class_id)&&!g_disable_mainmenu_auto_scroll&&(log("html, body scrollTop: "+a),jQuery("html,body").animate({scrollTop:a},200)))},500);if(g_person_id>0&&g_person_name!=""){b=window.location.href;if(b.indexOf("%27")!=-1||b.indexOf("%22")!=-1)b=b.substring(0,b.indexOf("?"));a="Hi! "+g_person_name;g_debug==1&&(a+="("+g_person_id+", "+g_person_level+")");
a+="<a href='"+g_root_path+"config/logout_m.php?continue="+b+"'>\u767b\u51fa</a>";$("#login_info").empty();$("#login_info").append(a);$("#login_info").show()}});function onYouTubeIframeAPIReady(){$(".widget-x").each(function(){$(this).attr("id")=="youtube"&&$(this).widget({action:"onYouTubeIframeAPIReady",root_path:g_root_path})})}function adjust_rwd_container_layout(){$("#container").css("width","auto");$("#container").css("overflow-x","hidden");$("#container").css("overflow-y","hidden")};
